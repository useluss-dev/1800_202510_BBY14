const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/reviewLandlord-BA3BQbVP.js","assets/userLoggedIn-BiC4FiBi.js","assets/addLandlord-CQNfdm2a.js","assets/editLandlord-OkAmbdcp.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=r(o);fetch(o.href,u)}})();var Wl=function(e,t){return Wl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},Wl(e,t)};function z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Wl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Go=function(){return Go=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},Go.apply(this,arguments)};function D(e,t,r,i){function o(u){return u instanceof r?u:new r(function(c){c(u)})}return new(r||(r=Promise))(function(u,c){function l(g){try{p(i.next(g))}catch(y){c(y)}}function f(g){try{p(i.throw(g))}catch(y){c(y)}}function p(g){g.done?u(g.value):o(g.value).then(l,f)}p((i=i.apply(e,t||[])).next())})}function k(e,t){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,o,u,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=l(0),c.throw=l(1),c.return=l(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(p){return function(g){return f([p,g])}}function f(p){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(r=0)),r;)try{if(i=1,o&&(u=p[0]&2?o.return:p[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,p[1])).done)return u;switch(o=0,u&&(p=[p[0]&2,u.value]),p[0]){case 0:case 1:u=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,o=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!u||p[1]>u[0]&&p[1]<u[3])){r.label=p[1];break}if(p[0]===6&&r.label<u[1]){r.label=u[1],u=p;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(p);break}u[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(g){p=[6,g],o=0}finally{i=u=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Ll(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pu(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),o,u=[],c;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(l){c={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(c)throw c.error}}return u}function It(e,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,u;i<o;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vw={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kS=function(e,t){if(!e)throw DS(t)},DS=function(e){return new Error("Firebase Database ("+vw.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gw=function(e){for(var t=[],r=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++i)&1023),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128)}return t},CS=function(e){for(var t=[],r=0,i=0;r<e.length;){var o=e[r++];if(o<128)t[i++]=String.fromCharCode(o);else if(o>191&&o<224){var u=e[r++];t[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){var u=e[r++],c=e[r++],l=e[r++],f=((o&7)<<18|(u&63)<<12|(c&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(f>>10)),t[i++]=String.fromCharCode(56320+(f&1023))}else{var u=e[r++],c=e[r++];t[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},mw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],o=0;o<e.length;o+=3){var u=e[o],c=o+1<e.length,l=c?e[o+1]:0,f=o+2<e.length,p=f?e[o+2]:0,g=u>>2,y=(u&3)<<4|l>>4,w=(l&15)<<2|p>>6,I=p&63;f||(I=64,c||(w=64)),i.push(r[g],r[y],r[w],r[I])}return i.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(gw(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):CS(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var r=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],o=0;o<e.length;){var u=r[e.charAt(o++)],c=o<e.length,l=c?r[e.charAt(o)]:0;++o;var f=o<e.length,p=f?r[e.charAt(o)]:64;++o;var g=o<e.length,y=g?r[e.charAt(o)]:64;if(++o,u==null||l==null||p==null||y==null)throw Error();var w=u<<2|l>>4;if(i.push(w),p!==64){var I=l<<4&240|p>>2;if(i.push(I),y!==64){var E=p<<6&192|y;i.push(E)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},RS=function(e){var t=gw(e);return mw.encodeByteArray(t,!0)},Um=function(e){return RS(e).replace(/\./g,"")},Vm=function(e){try{return mw.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(e){return Ho(void 0,e)}function Ho(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var r=t;return new Date(r.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var i in t)!t.hasOwnProperty(i)||!xS(i)||(e[i]=Ho(e[i],t[i]));return e}function xS(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LS=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(r,i){t.resolve=r,t.reject=i})}return e.prototype.wrapCallback=function(t){var r=this;return function(i,o){i?r.reject(i):r.resolve(o),typeof t=="function"&&(r.promise.catch(function(){}),t.length===1?t(i):t(i,o))}},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var r={alg:"none",type:"JWT"},i=t||"demo-project",o=e.iat||0,u=e.sub||e.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var c=Go({iss:"https://securetoken.google.com/"+i,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},e),l="";return[Um(JSON.stringify(r)),Um(JSON.stringify(c)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())}function yw(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FS(){return typeof self=="object"&&self.self===self}function US(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function VS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jS(){return _r().indexOf("Electron/")>=0}function qS(){var e=_r();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function BS(){return _r().indexOf("MSAppHost/")>=0}function iR(){return vw.NODE_ADMIN===!0}function KS(){return!yw()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oR(){return"indexedDB"in self&&indexedDB!=null}function sR(){return new Promise(function(e,t){try{var r=!0,i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=function(){o.result.close(),r||self.indexedDB.deleteDatabase(i),e(!0)},o.onupgradeneeded=function(){r=!1},o.onerror=function(){var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(u){t(u)}})}function uR(){return!(!navigator||!navigator.cookieEnabled)}function aR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GS="FirebaseError",HS=function(e){z(t,e);function t(r,i,o){var u=e.call(this,i)||this;return u.code=r,u.customData=o,u.name=GS,Object.setPrototypeOf(u,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(u,Nf.prototype.create),u}return t}(Error),Nf=function(){function e(t,r,i){this.service=t,this.serviceName=r,this.errors=i}return e.prototype.create=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=r[0]||{},u=this.service+"/"+t,c=this.errors[t],l=c?zS(c,o):"Error",f=this.serviceName+": "+l+" ("+u+").",p=new HS(u,f,o);return p},e}();function zS(e,t){return e.replace($S,function(r,i){var o=t[i];return o!=null?String(o):"<"+i+"?>"})}var $S=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(e){return JSON.parse(e)}function cR(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kf=function(e){var t={},r={},i={},o="";try{var u=e.split(".");t=jm(Vm(u[0])||""),r=jm(Vm(u[1])||""),o=u[2],i=r.d||{},delete r.d}catch{}return{header:t,claims:r,data:i,signature:o}},hR=function(e){var t=kf(e).claims;return typeof t=="object"&&t.hasOwnProperty("iat")?t.iat:null},lR=function(e){var t=kf(e),r=t.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},fR=function(e){var t=kf(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dR(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function pR(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function vR(e,t,r){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=t.call(r,e[o],o,e));return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(e){for(var t=[],r=function(f,p){Array.isArray(p)?p.forEach(function(g){t.push(encodeURIComponent(f)+"="+encodeURIComponent(g))}):t.push(encodeURIComponent(f)+"="+encodeURIComponent(p))},i=0,o=Object.entries(e);i<o.length;i++){var u=o[i],c=u[0],l=u[1];r(c,l)}return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mR=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,r){r||(r=0);var i=this.W_;if(typeof t=="string")for(var o=0;o<16;o++)i[o]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(var o=0;o<16;o++)i[o]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(var o=16;o<80;o++){var u=i[o-3]^i[o-8]^i[o-14]^i[o-16];i[o]=(u<<1|u>>>31)&4294967295}for(var c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],p=this.chain_[3],g=this.chain_[4],y,w,o=0;o<80;o++){o<40?o<20?(y=p^l&(f^p),w=1518500249):(y=l^f^p,w=1859775393):o<60?(y=l&f|p&(l|f),w=2400959708):(y=l^f^p,w=3395469782);var u=(c<<5|c>>>27)+y+g+w+i[o]&4294967295;g=p,p=f,f=(l<<30|l>>>2)&4294967295,l=c,c=u}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295},e.prototype.update=function(t,r){if(t!=null){r===void 0&&(r=t.length);for(var i=r-this.blockSize,o=0,u=this.buf_,c=this.inbuf_;o<r;){if(c===0)for(;o<=i;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<r;)if(u[c]=t.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(u),c=0;break}}else for(;o<r;)if(u[c]=t[o],++c,++o,c===this.blockSize){this.compress_(u),c=0;break}}this.inbuf_=c,this.total_+=r}},e.prototype.digest=function(){var t=[],r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=r&255,r/=256;this.compress_(this.buf_);for(var o=0,i=0;i<5;i++)for(var u=24;u>=0;u-=8)t[o]=this.chain_[i]>>u&255,++o;return t},e}();function WS(e,t){var r=new QS(e,t);return r.subscribe.bind(r)}var QS=function(){function e(t,r){var i=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(function(){t(i)}).catch(function(o){i.error(o)})}return e.prototype.next=function(t){this.forEachObserver(function(r){r.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(r){r.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,r,i){var o=this,u;if(t===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");XS(t,["next","error","complete"])?u=t:u={next:t,error:r,complete:i},u.next===void 0&&(u.next=Pl),u.error===void 0&&(u.error=Pl),u.complete===void 0&&(u.complete=Pl);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?u.error(o.finalError):u.complete()}catch{}}),this.observers.push(u),c},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var r=0;r<this.observers.length;r++)this.sendOne(r,t)},e.prototype.sendOne=function(t,r){var i=this;this.task.then(function(){if(i.observers!==void 0&&i.observers[t]!==void 0)try{r(i.observers[t])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})},e.prototype.close=function(t){var r=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){r.observers=void 0,r.onNoObservers=void 0}))},e}();function XS(e,t){if(typeof e!="object"||e===null)return!1;for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o in e&&typeof e[o]=="function")return!0}return!1}function Pl(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yR=function(e,t,r,i){var o;if(i<t?o="at least "+t:i>r&&(o=r===0?"none":"no more than "+r),o){var u=e+" failed: Was called with "+i+(i===1?" argument.":" arguments.")+" Expects "+o+".";throw new Error(u)}};function ww(e,t){return e+" failed: "+t+" argument "}function wR(e,t,r,i){if(!(i&&!r)&&typeof r!="function")throw new Error(ww(e,t)+"must be a valid function.")}function bR(e,t,r,i){if(r&&(typeof r!="object"||r===null))throw new Error(ww(e,t)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IR=function(e){for(var t=[],r=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o>=55296&&o<=56319){var u=o-55296;i++,kS(i<e.length,"Surrogate pair missing trail surrogate.");var c=e.charCodeAt(i)-56320;o=65536+(u<<10)+c}o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):o<65536?(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128)}return t},ER=function(e){for(var t=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,r++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YS=1e3,JS=2,ZS=4*60*60*1e3,tA=.5;function TR(e,t,r){t===void 0&&(t=YS),r===void 0&&(r=JS);var i=t*Math.pow(r,e),o=Math.round(tA*i*(Math.random()-.5)*2);return Math.min(ZS,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(e){return e&&e._delegate?e._delegate:e}var Ta=function(){function e(t,r,i){this.name=t,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eA=function(){function e(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(t){var r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){var i=new LS;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{var o=this.getOrInitializeService({instanceIdentifier:r});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(r).promise},e.prototype.getImmediate=function(t){var r,i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var r,i;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,!!this.shouldAutoInitialize()){if(rA(t))try{this.getOrInitializeService({instanceIdentifier:vr})}catch{}try{for(var o=Ll(this.instancesDeferred.entries()),u=o.next();!u.done;u=o.next()){var c=Pu(u.value,2),l=c[0],f=c[1],p=this.normalizeInstanceIdentifier(l);try{var g=this.getOrInitializeService({instanceIdentifier:p});f.resolve(g)}catch{}}}catch(y){r={error:y}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}},e.prototype.clearInstance=function(t){t===void 0&&(t=vr),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return D(this,void 0,void 0,function(){var t;return k(this,function(r){switch(r.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(It(It([],Pu(t.filter(function(i){return"INTERNAL"in i}).map(function(i){return i.INTERNAL.delete()}))),Pu(t.filter(function(i){return"_delete"in i}).map(function(i){return i._delete()}))))];case 1:return r.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.isInitialized=function(t){return t===void 0&&(t=vr),this.instances.has(t)},e.prototype.getOptions=function(t){return t===void 0&&(t=vr),this.instancesOptions.get(t)||{}},e.prototype.initialize=function(t){var r,i;t===void 0&&(t={});var o=t.options,u=o===void 0?{}:o,c=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:c,options:u});try{for(var f=Ll(this.instancesDeferred.entries()),p=f.next();!p.done;p=f.next()){var g=Pu(p.value,2),y=g[0],w=g[1],I=this.normalizeInstanceIdentifier(y);c===I&&w.resolve(l)}}catch(E){r={error:E}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return l},e.prototype.onInit=function(t,r){var i,o=this.normalizeInstanceIdentifier(r),u=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;u.add(t),this.onInitCallbacks.set(o,u);var c=this.instances.get(o);return c&&t(c,o),function(){u.delete(t)}},e.prototype.invokeOnInitCallbacks=function(t,r){var i,o,u=this.onInitCallbacks.get(r);if(u)try{for(var c=Ll(u),l=c.next();!l.done;l=c.next()){var f=l.value;try{f(t,r)}catch{}}}catch(p){i={error:p}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},e.prototype.getOrInitializeService=function(t){var r=t.instanceIdentifier,i=t.options,o=i===void 0?{}:i,u=this.instances.get(r);if(!u&&this.component&&(u=this.component.instanceFactory(this.container,{instanceIdentifier:nA(r),options:o}),this.instances.set(r,u),this.instancesOptions.set(r,o),this.invokeOnInitCallbacks(u,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,r,u)}catch{}return u||null},e.prototype.normalizeInstanceIdentifier=function(t){return t===void 0&&(t=vr),this.component?this.component.multipleInstances?t:vr:t},e.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},e}();function nA(e){return e===vr?void 0:e}function rA(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iA=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var r=this.getProvider(t.name);if(r.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);r.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var r=this.getProvider(t.name);r.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var r=new eA(t,this);return this.providers.set(t,r),r},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Ke(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<r;t++)for(var u=arguments[t],c=0,l=u.length;c<l;c++,o++)i[o]=u[c];return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr,Df=[],ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));var bw={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},oA=ot.INFO,sA=(pr={},pr[ot.DEBUG]="log",pr[ot.VERBOSE]="log",pr[ot.INFO]="info",pr[ot.WARN]="warn",pr[ot.ERROR]="error",pr),uA=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!(t<e.logLevel)){var o=new Date().toISOString(),u=sA[t];if(u)console[u].apply(console,Ke(["["+o+"]  "+e.name+":"],r));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},Iw=function(){function e(t){this.name=t,this._logLevel=oA,this._logHandler=uA,this._userLogHandler=null,Df.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ot))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?bw[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Ke([this,ot.DEBUG],t)),this._logHandler.apply(this,Ke([this,ot.DEBUG],t))},e.prototype.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Ke([this,ot.VERBOSE],t)),this._logHandler.apply(this,Ke([this,ot.VERBOSE],t))},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Ke([this,ot.INFO],t)),this._logHandler.apply(this,Ke([this,ot.INFO],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Ke([this,ot.WARN],t)),this._logHandler.apply(this,Ke([this,ot.WARN],t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Ke([this,ot.ERROR],t)),this._logHandler.apply(this,Ke([this,ot.ERROR],t))},e}();function aA(e){Df.forEach(function(t){t.setLogLevel(e)})}function cA(e,t){for(var r=function(c){var l=null;t&&t.level&&(l=bw[t.level]),e===null?c.userLogHandler=null:c.userLogHandler=function(f,p){for(var g=[],y=2;y<arguments.length;y++)g[y-2]=arguments[y];var w=g.map(function(I){if(I==null)return null;if(typeof I=="string")return I;if(typeof I=="number"||typeof I=="boolean")return I.toString();if(I instanceof Error)return I.message;try{return JSON.stringify(I)}catch{return null}}).filter(function(I){return I}).join(" ");p>=(l??f.logLevel)&&e({level:ot[p].toLowerCase(),message:w,args:g,type:f.name})}},i=0,o=Df;i<o.length;i++){var u=o[i];r(u)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn,hA=(Rn={},Rn["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Rn["bad-app-name"]="Illegal App name: '{$appName}",Rn["duplicate-app"]="Firebase App named '{$appName}' already exists",Rn["app-deleted"]="Firebase App named '{$appName}' already deleted",Rn["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Rn["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Rn),vi=new Nf("app","Firebase",hA),Ew="@firebase/app",lA="0.6.30",fA="@firebase/analytics",dA="@firebase/app-check",pA="@firebase/auth",vA="@firebase/database",gA="@firebase/functions",mA="@firebase/installations",yA="@firebase/messaging",wA="@firebase/performance",bA="@firebase/remote-config",IA="@firebase/storage",EA="@firebase/firestore",TA="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,Yu="[DEFAULT]",_A=(Wt={},Wt[Ew]="fire-core",Wt[fA]="fire-analytics",Wt[dA]="fire-app-check",Wt[pA]="fire-auth",Wt[vA]="fire-rtdb",Wt[gA]="fire-fn",Wt[mA]="fire-iid",Wt[yA]="fire-fcm",Wt[wA]="fire-perf",Wt[bA]="fire-rc",Wt[IA]="fire-gcs",Wt[EA]="fire-fst",Wt["fire-js"]="fire-js",Wt[TA]="fire-js-all",Wt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ii=new Iw("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gu=function(){function e(t,r,i){var o=this;this.firebase_=i,this.isDeleted_=!1,this.name_=r.name,this.automaticDataCollectionEnabled_=r.automaticDataCollectionEnabled||!1,this.options_=OS(t),this.container=new iA(r.name),this._addComponent(new Ta("app",function(){return o},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(u){return o._addComponent(u)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(r){t.checkDestroyed_(),r()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(r){return r.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,r){var i;r===void 0&&(r=Yu),this.checkDestroyed_();var o=this.container.getProvider(t);return!o.isInitialized()&&((i=o.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&o.initialize(),o.getImmediate({identifier:r})},e.prototype._removeServiceInstance=function(t,r){r===void 0&&(r=Yu),this.container.getProvider(t).clearInstance(r)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(r){Ii.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,r)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw vi.create("app-deleted",{appName:this.name_})},e}();Gu.prototype.name&&Gu.prototype.options||Gu.prototype.delete||console.log("dc");var SA="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(e){var t={},r=new Map,i={__esModule:!0,initializeApp:c,app:u,registerVersion:p,setLogLevel:aA,onLog:g,apps:null,SDK_VERSION:SA,INTERNAL:{registerComponent:f,removeApp:o,components:r,useAsService:y}};i.default=i,Object.defineProperty(i,"apps",{get:l});function o(w){delete t[w]}function u(w){if(w=w||Yu,!qm(t,w))throw vi.create("no-app",{appName:w});return t[w]}u.App=e;function c(w,I){if(I===void 0&&(I={}),typeof I!="object"||I===null){var E=I;I={name:E}}var _=I;_.name===void 0&&(_.name=Yu);var A=_.name;if(typeof A!="string"||!A)throw vi.create("bad-app-name",{appName:String(A)});if(qm(t,A))throw vi.create("duplicate-app",{appName:A});var x=new e(w,_,i);return t[A]=x,x}function l(){return Object.keys(t).map(function(w){return t[w]})}function f(w){var I=w.name;if(r.has(I))return Ii.debug("There were multiple attempts to register component "+I+"."),w.type==="PUBLIC"?i[I]:null;if(r.set(I,w),w.type==="PUBLIC"){var E=function(U){if(U===void 0&&(U=u()),typeof U[I]!="function")throw vi.create("invalid-app-argument",{appName:I});return U[I]()};w.serviceProps!==void 0&&Ho(E,w.serviceProps),i[I]=E,e.prototype[I]=function(){for(var U=[],C=0;C<arguments.length;C++)U[C]=arguments[C];var W=this._getService.bind(this,I);return W.apply(this,w.multipleInstances?U:[])}}for(var _=0,A=Object.keys(t);_<A.length;_++){var x=A[_];t[x]._addComponent(w)}return w.type==="PUBLIC"?i[I]:null}function p(w,I,E){var _,A=(_=_A[w])!==null&&_!==void 0?_:w;E&&(A+="-"+E);var x=A.match(/\s|\//),U=I.match(/\s|\//);if(x||U){var C=['Unable to register library "'+A+'" with version "'+I+'":'];x&&C.push('library name "'+A+'" contains illegal characters (whitespace or "/")'),x&&U&&C.push("and"),U&&C.push('version name "'+I+'" contains illegal characters (whitespace or "/")'),Ii.warn(C.join(" "));return}f(new Ta(A+"-version",function(){return{library:A,version:I}},"VERSION"))}function g(w,I){if(w!==null&&typeof w!="function")throw vi.create("invalid-log-argument");cA(w,I)}function y(w,I){if(I==="serverAuth")return null;var E=I;return E}return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){var e=AA(Gu);e.INTERNAL=Go(Go({},e.INTERNAL),{createFirebaseNamespace:Tw,extendNamespace:t,createSubscribe:WS,ErrorFactory:Nf,deepExtend:Ho});function t(r){Ho(e,r)}return e}var Cf=Tw();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NA=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(r){if(kA(r)){var i=r.getImmediate();return i.library+"/"+i.version}else return null}).filter(function(r){return r}).join(" ")},e}();function kA(e){var t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(e,t){e.INTERNAL.registerComponent(new Ta("platform-logger",function(r){return new NA(r)},"PRIVATE")),e.registerVersion(Ew,lA,t),e.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(FS()&&self.firebase!==void 0){Ii.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var Bm=self.firebase.SDK_VERSION;Bm&&Bm.indexOf("LITE")>=0&&Ii.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var CA=Cf.initializeApp;Cf.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return yw()&&Ii.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),CA.apply(void 0,e)};var H=Cf;DA(H);var RA="firebase",_w="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */H.registerVersion(RA,_w,"app");H.SDK_VERSION=_w;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ql=function(e,t){return Ql=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},Ql(e,t)};function OA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ql(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Sw(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var xA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V,Rf=Rf||{},X=xA||self;function Ju(){}function Xl(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function _a(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function LA(e,t,r){return e.call.apply(e.bind,arguments)}function PA(e,t,r){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,i),e.apply(t,o)}}return function(){return e.apply(t,arguments)}}function Gt(e,t,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Gt=LA:Gt=PA,Gt.apply(null,arguments)}function Mu(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var i=r.slice();return i.push.apply(i,arguments),e.apply(this,i)}}function $t(e,t){function r(){}r.prototype=t.prototype,e.Z=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.Vb=function(i,o,u){for(var c=Array(arguments.length-2),l=2;l<arguments.length;l++)c[l-2]=arguments[l];return t.prototype[o].apply(i,c)}}function Kn(){this.s=this.s,this.o=this.o}var MA=0;Kn.prototype.s=!1;Kn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),MA!=0)};Kn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Aw=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var r=0;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1},Nw=Array.prototype.forEach?function(e,t,r){Array.prototype.forEach.call(e,t,r)}:function(e,t,r){for(var i=e.length,o=typeof e=="string"?e.split(""):e,u=0;u<i;u++)u in o&&t.call(r,o[u],u,e)};function FA(e){t:{for(var t=DN,r=e.length,i=typeof e=="string"?e.split(""):e,o=0;o<r;o++)if(o in i&&t.call(void 0,i[o],o,e)){t=o;break t}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function Km(e){return Array.prototype.concat.apply([],arguments)}function Of(e){var t=e.length;if(0<t){for(var r=Array(t),i=0;i<t;i++)r[i]=e[i];return r}return[]}function Zu(e){return/^[\s\xa0]*$/.test(e)}var Gm=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function re(e,t){return e.indexOf(t)!=-1}function Ml(e,t){return e<t?-1:e>t?1:0}var ie;t:{var Hm=X.navigator;if(Hm){var zm=Hm.userAgent;if(zm){ie=zm;break t}}ie=""}function xf(e,t,r){for(var i in e)t.call(r,e[i],i,e)}function kw(e){var t={};for(var r in e)t[r]=e[r];return t}var $m="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dw(e,t){for(var r,i,o=1;o<arguments.length;o++){i=arguments[o];for(r in i)e[r]=i[r];for(var u=0;u<$m.length;u++)r=$m[u],Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}}function Lf(e){return Lf[" "](e),e}Lf[" "]=Ju;function UA(e){var t=qA;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}var VA=re(ie,"Opera"),Ei=re(ie,"Trident")||re(ie,"MSIE"),Cw=re(ie,"Edge"),Yl=Cw||Ei,Rw=re(ie,"Gecko")&&!(re(ie.toLowerCase(),"webkit")&&!re(ie,"Edge"))&&!(re(ie,"Trident")||re(ie,"MSIE"))&&!re(ie,"Edge"),jA=re(ie.toLowerCase(),"webkit")&&!re(ie,"Edge");function Ow(){var e=X.document;return e?e.documentMode:void 0}var ta;t:{var Fl="",Ul=function(){var e=ie;if(Rw)return/rv:([^\);]+)(\)|;)/.exec(e);if(Cw)return/Edge\/([\d\.]+)/.exec(e);if(Ei)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(jA)return/WebKit\/(\S+)/.exec(e);if(VA)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Ul&&(Fl=Ul?Ul[1]:""),Ei){var Vl=Ow();if(Vl!=null&&Vl>parseFloat(Fl)){ta=String(Vl);break t}}ta=Fl}var qA={};function BA(){return UA(function(){for(var e=0,t=Gm(String(ta)).split("."),r=Gm("9").split("."),i=Math.max(t.length,r.length),o=0;e==0&&o<i;o++){var u=t[o]||"",c=r[o]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],u[0].length==0&&c[0].length==0)break;e=Ml(u[1].length==0?0:parseInt(u[1],10),c[1].length==0?0:parseInt(c[1],10))||Ml(u[2].length==0,c[2].length==0)||Ml(u[2],c[2]),u=u[3],c=c[3]}while(e==0)}return 0<=e})}var Jl;if(X.document&&Ei){var Wm=Ow();Jl=Wm||parseInt(ta,10)||void 0}else Jl=void 0;var KA=Jl,GA=function(){if(!X.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{X.addEventListener("test",Ju,t),X.removeEventListener("test",Ju,t)}catch{}return e}();function Yt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Yt.prototype.h=function(){this.defaultPrevented=!0};function zo(e,t){if(Yt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Rw){t:{try{Lf(t.nodeName);var o=!0;break t}catch{}o=!1}o||(t=null)}}else r=="mouseover"?t=e.fromElement:r=="mouseout"&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:HA[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&zo.Z.h.call(this)}}$t(zo,Yt);var HA={2:"touch",3:"pen",4:"mouse"};zo.prototype.h=function(){zo.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Sa="closure_listenable_"+(1e6*Math.random()|0),zA=0;function $A(e,t,r,i,o){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!i,this.ia=o,this.key=++zA,this.ca=this.fa=!1}function Aa(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Na(e){this.src=e,this.g={},this.h=0}Na.prototype.add=function(e,t,r,i,o){var u=e.toString();e=this.g[u],e||(e=this.g[u]=[],this.h++);var c=tf(e,t,i,o);return-1<c?(t=e[c],r||(t.fa=!1)):(t=new $A(t,this.src,u,!!i,o),t.fa=r,e.push(t)),t};function Zl(e,t){var r=t.type;if(r in e.g){var i=e.g[r],o=Aw(i,t),u;(u=0<=o)&&Array.prototype.splice.call(i,o,1),u&&(Aa(t),e.g[r].length==0&&(delete e.g[r],e.h--))}}function tf(e,t,r,i){for(var o=0;o<e.length;++o){var u=e[o];if(!u.ca&&u.listener==t&&u.capture==!!r&&u.ia==i)return o}return-1}var Pf="closure_lm_"+(1e6*Math.random()|0),jl={};function xw(e,t,r,i,o){if(Array.isArray(t)){for(var u=0;u<t.length;u++)xw(e,t[u],r,i,o);return null}return r=Mw(r),e&&e[Sa]?e.N(t,r,_a(i)?!!i.capture:!1,o):WA(e,t,r,!1,i,o)}function WA(e,t,r,i,o,u){if(!t)throw Error("Invalid event type");var c=_a(o)?!!o.capture:!!o,l=Ff(e);if(l||(e[Pf]=l=new Na(e)),r=l.add(t,r,i,c,u),r.proxy)return r;if(i=QA(),r.proxy=i,i.src=e,i.listener=r,e.addEventListener)GA||(o=c),o===void 0&&(o=!1),e.addEventListener(t.toString(),i,o);else if(e.attachEvent)e.attachEvent(Pw(t.toString()),i);else if(e.addListener&&e.removeListener)e.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return r}function QA(){function e(r){return t.call(e.src,e.listener,r)}var t=XA;return e}function Lw(e,t,r,i,o){if(Array.isArray(t))for(var u=0;u<t.length;u++)Lw(e,t[u],r,i,o);else i=_a(i)?!!i.capture:!!i,r=Mw(r),e&&e[Sa]?(e=e.i,t=String(t).toString(),t in e.g&&(u=e.g[t],r=tf(u,r,i,o),-1<r&&(Aa(u[r]),Array.prototype.splice.call(u,r,1),u.length==0&&(delete e.g[t],e.h--)))):e&&(e=Ff(e))&&(t=e.g[t.toString()],e=-1,t&&(e=tf(t,r,i,o)),(r=-1<e?t[e]:null)&&Mf(r))}function Mf(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[Sa])Zl(t.i,e);else{var r=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(r,i,e.capture):t.detachEvent?t.detachEvent(Pw(r),i):t.addListener&&t.removeListener&&t.removeListener(i),(r=Ff(t))?(Zl(r,e),r.h==0&&(r.src=null,t[Pf]=null)):Aa(e)}}}function Pw(e){return e in jl?jl[e]:jl[e]="on"+e}function XA(e,t){if(e.ca)e=!0;else{t=new zo(t,this);var r=e.listener,i=e.ia||e.src;e.fa&&Mf(e),e=r.call(i,t)}return e}function Ff(e){return e=e[Pf],e instanceof Na?e:null}var ql="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mw(e){return typeof e=="function"?e:(e[ql]||(e[ql]=function(t){return e.handleEvent(t)}),e[ql])}function jt(){Kn.call(this),this.i=new Na(this),this.P=this,this.I=null}$t(jt,Kn);jt.prototype[Sa]=!0;jt.prototype.removeEventListener=function(e,t,r,i){Lw(this,e,t,r,i)};function Ht(e,t){var r,i=e.I;if(i)for(r=[];i;i=i.I)r.push(i);if(e=e.P,i=t.type||t,typeof t=="string")t=new Yt(t,e);else if(t instanceof Yt)t.target=t.target||e;else{var o=t;t=new Yt(i,e),Dw(t,o)}if(o=!0,r)for(var u=r.length-1;0<=u;u--){var c=t.g=r[u];o=Fu(c,i,!0,t)&&o}if(c=t.g=e,o=Fu(c,i,!0,t)&&o,o=Fu(c,i,!1,t)&&o,r)for(u=0;u<r.length;u++)c=t.g=r[u],o=Fu(c,i,!1,t)&&o}jt.prototype.M=function(){if(jt.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var r=e.g[t],i=0;i<r.length;i++)Aa(r[i]);delete e.g[t],e.h--}}this.I=null};jt.prototype.N=function(e,t,r,i){return this.i.add(String(e),t,!1,r,i)};jt.prototype.O=function(e,t,r,i){return this.i.add(String(e),t,!0,r,i)};function Fu(e,t,r,i){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var o=!0,u=0;u<t.length;++u){var c=t[u];if(c&&!c.ca&&c.capture==r){var l=c.listener,f=c.ia||c.src;c.fa&&Zl(e.i,c),o=l.call(f,i)!==!1&&o}}return o&&!i.defaultPrevented}var Uf=X.JSON.stringify;function YA(){var e=Uw,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var JA=function(){function e(){this.h=this.g=null}return e.prototype.add=function(t,r){var i=Fw.get();i.set(t,r),this.h?this.h.next=i:this.g=i,this.h=i},e}(),Fw=new(function(){function e(t,r){this.i=t,this.j=r,this.h=0,this.g=null}return e.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},e}())(function(){return new ZA},function(e){return e.reset()}),ZA=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(t,r){this.h=t,this.g=r,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function tN(e){X.setTimeout(function(){throw e},0)}function Vf(e,t){ef||eN(),nf||(ef(),nf=!0),Uw.add(e,t)}var ef;function eN(){var e=X.Promise.resolve(void 0);ef=function(){e.then(nN)}}var nf=!1,Uw=new JA;function nN(){for(var e;e=YA();){try{e.h.call(e.g)}catch(r){tN(r)}var t=Fw;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}nf=!1}function ka(e,t){jt.call(this),this.h=e||1,this.g=t||X,this.j=Gt(this.kb,this),this.l=Date.now()}$t(ka,jt);V=ka.prototype;V.da=!1;V.S=null;V.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ht(this,"tick"),this.da&&(jf(this),this.start()))}};V.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function jf(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}V.M=function(){ka.Z.M.call(this),jf(this),delete this.g};function qf(e,t,r){if(typeof e=="function")r&&(e=Gt(e,r));else if(e&&typeof e.handleEvent=="function")e=Gt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:X.setTimeout(e,t||0)}function Vw(e){e.g=qf(function(){e.g=null,e.i&&(e.i=!1,Vw(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}var rN=function(e){OA(t,e);function t(r,i){var o=e.call(this)||this;return o.m=r,o.j=i,o.h=null,o.i=!1,o.g=null,o}return t.prototype.l=function(r){this.h=arguments,this.g?this.i=!0:Vw(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(X.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Kn);function $o(e){Kn.call(this),this.h=e,this.g={}}$t($o,Kn);var Qm=[];function jw(e,t,r,i){Array.isArray(r)||(r&&(Qm[0]=r.toString()),r=Qm);for(var o=0;o<r.length;o++){var u=xw(t,r[o],i||e.handleEvent,!1,e.h||e);if(!u)break;e.g[u.key]=u}}function qw(e){xf(e.g,function(t,r){this.g.hasOwnProperty(r)&&Mf(t)},e),e.g={}}$o.prototype.M=function(){$o.Z.M.call(this),qw(this)};$o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Da(){this.g=!0}Da.prototype.Aa=function(){this.g=!1};function iN(e,t,r,i,o,u){e.info(function(){if(e.g)if(u)for(var c="",l=u.split("&"),f=0;f<l.length;f++){var p=l[f].split("=");if(1<p.length){var g=p[0];p=p[1];var y=g.split("_");c=2<=y.length&&y[1]=="type"?c+(g+"="+p+"&"):c+(g+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+i+") [attempt "+o+"]: "+t+`
`+r+`
`+c})}function oN(e,t,r,i,o,u,c){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+o+"]: "+t+`
`+r+`
`+u+" "+c})}function yi(e,t,r,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+uN(e,r)+(i?" "+i:"")})}function sN(e,t){e.info(function(){return"TIMEOUT: "+t})}Da.prototype.info=function(){};function uN(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r){for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var i=r[e];if(!(2>i.length)){var o=i[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if(u!="noop"&&u!="stop"&&u!="close")for(var c=1;c<o.length;c++)o[c]=""}}}}return Uf(r)}catch{return t}}var Rr={},Xm=null;function Ca(){return Xm=Xm||new jt}Rr.Ma="serverreachability";function Bw(e){Yt.call(this,Rr.Ma,e)}$t(Bw,Yt);function Wo(e){var t=Ca();Ht(t,new Bw(t))}Rr.STAT_EVENT="statevent";function Kw(e,t){Yt.call(this,Rr.STAT_EVENT,e),this.stat=t}$t(Kw,Yt);function oe(e){var t=Ca();Ht(t,new Kw(t,e))}Rr.Na="timingevent";function Gw(e,t){Yt.call(this,Rr.Na,e),this.size=t}$t(Gw,Yt);function cs(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return X.setTimeout(function(){e()},t)}var Ra={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Hw={};function Bf(){}Bf.prototype.h=null;function Ym(e){return e.h||(e.h=e.i())}function zw(){}var hs={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Kf(){Yt.call(this,"d")}$t(Kf,Yt);function Gf(){Yt.call(this,"c")}$t(Gf,Yt);var rf;function Oa(){}$t(Oa,Bf);Oa.prototype.g=function(){return new XMLHttpRequest};Oa.prototype.i=function(){return{}};rf=new Oa;function ls(e,t,r,i){this.l=e,this.j=t,this.m=r,this.X=i||1,this.V=new $o(this),this.P=aN,e=Yl?125:void 0,this.W=new ka(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $w}function $w(){this.i=null,this.g="",this.h=!1}var aN=45e3,of={},ea={};V=ls.prototype;V.setTimeout=function(e){this.P=e};function sf(e,t,r){e.K=1,e.v=La(wn(t)),e.s=r,e.U=!0,Ww(e,null)}function Ww(e,t){e.F=Date.now(),fs(e),e.A=wn(e.v);var r=e.A,i=e.X;Array.isArray(i)||(i=[String(i)]),eb(r.h,"t",i),e.C=0,r=e.l.H,e.h=new $w,e.g=Ib(e.l,r?t:null,!e.s),0<e.O&&(e.L=new rN(Gt(e.Ia,e,e.g),e.O)),jw(e.V,e.g,"readystatechange",e.gb),t=e.H?kw(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Wo(),iN(e.j,e.u,e.A,e.m,e.X,e.s)}V.gb=function(e){e=e.target;var t=this.L;t&&pn(e)==3?t.l():this.Ia(e)};V.Ia=function(e){try{if(e==this.g)t:{var t=pn(this.g),r=this.g.Da(),i=this.g.ba();if(!(3>t)&&(t!=3||Yl||this.g&&(this.h.h||this.g.ga()||ey(this.g)))){this.I||t!=4||r==7||(r==8||0>=i?Wo(3):Wo(2)),xa(this);var o=this.g.ba();this.N=o;e:if(Qw(this)){var u=ey(this.g);e="";var c=u.length,l=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mr(this),Vo(this);var f="";break e}this.h.i=new X.TextDecoder}for(r=0;r<c;r++)this.h.h=!0,e+=this.h.i.decode(u[r],{stream:l&&r==c-1});u.splice(0,c),this.h.g+=e,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=o==200,oN(this.j,this.u,this.A,this.m,this.X,t,o),this.i){if(this.$&&!this.J){e:{if(this.g){var p,g=this.g;if((p=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zu(p)){var y=p;break e}}y=null}if(o=y)yi(this.j,this.m,o,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,uf(this,o);else{this.i=!1,this.o=3,oe(12),mr(this),Vo(this);break t}}this.U?(Xw(this,t,f),Yl&&this.i&&t==3&&(jw(this.V,this.W,"tick",this.fb),this.W.start())):(yi(this.j,this.m,f,null),uf(this,f)),t==4&&mr(this),this.i&&!this.I&&(t==4?mb(this.l,this):(this.i=!1,fs(this)))}else o==400&&0<f.indexOf("Unknown SID")?(this.o=3,oe(12)):(this.o=0,oe(13)),mr(this),Vo(this)}}}catch{}finally{}};function Qw(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function Xw(e,t,r){for(var i=!0,o;!e.I&&e.C<r.length;)if(o=cN(e,r),o==ea){t==4&&(e.o=4,oe(14),i=!1),yi(e.j,e.m,null,"[Incomplete Response]");break}else if(o==of){e.o=4,oe(15),yi(e.j,e.m,r,"[Invalid Chunk]"),i=!1;break}else yi(e.j,e.m,o,null),uf(e,o);Qw(e)&&o!=ea&&o!=of&&(e.h.g="",e.C=0),t!=4||r.length!=0||e.h.h||(e.o=1,oe(16),i=!1),e.i=e.i&&i,i?0<r.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),Zf(t),t.L=!0,oe(11))):(yi(e.j,e.m,r,"[Invalid Chunked Response]"),mr(e),Vo(e))}V.fb=function(){if(this.g){var e=pn(this.g),t=this.g.ga();this.C<t.length&&(xa(this),Xw(this,e,t),this.i&&e!=4&&fs(this))}};function cN(e,t){var r=e.C,i=t.indexOf(`
`,r);return i==-1?ea:(r=Number(t.substring(r,i)),isNaN(r)?of:(i+=1,i+r>t.length?ea:(t=t.substr(i,r),e.C=i+r,t)))}V.cancel=function(){this.I=!0,mr(this)};function fs(e){e.Y=Date.now()+e.P,Yw(e,e.P)}function Yw(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=cs(Gt(e.eb,e),t)}function xa(e){e.B&&(X.clearTimeout(e.B),e.B=null)}V.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(sN(this.j,this.A),this.K!=2&&(Wo(),oe(17)),mr(this),this.o=2,Vo(this)):Yw(this,this.Y-e)};function Vo(e){e.l.G==0||e.I||mb(e.l,e)}function mr(e){xa(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,jf(e.W),qw(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function uf(e,t){try{var r=e.l;if(r.G!=0&&(r.g==e||af(r.i,e))){if(r.I=e.N,!e.J&&af(r.i,e)&&r.G==3){try{var i=r.Ca.g.parse(t)}catch{i=null}if(Array.isArray(i)&&i.length==3){var o=i;if(o[0]==0){t:if(!r.u){if(r.g)if(r.g.F+3e3<e.F)oa(r),Fa(r);else break t;Jf(r),oe(18)}}else r.ta=o[1],0<r.ta-r.U&&37500>o[2]&&r.N&&r.A==0&&!r.v&&(r.v=cs(Gt(r.ab,r),6e3));if(1>=ib(r.i)&&r.ka){try{r.ka()}catch{}r.ka=void 0}}else yr(r,11)}else if((e.J||r.g==e)&&oa(r),!Zu(t))for(o=r.Ca.g.parse(t),t=0;t<o.length;t++){var u=o[t];if(r.U=u[0],u=u[1],r.G==2)if(u[0]=="c"){r.J=u[1],r.la=u[2];var c=u[3];c!=null&&(r.ma=c,r.h.info("VER="+r.ma));var l=u[4];l!=null&&(r.za=l,r.h.info("SVER="+r.za));var f=u[5];f!=null&&typeof f=="number"&&0<f&&(i=1.5*f,r.K=i,r.h.info("backChannelRequestTimeoutMs_="+i)),i=r;var p=e.g;if(p){var g=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var y=i.i;!y.g&&(re(g,"spdy")||re(g,"quic")||re(g,"h2"))&&(y.j=y.l,y.g=new Set,y.h&&($f(y,y.h),y.h=null))}if(i.D){var w=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(i.sa=w,vt(i.F,i.D,w))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-e.F,r.h.info("Handshake RTT: "+r.O+"ms")),i=r;var I=e;if(i.oa=bb(i,i.H?i.la:null,i.W),I.J){ob(i.i,I);var E=I,_=i.K;_&&E.setTimeout(_),E.B&&(xa(E),fs(E)),i.g=I}else vb(i);0<r.l.length&&Ua(r)}else u[0]!="stop"&&u[0]!="close"||yr(r,7);else r.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?yr(r,7):Yf(r):u[0]!="noop"&&r.j&&r.j.wa(u),r.A=0)}}Wo(4)}catch{}}function hN(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if(Xl(e)){for(var t=[],r=e.length,i=0;i<r;i++)t.push(e[i]);return t}t=[],r=0;for(i in e)t[r++]=e[i];return t}function Hf(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Xl(e)||typeof e=="string")Nw(e,t,void 0);else{if(e.T&&typeof e.T=="function")var r=e.T();else if(e.R&&typeof e.R=="function")r=void 0;else if(Xl(e)||typeof e=="string"){r=[];for(var i=e.length,o=0;o<i;o++)r.push(o)}else for(o in r=[],i=0,e)r[i++]=o;i=hN(e),o=i.length;for(var u=0;u<o;u++)t.call(void 0,i[u],r&&r[u],e)}}function qi(e,t){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var i=0;i<r;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof qi)for(r=e.T(),i=0;i<r.length;i++)this.set(r[i],e.get(r[i]));else for(i in e)this.set(i,e[i])}V=qi.prototype;V.R=function(){zf(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};V.T=function(){return zf(this),this.g.concat()};function zf(e){if(e.i!=e.g.length){for(var t=0,r=0;t<e.g.length;){var i=e.g[t];Sr(e.h,i)&&(e.g[r++]=i),t++}e.g.length=r}if(e.i!=e.g.length){var o={};for(r=t=0;t<e.g.length;)i=e.g[t],Sr(o,i)||(e.g[r++]=i,o[i]=1),t++;e.g.length=r}}V.get=function(e,t){return Sr(this.h,e)?this.h[e]:t};V.set=function(e,t){Sr(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};V.forEach=function(e,t){for(var r=this.T(),i=0;i<r.length;i++){var o=r[i],u=this.get(o);e.call(t,u,o,this)}};function Sr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Jw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lN(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var i=e[r].indexOf("="),o=null;if(0<=i){var u=e[r].substring(0,i);o=e[r].substring(i+1)}else u=e[r];t(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}function Ar(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ar){this.g=t!==void 0?t:e.g,na(this,e.j),this.s=e.s,ra(this,e.i),ia(this,e.m),this.l=e.l,t=e.h;var r=new Qo;r.i=t.i,t.g&&(r.g=new qi(t.g),r.h=t.h),Jm(this,r),this.o=e.o}else e&&(r=String(e).match(Jw))?(this.g=!!t,na(this,r[1]||"",!0),this.s=jo(r[2]||""),ra(this,r[3]||"",!0),ia(this,r[4]),this.l=jo(r[5]||"",!0),Jm(this,r[6]||"",!0),this.o=jo(r[7]||"")):(this.g=!!t,this.h=new Qo(null,this.g))}Ar.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Fo(t,Zm,!0),":");var r=this.i;return(r||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Fo(t,Zm,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&e.push(":",String(r))),(r=this.l)&&(this.i&&r.charAt(0)!="/"&&e.push("/"),e.push(Fo(r,r.charAt(0)=="/"?gN:vN,!0))),(r=this.h.toString())&&e.push("?",r),(r=this.o)&&e.push("#",Fo(r,yN)),e.join("")};function wn(e){return new Ar(e)}function na(e,t,r){e.j=r?jo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ra(e,t,r){e.i=r?jo(t,!0):t}function ia(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Jm(e,t,r){t instanceof Qo?(e.h=t,wN(e.h,e.g)):(r||(t=Fo(t,mN)),e.h=new Qo(t,e.g))}function vt(e,t,r){e.h.set(t,r)}function La(e){return vt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function fN(e){return e instanceof Ar?wn(e):new Ar(e,void 0)}function dN(e,t,r,i){var o=new Ar(null,void 0);return e&&na(o,e),t&&ra(o,t),r&&ia(o,r),i&&(o.l=i),o}function jo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Fo(e,t,r){return typeof e=="string"?(e=encodeURI(e).replace(t,pN),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pN(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Zm=/[#\/\?@]/g,vN=/[#\?:]/g,gN=/[#\?]/g,mN=/[#\?@]/g,yN=/#/g;function Qo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Gn(e){e.g||(e.g=new qi,e.h=0,e.i&&lN(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}V=Qo.prototype;V.add=function(e,t){Gn(this),this.i=null,e=Bi(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this};function Zw(e,t){Gn(e),t=Bi(e,t),Sr(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,Sr(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&zf(e)))}function tb(e,t){return Gn(e),t=Bi(e,t),Sr(e.g.h,t)}V.forEach=function(e,t){Gn(this),this.g.forEach(function(r,i){Nw(r,function(o){e.call(t,o,i,this)},this)},this)};V.T=function(){Gn(this);for(var e=this.g.R(),t=this.g.T(),r=[],i=0;i<t.length;i++)for(var o=e[i],u=0;u<o.length;u++)r.push(t[i]);return r};V.R=function(e){Gn(this);var t=[];if(typeof e=="string")tb(this,e)&&(t=Km(t,this.g.get(Bi(this,e))));else{e=this.g.R();for(var r=0;r<e.length;r++)t=Km(t,e[r])}return t};V.set=function(e,t){return Gn(this),this.i=null,e=Bi(this,e),tb(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};V.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};function eb(e,t,r){Zw(e,t),0<r.length&&(e.i=null,e.g.set(Bi(e,t),Of(r)),e.h+=r.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),r=0;r<t.length;r++){var i=t[r],o=encodeURIComponent(String(i));i=this.R(i);for(var u=0;u<i.length;u++){var c=o;i[u]!==""&&(c+="="+encodeURIComponent(String(i[u]))),e.push(c)}}return this.i=e.join("&")};function Bi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function wN(e,t){t&&!e.j&&(Gn(e),e.i=null,e.g.forEach(function(r,i){var o=i.toLowerCase();i!=o&&(Zw(this,i),eb(this,o,r))},e)),e.j=t}var bN=function(){function e(t,r){this.h=t,this.g=r}return e}();function nb(e){this.l=e||IN,X.PerformanceNavigationTiming?(e=X.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(X.g&&X.g.Ea&&X.g.Ea()&&X.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var IN=10;function rb(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function ib(e){return e.h?1:e.g?e.g.size:0}function af(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function $f(e,t){e.g?e.g.add(t):e.h=t}function ob(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}nb.prototype.cancel=function(){var e,t;if(this.i=sb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var r=Sw(this.g.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.cancel()}}catch(u){e={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.g.clear()}};function sb(e){var t,r;if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){var i=e.i;try{for(var o=Sw(e.g.values()),u=o.next();!u.done;u=o.next()){var c=u.value;i=i.concat(c.D)}}catch(l){t={error:l}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}return Of(e.i)}function Wf(){}Wf.prototype.stringify=function(e){return X.JSON.stringify(e,void 0)};Wf.prototype.parse=function(e){return X.JSON.parse(e,void 0)};function EN(){this.g=new Wf}function TN(e,t,r){var i=r||"";try{Hf(e,function(o,u){var c=o;_a(o)&&(c=Uf(o)),t.push(i+u+"="+encodeURIComponent(c))})}catch(o){throw t.push(i+"type="+encodeURIComponent("_badmap")),o}}function _N(e,t){var r=new Da;if(X.Image){var i=new Image;i.onload=Mu(Uu,r,i,"TestLoadImage: loaded",!0,t),i.onerror=Mu(Uu,r,i,"TestLoadImage: error",!1,t),i.onabort=Mu(Uu,r,i,"TestLoadImage: abort",!1,t),i.ontimeout=Mu(Uu,r,i,"TestLoadImage: timeout",!1,t),X.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}function Uu(e,t,r,i,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(i)}catch{}}function ds(e){this.l=e.$b||null,this.j=e.ib||!1}$t(ds,Bf);ds.prototype.g=function(){return new Pa(this.l,this.j)};ds.prototype.i=function(e){return function(){return e}}({});function Pa(e,t){jt.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Qf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$t(Pa,jt);var Qf=0;V=Pa.prototype;V.open=function(e,t){if(this.readyState!=Qf)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Xo(this)};V.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||X).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=Qf};V.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Xo(this)),this.g&&(this.readyState=3,Xo(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof X.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ub(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};function ub(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}V.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ps(this):Xo(this),this.readyState==3&&ub(this)}};V.Ua=function(e){this.g&&(this.response=this.responseText=e,ps(this))};V.Ta=function(e){this.g&&(this.response=e,ps(this))};V.ha=function(){this.g&&ps(this)};function ps(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Xo(e)}V.setRequestHeader=function(e,t){this.v.append(e,t)};V.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),r=t.next();!r.done;)r=r.value,e.push(r[0]+": "+r[1]),r=t.next();return e.join(`\r
`)};function Xo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var SN=X.JSON.parse;function Rt(e){jt.call(this),this.headers=new qi,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ab,this.K=this.L=!1}$t(Rt,jt);var ab="",AN=/^https?$/i,NN=["POST","PUT"];V=Rt.prototype;V.ea=function(e,t,r,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rf.g(),this.C=this.u?Ym(this.u):Ym(rf),this.g.onreadystatechange=Gt(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){ty(this,u);return}e=r||"";var o=new qi(this.headers);i&&Hf(i,function(u,c){o.set(c,u)}),i=FA(o.T()),r=X.FormData&&e instanceof X.FormData,!(0<=Aw(NN,t))||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{lb(this),0<this.B&&((this.K=kN(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gt(this.pa,this)):this.A=qf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){ty(this,u)}};function kN(e){return Ei&&BA()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function DN(e){return e.toLowerCase()=="content-type"}V.pa=function(){typeof Rf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ht(this,"timeout"),this.abort(8))};function ty(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,cb(e),Ma(e)}function cb(e){e.D||(e.D=!0,Ht(e,"complete"),Ht(e,"error"))}V.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ht(this,"complete"),Ht(this,"abort"),Ma(this))};V.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ma(this,!0)),Rt.Z.M.call(this)};V.Fa=function(){this.s||(this.F||this.v||this.l?hb(this):this.cb())};V.cb=function(){hb(this)};function hb(e){if(e.h&&typeof Rf<"u"&&(!e.C[1]||pn(e)!=4||e.ba()!=2)){if(e.v&&pn(e)==4)qf(e.Fa,0,e);else if(Ht(e,"readystatechange"),pn(e)==4){e.h=!1;try{var t=e.ba();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}var i;if(!(i=r)){var o;if(o=t===0){var u=String(e.H).match(Jw)[1]||null;if(!u&&X.self&&X.self.location){var c=X.self.location.protocol;u=c.substr(0,c.length-1)}o=!AN.test(u?u.toLowerCase():"")}i=o}if(i)Ht(e,"complete"),Ht(e,"success");else{e.m=6;try{var l=2<pn(e)?e.g.statusText:""}catch{l=""}e.j=l+" ["+e.ba()+"]",cb(e)}}finally{Ma(e)}}}}function Ma(e,t){if(e.g){lb(e);var r=e.g,i=e.C[0]?Ju:null;e.g=null,e.C=null,t||Ht(e,"ready");try{r.onreadystatechange=i}catch{}}}function lb(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(X.clearTimeout(e.A),e.A=null)}function pn(e){return e.g?e.g.readyState:0}V.ba=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}};V.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),SN(t)}};function ey(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ab:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}V.Da=function(){return this.m};V.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function CN(e){var t="";return xf(e,function(r,i){t+=i,t+=":",t+=r,t+=`\r
`}),t}function Xf(e,t,r){t:{for(i in r){var i=!1;break t}i=!0}i||(r=CN(r),typeof e=="string"?r!=null&&encodeURIComponent(String(r)):vt(e,t,r))}function Po(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function fb(e){this.za=0,this.l=[],this.h=new Da,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Po("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Po("baseRetryDelayMs",5e3,e),this.$a=Po("retryDelaySeedMs",1e4,e),this.Ya=Po("forwardChannelMaxRetries",2,e),this.ra=Po("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new nb(e&&e.concurrentRequestLimit),this.Ca=new EN,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}V=fb.prototype;V.ma=8;V.G=1;function Yf(e){if(db(e),e.G==3){var t=e.V++,r=wn(e.F);vt(r,"SID",e.J),vt(r,"RID",t),vt(r,"TYPE","terminate"),vs(e,r),t=new ls(e,e.h,t,void 0),t.K=2,t.v=La(wn(r)),r=!1,X.navigator&&X.navigator.sendBeacon&&(r=X.navigator.sendBeacon(t.v.toString(),"")),!r&&X.Image&&(new Image().src=t.v,r=!0),r||(t.g=Ib(t.l,null),t.g.ea(t.v)),t.F=Date.now(),fs(t)}wb(e)}V.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};function Fa(e){e.g&&(Zf(e),e.g.cancel(),e.g=null)}function db(e){Fa(e),e.u&&(X.clearTimeout(e.u),e.u=null),oa(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&X.clearTimeout(e.m),e.m=null)}function Bl(e,t){e.l.push(new bN(e.Za++,t)),e.G==3&&Ua(e)}function Ua(e){rb(e.i)||e.m||(e.m=!0,Vf(e.Ha,e),e.C=0)}function RN(e,t){return ib(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=cs(Gt(e.Ha,e,t),yb(e,e.C)),e.C++,!0)}V.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ls(this,this.h,e,void 0),r=this.s;if(this.P&&(r?(r=kw(r),Dw(r,this.P)):r=this.P),this.o===null&&(t.H=r),this.ja)t:{for(var i=0,o=0;o<this.l.length;o++){e:{var u=this.l[o];if("__data__"in u.g&&(u=u.g.__data__,typeof u=="string")){u=u.length;break e}u=void 0}if(u===void 0)break;if(i+=u,4096<i){i=o;break t}if(i===4096||o===this.l.length-1){i=o+1;break t}}i=1e3}else i=1e3;i=pb(this,t,i),o=wn(this.F),vt(o,"RID",e),vt(o,"CVER",22),this.D&&vt(o,"X-HTTP-Session-Id",this.D),vs(this,o),this.o&&r&&Xf(o,this.o,r),$f(this.i,t),this.Ra&&vt(o,"TYPE","init"),this.ja?(vt(o,"$req",i),vt(o,"SID","null"),t.$=!0,sf(t,o,null)):sf(t,o,i),this.G=2}}else this.G==3&&(e?ny(this,e):this.l.length==0||rb(this.i)||ny(this))};function ny(e,t){var r;t?r=t.m:r=e.V++;var i=wn(e.F);vt(i,"SID",e.J),vt(i,"RID",r),vt(i,"AID",e.U),vs(e,i),e.o&&e.s&&Xf(i,e.o,e.s),r=new ls(e,e.h,r,e.C+1),e.o===null&&(r.H=e.s),t&&(e.l=t.D.concat(e.l)),t=pb(e,r,1e3),r.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),$f(e.i,r),sf(r,i,t)}function vs(e,t){e.j&&Hf({},function(r,i){vt(t,i,r)})}function pb(e,t,r){r=Math.min(e.l.length,r);var i=e.j?Gt(e.j.Oa,e.j,e):null;t:for(var o=e.l,u=-1;;){var c=["count="+r];u==-1?0<r?(u=o[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);for(var l=!0,f=0;f<r;f++){var p=o[f].h,g=o[f].g;if(p-=u,0>p)u=Math.max(0,o[f].h-100),l=!1;else try{TN(g,c,"req"+p+"_")}catch{i&&i(g)}}if(l){i=c.join("&");break t}}return e=e.l.splice(0,r),t.D=e,i}function vb(e){e.g||e.u||(e.Y=1,Vf(e.Ga,e),e.A=0)}function Jf(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=cs(Gt(e.Ga,e),yb(e,e.A)),e.A++,!0)}V.Ga=function(){if(this.u=null,gb(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=cs(Gt(this.bb,this),e)}};V.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,oe(10),Fa(this),gb(this))};function Zf(e){e.B!=null&&(X.clearTimeout(e.B),e.B=null)}function gb(e){e.g=new ls(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=wn(e.oa);vt(t,"RID","rpc"),vt(t,"SID",e.J),vt(t,"CI",e.N?"0":"1"),vt(t,"AID",e.U),vs(e,t),vt(t,"TYPE","xmlhttp"),e.o&&e.s&&Xf(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var r=e.g;e=e.la,r.K=1,r.v=La(wn(t)),r.s=null,r.U=!0,Ww(r,e)}V.ab=function(){this.v!=null&&(this.v=null,Fa(this),Jf(this),oe(19))};function oa(e){e.v!=null&&(X.clearTimeout(e.v),e.v=null)}function mb(e,t){var r=null;if(e.g==t){oa(e),Zf(e),e.g=null;var i=2}else if(af(e.i,t))r=t.D,ob(e.i,t),i=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(i==1){r=t.s?t.s.length:0,t=Date.now()-t.F;var o=e.C;i=Ca(),Ht(i,new Gw(i,r)),Ua(e)}else vb(e);else if(o=t.o,o==3||o==0&&0<e.I||!(i==1&&RN(e,t)||i==2&&Jf(e)))switch(r&&0<r.length&&(t=e.i,t.i=t.i.concat(r)),o){case 1:yr(e,5);break;case 4:yr(e,10);break;case 3:yr(e,6);break;default:yr(e,2)}}}function yb(e,t){var r=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(r*=2),r*t}function yr(e,t){if(e.h.info("Error code "+t),t==2){var r=null;e.j&&(r=null);var i=Gt(e.jb,e);r||(r=new Ar("//www.google.com/images/cleardot.gif"),X.location&&X.location.protocol=="http"||na(r,"https"),La(r)),_N(r.toString(),i)}else oe(2);e.G=0,e.j&&e.j.va(t),wb(e),db(e)}V.jb=function(e){e?(this.h.info("Successfully pinged google.com"),oe(2)):(this.h.info("Failed to ping google.com"),oe(1))};function wb(e){e.G=0,e.I=-1,e.j&&((sb(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,Of(e.l),e.l.length=0),e.j.ua())}function bb(e,t,r){var i=fN(r);if(i.i!="")t&&ra(i,t+"."+i.i),ia(i,i.m);else{var o=X.location;i=dN(o.protocol,t?t+"."+o.hostname:o.hostname,+o.port,r)}return e.aa&&xf(e.aa,function(u,c){vt(i,c,u)}),t=e.D,r=e.sa,t&&r&&vt(i,t,r),vt(i,"VER",e.ma),vs(e,i),i}function Ib(e,t,r){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=r&&e.Ba&&!e.qa?new Rt(new ds({ib:!0})):new Rt(e.qa),t.L=e.H,t}function Eb(){}V=Eb.prototype;V.xa=function(){};V.wa=function(){};V.va=function(){};V.ua=function(){};V.Oa=function(){};function sa(){if(Ei&&!(10<=Number(KA)))throw Error("Environmental error: no available transport.")}sa.prototype.g=function(e,t){return new Ae(e,t)};function Ae(e,t){jt.call(this),this.g=new fb(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Zu(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Zu(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Ki(this)}$t(Ae,jt);Ae.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,r=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Vf(Gt(e.hb,e,t))),oe(0),e.W=t,e.aa=r||{},e.N=e.X,e.F=bb(e,null,e.W),Ua(e)};Ae.prototype.close=function(){Yf(this.g)};Ae.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,Bl(this.g,t)}else this.v?(t={},t.__data__=Uf(e),Bl(this.g,t)):Bl(this.g,e)};Ae.prototype.M=function(){this.g.j=null,delete this.j,Yf(this.g),delete this.g,Ae.Z.M.call(this)};function Tb(e){Kf.call(this);var t=e.__sm__;if(t){t:{for(var r in t){e=r;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}$t(Tb,Kf);function _b(){Gf.call(this),this.status=1}$t(_b,Gf);function Ki(e){this.g=e}$t(Ki,Eb);Ki.prototype.xa=function(){Ht(this.g,"a")};Ki.prototype.wa=function(e){Ht(this.g,new Tb(e))};Ki.prototype.va=function(e){Ht(this.g,new _b)};Ki.prototype.ua=function(){Ht(this.g,"b")};sa.prototype.createWebChannel=sa.prototype.g;Ae.prototype.send=Ae.prototype.u;Ae.prototype.open=Ae.prototype.m;Ae.prototype.close=Ae.prototype.close;Ra.NO_ERROR=0;Ra.TIMEOUT=8;Ra.HTTP_ERROR=6;Hw.COMPLETE="complete";zw.EventType=hs;hs.OPEN="a";hs.CLOSE="b";hs.ERROR="c";hs.MESSAGE="d";jt.prototype.listen=jt.prototype.N;Rt.prototype.listenOnce=Rt.prototype.O;Rt.prototype.getLastError=Rt.prototype.La;Rt.prototype.getLastErrorCode=Rt.prototype.Da;Rt.prototype.getStatus=Rt.prototype.ba;Rt.prototype.getResponseJson=Rt.prototype.Qa;Rt.prototype.getResponseText=Rt.prototype.ga;Rt.prototype.send=Rt.prototype.ea;var ON=function(){return new sa},xN=function(){return Ca()},Kl=Ra,LN=Hw,PN=Rr,ry={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},MN=ds,Vu=zw,FN=Rt,UN={};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e=function(){function e(t,r){var i=this;this.previousValue=t,r&&(r.sequenceNumberHandler=function(o){return i.t(o)},this.i=function(o){return r.writeSequenceNumber(o)})}return e.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},e}();_e.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=function(e){function t(r,i){var o=this;return(o=e.call(this,i)||this).code=r,o.message=i,o.name="FirebaseError",o.toString=function(){return o.name+": [code="+o.code+"]: "+o.message},o}return z(t,e),t}(Error),Ge=new Iw("@firebase/firestore");function cf(){return Ge.logLevel}function P(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Ge.logLevel<=ot.DEBUG){var i=t.map(td);Ge.debug.apply(Ge,It(["Firestore (8.10.1): "+e],i))}}function Dt(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Ge.logLevel<=ot.ERROR){var i=t.map(td);Ge.error.apply(Ge,It(["Firestore (8.10.1): "+e],i))}}function Yo(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Ge.logLevel<=ot.WARN){var i=t.map(td);Ge.warn.apply(Ge,It(["Firestore (8.10.1): "+e],i))}}function td(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw Dt(t),new Error(t)}function $(e,t){e||B()}function M(e,t){return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(var i=0;i<e;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sb=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length,i="";i.length<20;)for(var o=VN(40),u=0;u<o.length;++u)i.length<20&&o[u]<r&&(i+=t.charAt(o[u]%t.length));return i},e}();function et(e,t){return e<t?-1:e>t?1:0}function Ti(e,t,r){return e.length===t.length&&e.every(function(i,o){return r(i,t[o])})}function Ab(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe=function(){function e(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new O(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new O(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new O(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new O(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var r=Math.floor(t/1e3);return new e(r,Math.floor(1e6*(t-1e3*r)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(t){return this.seconds===t.seconds?et(this.nanoseconds,t.nanoseconds):et(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),J=function(){function e(t){this.timestamp=t}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new pe(0,0))},e.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(e){var t=0;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Or(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function Nb(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kb=function(){function e(t,r,i){r===void 0?r=0:r>t.length&&B(),i===void 0?i=t.length-r:i>t.length-r&&B(),this.segments=t,this.offset=r,this.len=i}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.comparator(this,t)===0},e.prototype.child=function(t){var r=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(i){r.push(i)}):r.push(t),this.construct(r)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.isEmpty=function(){return this.length===0},e.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0},e.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0},e.prototype.forEach=function(t){for(var r=this.offset,i=this.limit();r<i;r++)t(this.segments[r])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(t,r){for(var i=Math.min(t.length,r.length),o=0;o<i;o++){var u=t.get(o),c=r.get(o);if(u<c)return-1;if(u>c)return 1}return t.length<r.length?-1:t.length>r.length?1:0},e}(),ut=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return z(t,e),t.prototype.construct=function(r,i,o){return new t(r,i,o)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var o=[],u=0,c=r;u<c.length;u++){var l=c[u];if(l.indexOf("//")>=0)throw new O(S.INVALID_ARGUMENT,"Invalid segment ("+l+"). Paths must not contain // in them.");o.push.apply(o,l.split("/").filter(function(f){return f.length>0}))}return new t(o)},t.emptyPath=function(){return new t([])},t}(kb),jN=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ze=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return z(t,e),t.prototype.construct=function(r,i,o){return new t(r,i,o)},t.isValidIdentifier=function(r){return jN.test(r)},t.prototype.canonicalString=function(){return this.toArray().map(function(r){return r=r.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(r)||(r="`"+r+"`"),r}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(r){for(var i=[],o="",u=0,c=function(){if(o.length===0)throw new O(S.INVALID_ARGUMENT,"Invalid field path ("+r+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");i.push(o),o=""},l=!1;u<r.length;){var f=r[u];if(f==="\\"){if(u+1===r.length)throw new O(S.INVALID_ARGUMENT,"Path has trailing escape character: "+r);var p=r[u+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new O(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+r);o+=p,u+=2}else f==="`"?(l=!l,u++):f!=="."||l?(o+=f,u++):(c(),u++)}if(c(),l)throw new O(S.INVALID_ARGUMENT,"Unterminated ` in path: "+r);return new t(i)},t.emptyPath=function(){return new t([])},t}(kb),_i=function(){function e(t){this.fields=t,t.sort(ze.comparator)}return e.prototype.covers=function(t){for(var r=0,i=this.fields;r<i.length;r++)if(i[r].isPrefixOf(t))return!0;return!1},e.prototype.isEqual=function(t){return Ti(this.fields,t.fields,function(r,i){return r.isEqual(i)})},e}(),ue=function(){function e(t){this.binaryString=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(r){for(var i="",o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(t))},e.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(t){return et(this.binaryString,t.binaryString)},e.prototype.isEqual=function(t){return this.binaryString===t.binaryString},e}();ue.EMPTY_BYTE_STRING=new ue("");var qN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qn(e){if($(!!e),typeof e=="string"){var t=0,r=qN.exec(e);if($(!!r),r[1]){var i=r[1];i=(i+"000000000").substr(0,9),t=Number(i)}var o=new Date(e);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:kt(e.seconds),nanos:kt(e.nanos)}}function kt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Si(e){return typeof e=="string"?ue.fromBase64String(e):ue.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(e){var t,r;return((r=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Db(e){var t=e.mapValue.fields.__previous_value__;return ed(t)?Db(t):t}function Jo(e){var t=qn(e.mapValue.fields.__local_write_time__.timestampValue);return new pe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(e){return e==null}function ua(e){return e===0&&1/e==-1/0}function Cb(e){return typeof e=="number"&&Number.isInteger(e)&&!ua(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K=function(){function e(t){this.path=t}return e.fromPath=function(t){return new e(ut.fromString(t))},e.fromName=function(t){return new e(ut.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&ut.comparator(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,r){return ut.comparator(t.path,r.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new ut(t.slice()))},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ed(e)?4:10:B()}function sn(e,t){var r=Nr(e);if(r!==Nr(t))return!1;switch(r){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Jo(e).isEqual(Jo(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;var u=qn(i.timestampValue),c=qn(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,o){return Si(i.bytesValue).isEqual(Si(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,o){return kt(i.geoPointValue.latitude)===kt(o.geoPointValue.latitude)&&kt(i.geoPointValue.longitude)===kt(o.geoPointValue.longitude)}(e,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return kt(i.integerValue)===kt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){var u=kt(i.doubleValue),c=kt(o.doubleValue);return u===c?ua(u)===ua(c):isNaN(u)&&isNaN(c)}return!1}(e,t);case 9:return Ti(e.arrayValue.values||[],t.arrayValue.values||[],sn);case 10:return function(i,o){var u=i.mapValue.fields||{},c=o.mapValue.fields||{};if(iy(u)!==iy(c))return!1;for(var l in u)if(u.hasOwnProperty(l)&&(c[l]===void 0||!sn(u[l],c[l])))return!1;return!0}(e,t);default:return B()}}function Zo(e,t){return(e.values||[]).find(function(r){return sn(r,t)})!==void 0}function Ai(e,t){var r=Nr(e),i=Nr(t);if(r!==i)return et(r,i);switch(r){case 0:return 0;case 1:return et(e.booleanValue,t.booleanValue);case 2:return function(o,u){var c=kt(o.integerValue||o.doubleValue),l=kt(u.integerValue||u.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(e,t);case 3:return oy(e.timestampValue,t.timestampValue);case 4:return oy(Jo(e),Jo(t));case 5:return et(e.stringValue,t.stringValue);case 6:return function(o,u){var c=Si(o),l=Si(u);return c.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(o,u){for(var c=o.split("/"),l=u.split("/"),f=0;f<c.length&&f<l.length;f++){var p=et(c[f],l[f]);if(p!==0)return p}return et(c.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,u){var c=et(kt(o.latitude),kt(u.latitude));return c!==0?c:et(kt(o.longitude),kt(u.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(o,u){for(var c=o.values||[],l=u.values||[],f=0;f<c.length&&f<l.length;++f){var p=Ai(c[f],l[f]);if(p)return p}return et(c.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(o,u){var c=o.fields||{},l=Object.keys(c),f=u.fields||{},p=Object.keys(f);l.sort(),p.sort();for(var g=0;g<l.length&&g<p.length;++g){var y=et(l[g],p[g]);if(y!==0)return y;var w=Ai(c[l[g]],f[p[g]]);if(w!==0)return w}return et(l.length,p.length)}(e.mapValue,t.mapValue);default:throw B()}}function oy(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return et(e,t);var r=qn(e),i=qn(t),o=et(r.seconds,i.seconds);return o!==0?o:et(r.nanos,i.nanos)}function nd(e){return hf(e)}function hf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(i){var o=qn(i);return"time("+o.seconds+","+o.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Si(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,K.fromName(r).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(i){for(var o="[",u=!0,c=0,l=i.values||[];c<l.length;c++)u?u=!1:o+=",",o+=hf(l[c]);return o+"]"}(e.arrayValue):"mapValue"in e?function(i){for(var o="{",u=!0,c=0,l=Object.keys(i.fields||{}).sort();c<l.length;c++){var f=l[c];u?u=!1:o+=",",o+=f+":"+hf(i.fields[f])}return o+"}"}(e.mapValue):B();var t,r}function aa(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function lf(e){return!!e&&"integerValue"in e}function rd(e){return!!e&&"arrayValue"in e}function sy(e){return!!e&&"nullValue"in e}function uy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hu(e){return!!e&&"mapValue"in e}function qo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Or(e.mapValue.fields,function(o,u){return t.mapValue.fields[o]=qo(u)}),t}if(e.arrayValue){for(var r={arrayValue:{values:[]}},i=0;i<(e.arrayValue.values||[]).length;++i)r.arrayValue.values[i]=qo(e.arrayValue.values[i]);return r}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te=function(){function e(t){this.value=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.isEmpty())return this.value;for(var r=this.value,i=0;i<t.length-1;++i)if(!Hu(r=(r.mapValue.fields||{})[t.get(i)]))return null;return(r=(r.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.set=function(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=qo(r)},e.prototype.setAll=function(t){var r=this,i=ze.emptyPath(),o={},u=[];t.forEach(function(l,f){if(!i.isImmediateParentOf(f)){var p=r.getFieldsMap(i);r.applyChanges(p,o,u),o={},u=[],i=f.popLast()}l?o[f.lastSegment()]=qo(l):u.push(f.lastSegment())});var c=this.getFieldsMap(i);this.applyChanges(c,o,u)},e.prototype.delete=function(t){var r=this.field(t.popLast());Hu(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]},e.prototype.isEqual=function(t){return sn(this.value,t.value)},e.prototype.getFieldsMap=function(t){var r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(var i=0;i<t.length;++i){var o=r.mapValue.fields[t.get(i)];Hu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},r.mapValue.fields[t.get(i)]=o),r=o}return r.mapValue.fields},e.prototype.applyChanges=function(t,r,i){Or(r,function(l,f){return t[l]=f});for(var o=0,u=i;o<u.length;o++){var c=u[o];delete t[c]}},e.prototype.clone=function(){return new e(qo(this.value))},e}();function Rb(e){var t=[];return Or(e.fields,function(r,i){var o=new ze([r]);if(Hu(i)){var u=Rb(i.mapValue).fields;if(u.length===0)t.push(o);else for(var c=0,l=u;c<l.length;c++){var f=l[c];t.push(o.child(f))}}else t.push(o)}),new _i(t)}var zt=function(){function e(t,r,i,o,u){this.key=t,this.documentType=r,this.version=i,this.data=o,this.documentState=u}return e.newInvalidDocument=function(t){return new e(t,0,J.min(),Te.empty(),0)},e.newFoundDocument=function(t,r,i){return new e(t,1,r,i,0)},e.newNoDocument=function(t,r){return new e(t,2,r,Te.empty(),0)},e.newUnknownDocument=function(t,r){return new e(t,3,r,Te.empty(),2)},e.prototype.convertToFoundDocument=function(t,r){return this.version=t,this.documentType=1,this.data=r,this.documentState=0,this},e.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Te.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Te.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return this.documentType!==0},e.prototype.isFoundDocument=function(){return this.documentType===1},e.prototype.isNoDocument=function(){return this.documentType===2},e.prototype.isUnknownDocument=function(){return this.documentType===3},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),BN=function(e,t,r,i,o,u,c){t===void 0&&(t=null),r===void 0&&(r=[]),i===void 0&&(i=[]),o===void 0&&(o=null),u===void 0&&(u=null),c===void 0&&(c=null),this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=c,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(e,t,r,i,o,u,c){return t===void 0&&(t=null),r===void 0&&(r=[]),i===void 0&&(i=[]),o===void 0&&(o=null),u===void 0&&(u=null),c===void 0&&(c=null),new BN(e,t,r,i,o,u,c)}function gs(e){var t=M(e);if(t.h===null){var r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(function(i){return function(o){return o.field.canonicalString()+o.op.toString()+nd(o.value)}(i)}).join(","),r+="|ob:",r+=t.orderBy.map(function(i){return function(o){return o.field.canonicalString()+o.dir}(i)}).join(","),xr(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=ha(t.startAt)),t.endAt&&(r+="|ub:",r+=ha(t.endAt)),t.h=r}return t.h}function Va(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var r=0;r<e.orderBy.length;r++)if(!XN(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var i=0;i<e.filters.length;i++)if(o=e.filters[i],u=t.filters[i],o.op!==u.op||!o.field.isEqual(u.field)||!sn(o.value,u.value))return!1;var o,u;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hy(e.startAt,t.startAt)&&hy(e.endAt,t.endAt)}function ca(e){return K.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var Se=function(e){function t(r,i,o){var u=this;return(u=e.call(this)||this).field=r,u.op=i,u.value=o,u}return z(t,e),t.create=function(r,i,o){return r.isKeyField()?i==="in"||i==="not-in"?this.l(r,i,o):new KN(r,i,o):i==="array-contains"?new zN(r,o):i==="in"?new $N(r,o):i==="not-in"?new WN(r,o):i==="array-contains-any"?new QN(r,o):new t(r,i,o)},t.l=function(r,i,o){return i==="in"?new GN(r,o):new HN(r,o)},t.prototype.matches=function(r){var i=r.data.field(this.field);return this.op==="!="?i!==null&&this.m(Ai(i,this.value)):i!==null&&Nr(this.value)===Nr(i)&&this.m(Ai(i,this.value))},t.prototype.m=function(r){switch(this.op){case"<":return r<0;case"<=":return r<=0;case"==":return r===0;case"!=":return r!==0;case">":return r>0;case">=":return r>=0;default:return B()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),KN=function(e){function t(r,i,o){var u=this;return(u=e.call(this,r,i,o)||this).key=K.fromName(o.referenceValue),u}return z(t,e),t.prototype.matches=function(r){var i=K.comparator(r.key,this.key);return this.m(i)},t}(Se),GN=function(e){function t(r,i){var o=this;return(o=e.call(this,r,"in",i)||this).keys=Ob("in",i),o}return z(t,e),t.prototype.matches=function(r){return this.keys.some(function(i){return i.isEqual(r.key)})},t}(Se),HN=function(e){function t(r,i){var o=this;return(o=e.call(this,r,"not-in",i)||this).keys=Ob("not-in",i),o}return z(t,e),t.prototype.matches=function(r){return!this.keys.some(function(i){return i.isEqual(r.key)})},t}(Se);function Ob(e,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(function(i){return K.fromName(i.referenceValue)})}var zN=function(e){function t(r,i){return e.call(this,r,"array-contains",i)||this}return z(t,e),t.prototype.matches=function(r){var i=r.data.field(this.field);return rd(i)&&Zo(i.arrayValue,this.value)},t}(Se),$N=function(e){function t(r,i){return e.call(this,r,"in",i)||this}return z(t,e),t.prototype.matches=function(r){var i=r.data.field(this.field);return i!==null&&Zo(this.value.arrayValue,i)},t}(Se),WN=function(e){function t(r,i){return e.call(this,r,"not-in",i)||this}return z(t,e),t.prototype.matches=function(r){if(Zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var i=r.data.field(this.field);return i!==null&&!Zo(this.value.arrayValue,i)},t}(Se),QN=function(e){function t(r,i){return e.call(this,r,"array-contains-any",i)||this}return z(t,e),t.prototype.matches=function(r){var i=this,o=r.data.field(this.field);return!(!rd(o)||!o.arrayValue.values)&&o.arrayValue.values.some(function(u){return Zo(i.value.arrayValue,u)})},t}(Se),ts=function(e,t){this.position=e,this.before=t};function ha(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return nd(t)}).join(",")}var bi=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};function XN(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function cy(e,t,r){for(var i=0,o=0;o<e.position.length;o++){var u=t[o],c=e.position[o];if(i=u.field.isKeyField()?K.comparator(K.fromName(c.referenceValue),r.key):Ai(c,r.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return e.before?i<=0:i<0}function hy(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var r=0;r<e.position.length;r++)if(!sn(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn=function(e,t,r,i,o,u,c,l){t===void 0&&(t=null),r===void 0&&(r=[]),i===void 0&&(i=[]),o===void 0&&(o=null),u===void 0&&(u="F"),c===void 0&&(c=null),l===void 0&&(l=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=c,this.endAt=l,this.p=null,this.T=null,this.startAt,this.endAt};function xb(e,t,r,i,o,u,c,l){return new bn(e,t,r,i,o,u,c,l)}function Gi(e){return new bn(e)}function zu(e){return!xr(e.limit)&&e.limitType==="F"}function la(e){return!xr(e.limit)&&e.limitType==="L"}function id(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function od(e){for(var t=0,r=e.filters;t<r.length;t++){var i=r[t];if(i.g())return i.field}return null}function sd(e){return e.collectionGroup!==null}function Ni(e){var t=M(e);if(t.p===null){t.p=[];var r=od(t),i=id(t);if(r!==null&&i===null)r.isKeyField()||t.p.push(new bi(r)),t.p.push(new bi(ze.keyField(),"asc"));else{for(var o=!1,u=0,c=t.explicitOrderBy;u<c.length;u++){var l=c[u];t.p.push(l),l.field.isKeyField()&&(o=!0)}if(!o){var f=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new bi(ze.keyField(),f))}}}return t.p}function xe(e){var t=M(e);if(!t.T)if(t.limitType==="F")t.T=ay(t.path,t.collectionGroup,Ni(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var r=[],i=0,o=Ni(t);i<o.length;i++){var u=o[i],c=u.dir==="desc"?"asc":"desc";r.push(new bi(u.field,c))}var l=t.endAt?new ts(t.endAt.position,!t.endAt.before):null,f=t.startAt?new ts(t.startAt.position,!t.startAt.before):null;t.T=ay(t.path,t.collectionGroup,r,t.filters,t.limit,l,f)}return t.T}function Lb(e,t,r){return new bn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function ms(e,t){return Va(xe(e),xe(t))&&e.limitType===t.limitType}function Pb(e){return gs(xe(e))+"|lt:"+e.limitType}function ff(e){return"Query(target="+function(t){var r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=", filters: ["+t.filters.map(function(i){return(o=i).field.canonicalString()+" "+o.op+" "+nd(o.value);var o}).join(", ")+"]"),xr(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=", orderBy: ["+t.orderBy.map(function(i){return function(o){return o.field.canonicalString()+" ("+o.dir+")"}(i)}).join(", ")+"]"),t.startAt&&(r+=", startAt: "+ha(t.startAt)),t.endAt&&(r+=", endAt: "+ha(t.endAt)),"Target("+r+")"}(xe(e))+"; limitType="+e.limitType+")"}function ys(e,t){return t.isFoundDocument()&&function(r,i){var o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):K.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(e,t)&&function(r,i){for(var o=0,u=r.explicitOrderBy;o<u.length;o++){var c=u[o];if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1}return!0}(e,t)&&function(r,i){for(var o=0,u=r.filters;o<u.length;o++)if(!u[o].matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!cy(r.startAt,Ni(r),i))&&(!r.endAt||!cy(r.endAt,Ni(r),i))}(e,t)}function Mb(e){return function(t,r){for(var i=!1,o=0,u=Ni(e);o<u.length;o++){var c=u[o],l=YN(c,t,r);if(l!==0)return l;i=i||c.field.isKeyField()}return 0}}function YN(e,t,r){var i=e.field.isKeyField()?K.comparator(t.key,r.key):function(o,u,c){var l=u.data.field(o),f=c.data.field(o);return l!==null&&f!==null?Ai(l,f):B()}(e.field,t,r);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return B()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ua(t)?"-0":t}}function Ub(e){return{integerValue:""+e}}function Vb(e,t){return Cb(t)?Ub(t):Fb(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ja=function(){this._=void 0};function JN(e,t,r){return e instanceof ki?function(i,o){var u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(r,t):e instanceof kr?qb(e,t):e instanceof Dr?Bb(e,t):function(i,o){var u=jb(i,o),c=ly(u)+ly(i.A);return lf(u)&&lf(i.A)?Ub(c):Fb(i.R,c)}(e,t)}function ZN(e,t,r){return e instanceof kr?qb(e,t):e instanceof Dr?Bb(e,t):r}function jb(e,t){return e instanceof Di?lf(r=t)||function(i){return!!i&&"doubleValue"in i}(r)?t:{integerValue:0}:null;var r}var ki=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return z(t,e),t}(ja),kr=function(e){function t(r){var i=this;return(i=e.call(this)||this).elements=r,i}return z(t,e),t}(ja);function qb(e,t){for(var r=Kb(t),i=function(c){r.some(function(l){return sn(l,c)})||r.push(c)},o=0,u=e.elements;o<u.length;o++)i(u[o]);return{arrayValue:{values:r}}}var Dr=function(e){function t(r){var i=this;return(i=e.call(this)||this).elements=r,i}return z(t,e),t}(ja);function Bb(e,t){for(var r=Kb(t),i=function(c){r=r.filter(function(l){return!sn(l,c)})},o=0,u=e.elements;o<u.length;o++)i(u[o]);return{arrayValue:{values:r}}}var Di=function(e){function t(r,i){var o=this;return(o=e.call(this)||this).R=r,o.A=i,o}return z(t,e),t}(ja);function ly(e){return kt(e.integerValue||e.doubleValue)}function Kb(e){return rd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ws=function(e,t){this.field=e,this.transform=t},tk=function(e,t){this.version=e,this.transformResults=t},Xt=function(){function e(t,r){this.updateTime=t,this.exists=r}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function $u(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var qa=function(){};function ek(e,t,r){e instanceof bs?function(i,o,u){var c=i.value.clone(),l=py(i.fieldTransforms,o,u.transformResults);c.setAll(l),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(e,t,r):e instanceof Hn?function(i,o,u){if($u(i.precondition,o)){var c=py(i.fieldTransforms,o,u.transformResults),l=o.data;l.setAll(Gb(i)),l.setAll(c),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}else o.convertToUnknownDocument(u.version)}(e,t,r):function(i,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,t,r)}function df(e,t,r){e instanceof bs?function(i,o,u){if($u(i.precondition,o)){var c=i.value.clone(),l=vy(i.fieldTransforms,u,o);c.setAll(l),o.convertToFoundDocument(dy(o),c).setHasLocalMutations()}}(e,t,r):e instanceof Hn?function(i,o,u){if($u(i.precondition,o)){var c=vy(i.fieldTransforms,u,o),l=o.data;l.setAll(Gb(i)),l.setAll(c),o.convertToFoundDocument(dy(o),l).setHasLocalMutations()}}(e,t,r):function(i,o){$u(i.precondition,o)&&o.convertToNoDocument(J.min())}(e,t)}function nk(e,t){for(var r=null,i=0,o=e.fieldTransforms;i<o.length;i++){var u=o[i],c=t.data.field(u.field),l=jb(u.transform,c||null);l!=null&&(r==null&&(r=Te.empty()),r.set(u.field,l))}return r||null}function fy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ti(r,i,function(o,u){return function(c,l){return c.field.isEqual(l.field)&&function(f,p){return f instanceof kr&&p instanceof kr||f instanceof Dr&&p instanceof Dr?Ti(f.elements,p.elements,sn):f instanceof Di&&p instanceof Di?sn(f.A,p.A):f instanceof ki&&p instanceof ki}(c.transform,l.transform)}(o,u)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function dy(e){return e.isFoundDocument()?e.version:J.min()}var bs=function(e){function t(r,i,o,u){u===void 0&&(u=[]);var c=this;return(c=e.call(this)||this).key=r,c.value=i,c.precondition=o,c.fieldTransforms=u,c.type=0,c}return z(t,e),t}(qa),Hn=function(e){function t(r,i,o,u,c){c===void 0&&(c=[]);var l=this;return(l=e.call(this)||this).key=r,l.data=i,l.fieldMask=o,l.precondition=u,l.fieldTransforms=c,l.type=1,l}return z(t,e),t}(qa);function Gb(e){var t=new Map;return e.fieldMask.fields.forEach(function(r){if(!r.isEmpty()){var i=e.data.field(r);t.set(r,i)}}),t}function py(e,t,r){var i=new Map;$(e.length===r.length);for(var o=0;o<r.length;o++){var u=e[o],c=u.transform,l=t.data.field(u.field);i.set(u.field,ZN(c,l,r[o]))}return i}function vy(e,t,r){for(var i=new Map,o=0,u=e;o<u.length;o++){var c=u[o],l=c.transform,f=r.data.field(c.field);i.set(c.field,JN(l,f,t))}return i}var Nt,nt,Is=function(e){function t(r,i){var o=this;return(o=e.call(this)||this).key=r,o.precondition=i,o.type=2,o.fieldTransforms=[],o}return z(t,e),t}(qa),ud=function(e){function t(r,i){var o=this;return(o=e.call(this)||this).key=r,o.precondition=i,o.type=3,o.fieldTransforms=[],o}return z(t,e),t}(qa),rk=function(e){this.count=e};function Hb(e){switch(e){case S.OK:return B();case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return B()}}function zb(e){if(e===void 0)return Dt("GRPC error has no .code"),S.UNKNOWN;switch(e){case Nt.OK:return S.OK;case Nt.CANCELLED:return S.CANCELLED;case Nt.UNKNOWN:return S.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return S.INTERNAL;case Nt.UNAVAILABLE:return S.UNAVAILABLE;case Nt.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Nt.NOT_FOUND:return S.NOT_FOUND;case Nt.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Nt.ABORTED:return S.ABORTED;case Nt.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Nt.DATA_LOSS:return S.DATA_LOSS;default:return B()}}(nt=Nt||(Nt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt=function(){function e(t,r){this.comparator=t,this.root=r||Pn.EMPTY}return e.prototype.insert=function(t,r){return new e(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Pn.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pn.BLACK,null,null))},e.prototype.get=function(t){for(var r=this.root;!r.isEmpty();){var i=this.comparator(t,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null},e.prototype.indexOf=function(t){for(var r=0,i=this.root;!i.isEmpty();){var o=this.comparator(t,i.key);if(o===0)return r+i.left.size;o<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(r,i){return t(r,i),!1})},e.prototype.toString=function(){var t=[];return this.inorderTraversal(function(r,i){return t.push(r+":"+i),!1}),"{"+t.join(", ")+"}"},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(){return new ju(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(t){return new ju(this.root,t,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new ju(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(t){return new ju(this.root,t,this.comparator,!0)},e}(),ju=function(){function e(t,r,i,o){this.isReverse=o,this.nodeStack=[];for(var u=1;!t.isEmpty();)if(u=r?i(t.key,r):1,o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){var t=this.nodeStack.pop(),r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(this.nodeStack.length===0)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},e}(),Pn=function(){function e(t,r,i,o,u){this.key=t,this.value=r,this.color=i??e.RED,this.left=o??e.EMPTY,this.right=u??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,r,i,o,u){return new e(t??this.key,r??this.value,i??this.color,o??this.left,u??this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,r,i){var o=this,u=i(t,o.key);return(o=u<0?o.copy(null,null,null,o.left.insert(t,r,i),null):u===0?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,r){var i,o=this;if(r(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),r(t,o.key)===0){if(o.right.isEmpty())return e.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();var t=this.left.check();if(t!==this.right.check())throw B();return t+(this.isRed()?0:1)},e}();Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1,Pn.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw B()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw B()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw B()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw B()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw B()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,r,i,o,u){return this},e.prototype.insert=function(t,r,i){return new Pn(t,r)},e.prototype.remove=function(t,r){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt=function(){function e(t){this.comparator=t,this.data=new Zt(this.comparator)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.inorderTraversal(function(r,i){return t(r),!1})},e.prototype.forEachInRange=function(t,r){for(var i=this.data.getIteratorFrom(t[0]);i.hasNext();){var o=i.getNext();if(this.comparator(o.key,t[1])>=0)return;r(o.key)}},e.prototype.forEachWhile=function(t,r){var i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return},e.prototype.firstAfterOrEqual=function(t){var r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null},e.prototype.getIterator=function(){return new gy(this.data.getIterator())},e.prototype.getIteratorFrom=function(t){return new gy(this.data.getIteratorFrom(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(t){var r=this;return r.size<t.size&&(r=t,t=this),t.forEach(function(i){r=r.add(i)}),r},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var r=this.data.getIterator(),i=t.data.getIterator();r.hasNext();){var o=r.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0},e.prototype.toArray=function(){var t=[];return this.forEach(function(r){t.push(r)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(r){return t.push(r)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var r=new e(this.comparator);return r.data=t,r},e}(),gy=function(){function e(t){this.iter=t}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),ik=new Zt(K.comparator);function Oe(){return ik}var ok=new Zt(K.comparator);function pf(){return ok}var sk=new Zt(K.comparator);function $b(){return sk}var uk=new Pt(K.comparator);function ct(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=uk,i=0,o=e;i<o.length;i++){var u=o[i];r=r.add(u)}return r}var ak=new Pt(et);function Ba(){return ak}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ad=function(){function e(t,r,i,o,u){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}return e.createSynthesizedRemoteEventForCurrentChange=function(t,r){var i=new Map;return i.set(t,cd.createSynthesizedTargetChangeForCurrentChange(t,r)),new e(J.min(),i,Ba(),Oe(),ct())},e}(),cd=function(){function e(t,r,i,o,u){this.resumeToken=t,this.current=r,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}return e.createSynthesizedTargetChangeForCurrentChange=function(t,r){return new e(ue.EMPTY_BYTE_STRING,r,ct(),ct(),ct())},e}(),Wu=function(e,t,r,i){this.v=e,this.removedTargetIds=t,this.key=r,this.P=i},Wb=function(e,t){this.targetId=e,this.V=t},Qb=function(e,t,r,i){r===void 0&&(r=ue.EMPTY_BYTE_STRING),i===void 0&&(i=null),this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i},my=function(){function e(){this.S=0,this.D=wy(),this.C=ue.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},e.prototype.M=function(){var t=ct(),r=ct(),i=ct();return this.D.forEach(function(o,u){switch(u){case 0:t=t.add(o);break;case 2:r=r.add(o);break;case 1:i=i.add(o);break;default:B()}}),new cd(this.C,this.N,t,r,i)},e.prototype.L=function(){this.k=!1,this.D=wy()},e.prototype.B=function(t,r){this.k=!0,this.D=this.D.insert(t,r)},e.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),ck=function(){function e(t){this.W=t,this.G=new Map,this.H=Oe(),this.J=yy(),this.Y=new Pt(et)}return e.prototype.X=function(t){for(var r=0,i=t.v;r<i.length;r++){var o=i[r];t.P&&t.P.isFoundDocument()?this.Z(o,t.P):this.tt(o,t.key,t.P)}for(var u=0,c=t.removedTargetIds;u<c.length;u++)o=c[u],this.tt(o,t.key,t.P)},e.prototype.et=function(t){var r=this;this.forEachTarget(t,function(i){var o=r.nt(i);switch(t.state){case 0:r.st(i)&&o.O(t.resumeToken);break;case 1:o.K(),o.F||o.L(),o.O(t.resumeToken);break;case 2:o.K(),o.F||r.removeTarget(i);break;case 3:r.st(i)&&(o.j(),o.O(t.resumeToken));break;case 4:r.st(i)&&(r.it(i),o.O(t.resumeToken));break;default:B()}})},e.prototype.forEachTarget=function(t,r){var i=this;t.targetIds.length>0?t.targetIds.forEach(r):this.G.forEach(function(o,u){i.st(u)&&r(u)})},e.prototype.rt=function(t){var r=t.targetId,i=t.V.count,o=this.ot(r);if(o){var u=o.target;if(ca(u))if(i===0){var c=new K(u.path);this.tt(r,c,zt.newNoDocument(c,J.min()))}else $(i===1);else this.ct(r)!==i&&(this.it(r),this.Y=this.Y.add(r))}},e.prototype.ut=function(t){var r=this,i=new Map;this.G.forEach(function(c,l){var f=r.ot(l);if(f){if(c.current&&ca(f.target)){var p=new K(f.target.path);r.H.get(p)!==null||r.at(l,p)||r.tt(l,p,zt.newNoDocument(p,t))}c.$&&(i.set(l,c.M()),c.L())}});var o=ct();this.J.forEach(function(c,l){var f=!0;l.forEachWhile(function(p){var g=r.ot(p);return!g||g.purpose===2||(f=!1,!1)}),f&&(o=o.add(c))});var u=new ad(t,i,this.Y,this.H,o);return this.H=Oe(),this.J=yy(),this.Y=new Pt(et),u},e.prototype.Z=function(t,r){if(this.st(t)){var i=this.at(t,r.key)?2:0;this.nt(t).B(r.key,i),this.H=this.H.insert(r.key,r),this.J=this.J.insert(r.key,this.ht(r.key).add(t))}},e.prototype.tt=function(t,r,i){if(this.st(t)){var o=this.nt(t);this.at(t,r)?o.B(r,1):o.q(r),this.J=this.J.insert(r,this.ht(r).delete(t)),i&&(this.H=this.H.insert(r,i))}},e.prototype.removeTarget=function(t){this.G.delete(t)},e.prototype.ct=function(t){var r=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size},e.prototype.U=function(t){this.nt(t).U()},e.prototype.nt=function(t){var r=this.G.get(t);return r||(r=new my,this.G.set(t,r)),r},e.prototype.ht=function(t){var r=this.J.get(t);return r||(r=new Pt(et),this.J=this.J.insert(t,r)),r},e.prototype.st=function(t){var r=this.ot(t)!==null;return r||P("WatchChangeAggregator","Detected inactive target",t),r},e.prototype.ot=function(t){var r=this.G.get(t);return r&&r.F?null:this.W.lt(t)},e.prototype.it=function(t){var r=this;this.G.set(t,new my),this.W.getRemoteKeysForTarget(t).forEach(function(i){r.tt(t,i,null)})},e.prototype.at=function(t,r){return this.W.getRemoteKeysForTarget(t).has(r)},e}();function yy(){return new Zt(K.comparator)}function wy(){return new Zt(K.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hk={asc:"ASCENDING",desc:"DESCENDING"},lk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fk=function(e,t){this.databaseId=e,this.I=t};function es(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function Xb(e,t){return e.I?t.toBase64():t.toUint8Array()}function dk(e,t){return es(e,t.toTimestamp())}function Vt(e){return $(!!e),J.fromTimestamp(function(t){var r=qn(t);return new pe(r.seconds,r.nanos)}(e))}function hd(e,t){return function(r){return new ut(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function Yb(e){var t=ut.fromString(e);return $(o0(t)),t}function ns(e,t){return hd(e.databaseId,t.path)}function rn(e,t){var r=Yb(t);if(r.get(1)!==e.databaseId.projectId)throw new O(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new O(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new K(Zb(r))}function vf(e,t){return hd(e.databaseId,t)}function Jb(e){var t=Yb(e);return t.length===4?ut.emptyPath():Zb(t)}function rs(e){return new ut(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Zb(e){return $(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function by(e,t,r){return{name:ns(e,t),fields:r.value.mapValue.fields}}function t0(e,t,r){var i=rn(e,t.name),o=Vt(t.updateTime),u=new Te({mapValue:{fields:t.fields}}),c=zt.newFoundDocument(i,o,u);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function fa(e,t){var r;if(t instanceof bs)r={update:by(e,t.key,t.value)};else if(t instanceof Is)r={delete:ns(e,t.key)};else if(t instanceof Hn)r={update:by(e,t.key,t.data),updateMask:yk(t.fieldMask)};else{if(!(t instanceof ud))return B();r={verify:ns(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(function(i){return function(o,u){var c=u.transform;if(c instanceof ki)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof kr)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Dr)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Di)return{fieldPath:u.field.canonicalString(),increment:c.A};throw B()}(0,i)})),t.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:dk(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B()}(e,t.precondition)),r}function Iy(e,t){var r=t.currentDocument?function(p){return p.updateTime!==void 0?Xt.updateTime(Vt(p.updateTime)):p.exists!==void 0?Xt.exists(p.exists):Xt.none()}(t.currentDocument):Xt.none(),i=t.updateTransforms?t.updateTransforms.map(function(p){return function(g,y){var w=null;if("setToServerValue"in y)$(y.setToServerValue==="REQUEST_TIME"),w=new ki;else if("appendMissingElements"in y){var I=y.appendMissingElements.values||[];w=new kr(I)}else if("removeAllFromArray"in y){var E=y.removeAllFromArray.values||[];w=new Dr(E)}else"increment"in y?w=new Di(g,y.increment):B();var _=ze.fromServerFormat(y.fieldPath);return new ws(_,w)}(e,p)}):[];if(t.update){t.update.name;var o=rn(e,t.update.name),u=new Te({mapValue:{fields:t.update.fields}});if(t.updateMask){var c=function(p){var g=p.fieldPaths||[];return new _i(g.map(function(y){return ze.fromServerFormat(y)}))}(t.updateMask);return new Hn(o,u,c,r,i)}return new bs(o,u,r,i)}if(t.delete){var l=rn(e,t.delete);return new Is(l,r)}if(t.verify){var f=rn(e,t.verify);return new ud(f,r)}return B()}function e0(e,t){return{documents:[vf(e,t.path)]}}function n0(e,t){var r={structuredQuery:{}},i=t.path;t.collectionGroup!==null?(r.parent=vf(e,i),r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r.parent=vf(e,i.popLast()),r.structuredQuery.from=[{collectionId:i.lastSegment()}]);var o=function(l){if(l.length!==0){var f=l.map(function(p){return function(g){if(g.op==="=="){if(uy(g.value))return{unaryFilter:{field:di(g.field),op:"IS_NAN"}};if(sy(g.value))return{unaryFilter:{field:di(g.field),op:"IS_NULL"}}}else if(g.op==="!="){if(uy(g.value))return{unaryFilter:{field:di(g.field),op:"IS_NOT_NAN"}};if(sy(g.value))return{unaryFilter:{field:di(g.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:di(g.field),op:vk(g.op),value:g.value}}}(p)});return f.length===1?f[0]:{compositeFilter:{op:"AND",filters:f}}}}(t.filters);o&&(r.structuredQuery.where=o);var u=function(l){if(l.length!==0)return l.map(function(f){return function(p){return{field:di(p.field),direction:pk(p.dir)}}(f)})}(t.orderBy);u&&(r.structuredQuery.orderBy=u);var c=function(l,f){return l.I||xr(f)?f:{value:f}}(e,t.limit);return c!==null&&(r.structuredQuery.limit=c),t.startAt&&(r.structuredQuery.startAt=Ey(t.startAt)),t.endAt&&(r.structuredQuery.endAt=Ey(t.endAt)),r}function r0(e){var t=Jb(e.parent),r=e.structuredQuery,i=r.from?r.from.length:0,o=null;if(i>0){$(i===1);var u=r.from[0];u.allDescendants?o=u.collectionId:t=t.child(u.collectionId)}var c=[];r.where&&(c=i0(r.where));var l=[];r.orderBy&&(l=r.orderBy.map(function(y){return function(w){return new bi(wi(w.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(y)}));var f=null;r.limit&&(f=function(y){var w;return xr(w=typeof y=="object"?y.value:y)?null:w}(r.limit));var p=null;r.startAt&&(p=Ty(r.startAt));var g=null;return r.endAt&&(g=Ty(r.endAt)),xb(t,o,l,c,f,"F",p,g)}function i0(e){return e?e.unaryFilter!==void 0?[mk(e)]:e.fieldFilter!==void 0?[gk(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return i0(t)}).reduce(function(t,r){return t.concat(r)}):B():[]}function Ey(e){return{before:e.before,values:e.position}}function Ty(e){var t=!!e.before,r=e.values||[];return new ts(r,t)}function pk(e){return hk[e]}function vk(e){return lk[e]}function di(e){return{fieldPath:e.canonicalString()}}function wi(e){return ze.fromServerFormat(e.fieldPath)}function gk(e){return Se.create(wi(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return B()}}(e.fieldFilter.op),e.fieldFilter.value)}function mk(e){switch(e.unaryFilter.op){case"IS_NAN":var t=wi(e.unaryFilter.field);return Se.create(t,"==",{doubleValue:NaN});case"IS_NULL":var r=wi(e.unaryFilter.field);return Se.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var i=wi(e.unaryFilter.field);return Se.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var o=wi(e.unaryFilter.field);return Se.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return B()}}function yk(e){var t=[];return e.fields.forEach(function(r){return t.push(r.canonicalString())}),{fieldPaths:t}}function o0(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(e){for(var t="",r=0;r<e.length;r++)t.length>0&&(t=_y(t)),t=wk(e.get(r),t);return _y(t)}function wk(e,t){for(var r=t,i=e.length,o=0;o<i;o++){var u=e.charAt(o);switch(u){case"\0":r+="";break;case"":r+="";break;default:r+=u}}return r}function _y(e){return e+""}function vn(e){var t=e.length;if($(t>=2),t===2)return $(e.charAt(0)===""&&e.charAt(1)===""),ut.emptyPath();for(var r=t-2,i=[],o="",u=0;u<t;){var c=e.indexOf("",u);switch((c<0||c>r)&&B(),e.charAt(c+1)){case"":var l=e.substring(u,c),f=void 0;o.length===0?f=l:(f=o+=l,o=""),i.push(f);break;case"":o+=e.substring(u,c),o+="\0";break;case"":o+=e.substring(u,c+1);break;default:B()}u=c+2}return new ut(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bk=function(e,t){this.seconds=e,this.nanoseconds=t},Ie=function(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r};Ie.store="owner",Ie.key="owner";var Vn=function(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r};Vn.store="mutationQueues",Vn.keyPath="userId";var ft=function(e,t,r,i,o){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=o};ft.store="mutations",ft.keyPath="batchId",ft.userMutationsIndex="userMutationsIndex",ft.userMutationsKeyPath=["userId","batchId"];var Qt=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,r){return[t,He(r)]},e.key=function(t,r,i){return[t,He(r),i]},e}();Qt.store="documentMutations",Qt.PLACEHOLDER=new Qt;var Ik=function(e,t){this.path=e,this.readTime=t},Ek=function(e,t){this.path=e,this.version=t},bt=function(e,t,r,i,o,u){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=o,this.parentPath=u};bt.store="remoteDocuments",bt.readTimeIndex="readTimeIndex",bt.readTimeIndexPath="readTime",bt.collectionReadTimeIndex="collectionReadTimeIndex",bt.collectionReadTimeIndexPath=["parentPath","readTime"];var nn=function(e){this.byteSize=e};nn.store="remoteDocumentGlobal",nn.key="remoteDocumentGlobalKey";var de=function(e,t,r,i,o,u,c){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=u,this.query=c};de.store="targets",de.keyPath="targetId",de.queryTargetsIndexName="queryTargetsIndex",de.queryTargetsKeyPath=["canonicalId","targetId"];var Kt=function(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r};Kt.store="targetDocuments",Kt.keyPath=["targetId","path"],Kt.documentTargetsIndex="documentTargetsIndex",Kt.documentTargetsKeyPath=["path","targetId"];var Ee=function(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i};Ee.key="targetGlobalKey",Ee.store="targetGlobal";var Ir=function(e,t){this.collectionId=e,this.parent=t};Ir.store="collectionParents",Ir.keyPath=["collectionId","parent"];var gn=function(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i};gn.store="clientMetadata",gn.keyPath="clientId";var Ci=function(e,t,r){this.bundleId=e,this.createTime=t,this.version=r};Ci.store="bundles",Ci.keyPath="bundleId";var Ri=function(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r};Ri.store="namedQueries",Ri.keyPath="name";var Tk=It(It([],It(It([],It(It([],It(It([],[Vn.store,ft.store,Qt.store,bt.store,de.store,Ie.store,Ee.store,Kt.store]),[gn.store])),[nn.store])),[Ir.store])),[Ci.store,Ri.store]),s0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",u0=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},e}(),Jt=function(){var e=this;this.promise=new Promise(function(t,r){e.resolve=t,e.reject=r})},L=function(){function e(t){var r=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(i){r.isDone=!0,r.result=i,r.nextCallback&&r.nextCallback(i)},function(i){r.isDone=!0,r.error=i,r.catchCallback&&r.catchCallback(i)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,r){var i=this;return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new e(function(o,u){i.nextCallback=function(c){i.wrapSuccess(t,c).next(o,u)},i.catchCallback=function(c){i.wrapFailure(r,c).next(o,u)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(r,i){t.next(r,i)})},e.prototype.wrapUserFunction=function(t){try{var r=t();return r instanceof e?r:e.resolve(r)}catch(i){return e.reject(i)}},e.prototype.wrapSuccess=function(t,r){return t?this.wrapUserFunction(function(){return t(r)}):e.resolve(r)},e.prototype.wrapFailure=function(t,r){return t?this.wrapUserFunction(function(){return t(r)}):e.reject(r)},e.resolve=function(t){return new e(function(r,i){r(t)})},e.reject=function(t){return new e(function(r,i){i(t)})},e.waitFor=function(t){return new e(function(r,i){var o=0,u=0,c=!1;t.forEach(function(l){++o,l.next(function(){++u,c&&u===o&&r()},function(f){return i(f)})}),c=!0,u===o&&r()})},e.or=function(t){for(var r=e.resolve(!1),i=function(c){r=r.next(function(l){return l?e.resolve(l):c()})},o=0,u=t;o<u.length;o++)i(u[o]);return r},e.forEach=function(t,r){var i=this,o=[];return t.forEach(function(u,c){o.push(r.call(i,u,c))}),this.waitFor(o)},e}(),a0=function(){function e(t,r){var i=this;this.action=t,this.transaction=r,this.aborted=!1,this.ft=new Jt,this.transaction.oncomplete=function(){i.ft.resolve()},this.transaction.onabort=function(){r.error?i.ft.reject(new Bo(t,r.error)):i.ft.resolve()},this.transaction.onerror=function(o){var u=ld(o.target.error);i.ft.reject(new Bo(t,u))}}return e.open=function(t,r,i,o){try{return new e(r,t.transaction(o,i))}catch(u){throw new Bo(r,u)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(P("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var r=this.transaction.objectStore(t);return new Sk(r)},e}(),Oi=function(){function e(t,r,i){this.name=t,this.version=r,this.wt=i,e._t(_r())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return P("SimpleDb","Removing database:",t),gr(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if(typeof indexedDB>"u")return!1;if(e.gt())return!0;var t=_r(),r=e._t(t),i=0<r&&r<10,o=e.Et(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||u)},e.gt=function(){var t;return typeof process<"u"&&((t=UN)===null||t===void 0?void 0:t.Tt)==="YES"},e.It=function(t,r){return t.store(r)},e._t=function(t){var r=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(i)},e.Et=function(t){var r=t.match(/Android ([\d.]+)/i),i=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(i)},e.prototype.At=function(t){return D(this,void 0,void 0,function(){var r,i=this;return k(this,function(o){switch(o.label){case 0:return this.db?[3,2]:(P("SimpleDb","Opening database:",this.name),r=this,[4,new Promise(function(u,c){var l=indexedDB.open(i.name,i.version);l.onsuccess=function(f){var p=f.target.result;u(p)},l.onblocked=function(){c(new Bo(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=function(f){var p=f.target.error;p.name==="VersionError"?c(new O(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c(new Bo(t,p))},l.onupgradeneeded=function(f){P("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',f.oldVersion);var p=f.target.result;i.wt.Rt(p,l.transaction,f.oldVersion,i.version).next(function(){P("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:r.db=o.sent(),o.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(u){return i.bt(u)}),this.db)]}})})},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(r){return t(r)})},e.prototype.runTransaction=function(t,r,i,o){return D(this,void 0,void 0,function(){var u,c,l,f,p;return k(this,function(g){switch(g.label){case 0:u=r==="readonly",c=0,l=function(){var y,w,I,E,_;return k(this,function(A){switch(A.label){case 0:++c,A.label=1;case 1:return A.trys.push([1,4,,5]),[4,f.At(t)];case 2:return f.db=A.sent(),y=a0.open(f.db,t,u?"readonly":"readwrite",i),w=o(y).catch(function(x){return y.abort(x),L.reject(x)}).toPromise(),I={},w.catch(function(){}),[4,y.dt];case 3:return[2,(I.value=(A.sent(),w),I)];case 4:return E=A.sent(),_=E.name!=="FirebaseError"&&c<3,P("SimpleDb","Transaction failed with error:",E.message,"Retrying:",_),f.close(),_?[3,5]:[2,{value:Promise.reject(E)}];case 5:return[2]}})},f=this,g.label=1;case 1:return[5,l()];case 2:if(typeof(p=g.sent())=="object")return[2,p.value];g.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),_k=function(){function e(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(t){this.St=t},e.prototype.delete=function(){return gr(this.Pt.delete())},e}(),Bo=function(e){function t(r,i){var o=this;return(o=e.call(this,S.UNAVAILABLE,"IndexedDB transaction '"+r+"' failed: "+i)||this).name="IndexedDbTransactionError",o}return z(t,e),t}(O);function Lr(e){return e.name==="IndexedDbTransactionError"}var Sk=function(){function e(t){this.store=t}return e.prototype.put=function(t,r){var i;return r!==void 0?(P("SimpleDb","PUT",this.store.name,t,r),i=this.store.put(r,t)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),gr(i)},e.prototype.add=function(t){return P("SimpleDb","ADD",this.store.name,t,t),gr(this.store.add(t))},e.prototype.get=function(t){var r=this;return gr(this.store.get(t)).next(function(i){return i===void 0&&(i=null),P("SimpleDb","GET",r.store.name,t,i),i})},e.prototype.delete=function(t){return P("SimpleDb","DELETE",this.store.name,t),gr(this.store.delete(t))},e.prototype.count=function(){return P("SimpleDb","COUNT",this.store.name),gr(this.store.count())},e.prototype.Nt=function(t,r){var i=this.cursor(this.options(t,r)),o=[];return this.xt(i,function(u,c){o.push(c)}).next(function(){return o})},e.prototype.kt=function(t,r){P("SimpleDb","DELETE ALL",this.store.name);var i=this.options(t,r);i.Ft=!1;var o=this.cursor(i);return this.xt(o,function(u,c,l){return l.delete()})},e.prototype.$t=function(t,r){var i;r?i=t:(i={},r=t);var o=this.cursor(i);return this.xt(o,r)},e.prototype.Ot=function(t){var r=this.cursor({});return new L(function(i,o){r.onerror=function(u){var c=ld(u.target.error);o(c)},r.onsuccess=function(u){var c=u.target.result;c?t(c.primaryKey,c.value).next(function(l){l?c.continue():i()}):i()}})},e.prototype.xt=function(t,r){var i=[];return new L(function(o,u){t.onerror=function(c){u(c.target.error)},t.onsuccess=function(c){var l=c.target.result;if(l){var f=new _k(l),p=r(l.primaryKey,l.value,f);if(p instanceof L){var g=p.catch(function(y){return f.done(),L.reject(y)});i.push(g)}f.isDone?o():f.Dt===null?l.continue():l.continue(f.Dt)}else o()}}).next(function(){return L.waitFor(i)})},e.prototype.options=function(t,r){var i;return t!==void 0&&(typeof t=="string"?i=t:r=t),{index:i,range:r}},e.prototype.cursor=function(t){var r="next";if(t.reverse&&(r="prev"),t.index){var i=this.store.index(t.index);return t.Ft?i.openKeyCursor(t.range,r):i.openCursor(t.range,r)}return this.store.openCursor(t.range,r)},e}();function gr(e){return new L(function(t,r){e.onsuccess=function(i){var o=i.target.result;t(o)},e.onerror=function(i){var o=ld(i.target.error);r(o)}})}var Sy=!1;function ld(e){var t=Oi._t(_r());if(t>=12.2&&t<13){var r="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(r)>=0){var i=new O("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+r+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Sy||(Sy=!0,setTimeout(function(){throw i},0)),i}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ay=function(e){function t(r,i){var o=this;return(o=e.call(this)||this).Mt=r,o.currentSequenceNumber=i,o}return z(t,e),t}(u0);function ge(e,t){var r=M(e);return Oi.It(r.Mt,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fd=function(){function e(t,r,i,o){this.batchId=t,this.localWriteTime=r,this.baseMutations=i,this.mutations=o}return e.prototype.applyToRemoteDocument=function(t,r){for(var i=r.mutationResults,o=0;o<this.mutations.length;o++){var u=this.mutations[o];u.key.isEqual(t.key)&&ek(u,t,i[o])}},e.prototype.applyToLocalView=function(t){for(var r=0,i=this.baseMutations;r<i.length;r++)(c=i[r]).key.isEqual(t.key)&&df(c,t,this.localWriteTime);for(var o=0,u=this.mutations;o<u.length;o++){var c;(c=u[o]).key.isEqual(t.key)&&df(c,t,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(t){var r=this;this.mutations.forEach(function(i){var o=t.get(i.key),u=o;r.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(J.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(t,r){return t.add(r.key)},ct())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ti(this.mutations,t.mutations,function(r,i){return fy(r,i)})&&Ti(this.baseMutations,t.baseMutations,function(r,i){return fy(r,i)})},e}(),Ak=function(){function e(t,r,i,o){this.batch=t,this.commitVersion=r,this.mutationResults=i,this.docVersions=o}return e.from=function(t,r,i){$(t.mutations.length===i.length);for(var o=$b(),u=t.mutations,c=0;c<u.length;c++)o=o.insert(u[c].key,i[c].version);return new e(t,r,i,o)},e}(),Ka=function(){function e(t,r,i,o,u,c,l){u===void 0&&(u=J.min()),c===void 0&&(c=J.min()),l===void 0&&(l=ue.EMPTY_BYTE_STRING),this.target=t,this.targetId=r,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=l}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,r){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),c0=function(e){this.Lt=e};function gf(e,t){if(t.document)return t0(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var r=K.fromSegments(t.noDocument.path),i=Li(t.noDocument.readTime),o=zt.newNoDocument(r,i);return t.hasCommittedMutations?o.setHasCommittedMutations():o}if(t.unknownDocument){var u=K.fromSegments(t.unknownDocument.path);return i=Li(t.unknownDocument.version),zt.newUnknownDocument(u,i)}return B()}function Ny(e,t,r){var i=dd(r),o=t.key.path.popLast().toArray();if(t.isFoundDocument()){var u=function(y,w){return{name:ns(y,w.key),fields:w.data.value.mapValue.fields,updateTime:es(y,w.version.toTimestamp())}}(e.Lt,t),c=t.hasCommittedMutations;return new bt(null,null,u,c,i,o)}if(t.isNoDocument()){var l=t.key.path.toArray(),f=xi(t.version);return c=t.hasCommittedMutations,new bt(null,new Ik(l,f),null,c,i,o)}if(t.isUnknownDocument()){var p=t.key.path.toArray(),g=xi(t.version);return new bt(new Ek(p,g),null,null,!0,i,o)}return B()}function dd(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function h0(e){var t=new pe(e[0],e[1]);return J.fromTimestamp(t)}function xi(e){var t=e.toTimestamp();return new bk(t.seconds,t.nanoseconds)}function Li(e){var t=new pe(e.seconds,e.nanoseconds);return J.fromTimestamp(t)}function gi(e,t){for(var r=(t.baseMutations||[]).map(function(f){return Iy(e.Lt,f)}),i=0;i<t.mutations.length-1;++i){var o=t.mutations[i];if(i+1<t.mutations.length&&t.mutations[i+1].transform!==void 0){var u=t.mutations[i+1];o.updateTransforms=u.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}var c=t.mutations.map(function(f){return Iy(e.Lt,f)}),l=pe.fromMillis(t.localWriteTimeMs);return new fd(t.batchId,l,r,c)}function Uo(e){var t,r,i=Li(e.readTime),o=e.lastLimboFreeSnapshotVersion!==void 0?Li(e.lastLimboFreeSnapshotVersion):J.min();return e.query.documents!==void 0?($((r=e.query).documents.length===1),t=xe(Gi(Jb(r.documents[0])))):t=function(u){return xe(r0(u))}(e.query),new Ka(t,e.targetId,0,e.lastListenSequenceNumber,i,o,ue.fromBase64String(e.resumeToken))}function l0(e,t){var r,i=xi(t.snapshotVersion),o=xi(t.lastLimboFreeSnapshotVersion);r=ca(t.target)?e0(e.Lt,t.target):n0(e.Lt,t.target);var u=t.resumeToken.toBase64();return new de(t.targetId,gs(t.target),i,u,t.sequenceNumber,o,r)}function pd(e){var t=r0({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Lb(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nk=function(){function e(){}return e.prototype.getBundleMetadata=function(t,r){return ky(t).get(r).next(function(i){if(i)return{id:(o=i).bundleId,createTime:Li(o.createTime),version:o.version};var o})},e.prototype.saveBundleMetadata=function(t,r){return ky(t).put({bundleId:(i=r).id,createTime:xi(Vt(i.createTime)),version:i.version});var i},e.prototype.getNamedQuery=function(t,r){return Dy(t).get(r).next(function(i){if(i)return{name:(o=i).name,query:pd(o.bundledQuery),readTime:Li(o.readTime)};var o})},e.prototype.saveNamedQuery=function(t,r){return Dy(t).put(function(i){return{name:i.name,readTime:xi(Vt(i.readTime)),bundledQuery:i.bundledQuery}}(r))},e}();function ky(e){return ge(e,Ci.store)}function Dy(e){return ge(e,Ri.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kk=function(){function e(){this.Bt=new vd}return e.prototype.addToCollectionParentIndex=function(t,r){return this.Bt.add(r),L.resolve()},e.prototype.getCollectionParents=function(t,r){return L.resolve(this.Bt.getEntries(r))},e}(),vd=function(){function e(){this.index={}}return e.prototype.add=function(t){var r=t.lastSegment(),i=t.popLast(),o=this.index[r]||new Pt(ut.comparator),u=!o.has(i);return this.index[r]=o.add(i),u},e.prototype.has=function(t){var r=t.lastSegment(),i=t.popLast(),o=this.index[r];return o&&o.has(i)},e.prototype.getEntries=function(t){return(this.index[t]||new Pt(ut.comparator)).toArray()},e}(),Dk=function(){function e(){this.qt=new vd}return e.prototype.addToCollectionParentIndex=function(t,r){var i=this;if(!this.qt.has(r)){var o=r.lastSegment(),u=r.popLast();t.addOnCommittedListener(function(){i.qt.add(r)});var c={collectionId:o,parent:He(u)};return Cy(t).put(c)}return L.resolve()},e.prototype.getCollectionParents=function(t,r){var i=[],o=IDBKeyRange.bound([r,""],[Ab(r),""],!1,!0);return Cy(t).Nt(o).next(function(u){for(var c=0,l=u;c<l.length;c++){var f=l[c];if(f.collectionId!==r)break;i.push(vn(f.parent))}return i})},e}();function Cy(e){return ge(e,Ir.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ry={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},en=function(){function e(t,r,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(e,t,r){var i=e.store(ft.store),o=e.store(Qt.store),u=[],c=IDBKeyRange.only(r.batchId),l=0,f=i.$t({range:c},function(E,_,A){return l++,A.delete()});u.push(f.next(function(){$(l===1)}));for(var p=[],g=0,y=r.mutations;g<y.length;g++){var w=y[g],I=Qt.key(t,w.key.path,r.batchId);u.push(o.delete(I)),p.push(w.key)}return L.waitFor(u).next(function(){return p})}function da(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw B();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(41943040,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);var Ck=function(){function e(t,r,i,o){this.userId=t,this.R=r,this.Ut=i,this.referenceDelegate=o,this.Kt={}}return e.Qt=function(t,r,i,o){return $(t.uid!==""),new e(t.isAuthenticated()?t.uid:"",r,i,o)},e.prototype.checkEmpty=function(t){var r=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return On(t).$t({index:ft.userMutationsIndex,range:i},function(o,u,c){r=!1,c.done()}).next(function(){return r})},e.prototype.addMutationBatch=function(t,r,i,o){var u=this,c=mi(t),l=On(t);return l.add({}).next(function(f){$(typeof f=="number");for(var p=new fd(f,r,i,o),g=function(x,U,C){var W=C.baseMutations.map(function(rt){return fa(x.Lt,rt)}),F=C.mutations.map(function(rt){return fa(x.Lt,rt)});return new ft(U,C.batchId,C.localWriteTime.toMillis(),W,F)}(u.R,u.userId,p),y=[],w=new Pt(function(x,U){return et(x.canonicalString(),U.canonicalString())}),I=0,E=o;I<E.length;I++){var _=E[I],A=Qt.key(u.userId,_.key.path,f);w=w.add(_.key.path.popLast()),y.push(l.put(g)),y.push(c.put(A,Qt.PLACEHOLDER))}return w.forEach(function(x){y.push(u.Ut.addToCollectionParentIndex(t,x))}),t.addOnCommittedListener(function(){u.Kt[f]=p.keys()}),L.waitFor(y).next(function(){return p})})},e.prototype.lookupMutationBatch=function(t,r){var i=this;return On(t).get(r).next(function(o){return o?($(o.userId===i.userId),gi(i.R,o)):null})},e.prototype.jt=function(t,r){var i=this;return this.Kt[r]?L.resolve(this.Kt[r]):this.lookupMutationBatch(t,r).next(function(o){if(o){var u=o.keys();return i.Kt[r]=u,u}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(t,r){var i=this,o=r+1,u=IDBKeyRange.lowerBound([this.userId,o]),c=null;return On(t).$t({index:ft.userMutationsIndex,range:u},function(l,f,p){f.userId===i.userId&&($(f.batchId>=o),c=gi(i.R,f)),p.done()}).next(function(){return c})},e.prototype.getHighestUnacknowledgedBatchId=function(t){var r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return On(t).$t({index:ft.userMutationsIndex,range:r,reverse:!0},function(o,u,c){i=u.batchId,c.done()}).next(function(){return i})},e.prototype.getAllMutationBatches=function(t){var r=this,i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return On(t).Nt(ft.userMutationsIndex,i).next(function(o){return o.map(function(u){return gi(r.R,u)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,r){var i=this,o=Qt.prefixForPath(this.userId,r.path),u=IDBKeyRange.lowerBound(o),c=[];return mi(t).$t({range:u},function(l,f,p){var g=l[0],y=l[1],w=l[2],I=vn(y);if(g===i.userId&&r.path.isEqual(I))return On(t).get(w).next(function(E){if(!E)throw B();$(E.userId===i.userId),c.push(gi(i.R,E))});p.done()}).next(function(){return c})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,r){var i=this,o=new Pt(et),u=[];return r.forEach(function(c){var l=Qt.prefixForPath(i.userId,c.path),f=IDBKeyRange.lowerBound(l),p=mi(t).$t({range:f},function(g,y,w){var I=g[0],E=g[1],_=g[2],A=vn(E);I===i.userId&&c.path.isEqual(A)?o=o.add(_):w.done()});u.push(p)}),L.waitFor(u).next(function(){return i.Wt(t,o)})},e.prototype.getAllMutationBatchesAffectingQuery=function(t,r){var i=this,o=r.path,u=o.length+1,c=Qt.prefixForPath(this.userId,o),l=IDBKeyRange.lowerBound(c),f=new Pt(et);return mi(t).$t({range:l},function(p,g,y){var w=p[0],I=p[1],E=p[2],_=vn(I);w===i.userId&&o.isPrefixOf(_)?_.length===u&&(f=f.add(E)):y.done()}).next(function(){return i.Wt(t,f)})},e.prototype.Wt=function(t,r){var i=this,o=[],u=[];return r.forEach(function(c){u.push(On(t).get(c).next(function(l){if(l===null)throw B();$(l.userId===i.userId),o.push(gi(i.R,l))}))}),L.waitFor(u).next(function(){return o})},e.prototype.removeMutationBatch=function(t,r){var i=this;return f0(t.Mt,this.userId,r).next(function(o){return t.addOnCommittedListener(function(){i.Gt(r.batchId)}),L.forEach(o,function(u){return i.referenceDelegate.markPotentiallyOrphaned(t,u)})})},e.prototype.Gt=function(t){delete this.Kt[t]},e.prototype.performConsistencyCheck=function(t){var r=this;return this.checkEmpty(t).next(function(i){if(!i)return L.resolve();var o=IDBKeyRange.lowerBound(Qt.prefixForUser(r.userId)),u=[];return mi(t).$t({range:o},function(c,l,f){if(c[0]===r.userId){var p=vn(c[1]);u.push(p)}else f.done()}).next(function(){$(u.length===0)})})},e.prototype.containsKey=function(t,r){return d0(t,this.userId,r)},e.prototype.zt=function(t){var r=this;return p0(t).get(this.userId).next(function(i){return i||new Vn(r.userId,-1,"")})},e}();function d0(e,t,r){var i=Qt.prefixForPath(t,r.path),o=i[1],u=IDBKeyRange.lowerBound(i),c=!1;return mi(e).$t({range:u,Ft:!0},function(l,f,p){var g=l[0],y=l[1];l[2],g===t&&y===o&&(c=!0),p.done()}).next(function(){return c})}function On(e){return ge(e,ft.store)}function mi(e){return ge(e,Qt.store)}function p0(e){return ge(e,Vn.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pa=function(){function e(t){this.Ht=t}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),Rk=function(){function e(t,r){this.referenceDelegate=t,this.R=r}return e.prototype.allocateTargetId=function(t){var r=this;return this.Xt(t).next(function(i){var o=new pa(i.highestTargetId);return i.highestTargetId=o.next(),r.Zt(t,i).next(function(){return i.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(r){return J.fromTimestamp(new pe(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(r){return r.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(t,r,i){var o=this;return this.Xt(t).next(function(u){return u.highestListenSequenceNumber=r,i&&(u.lastRemoteSnapshotVersion=i.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),o.Zt(t,u)})},e.prototype.addTargetData=function(t,r){var i=this;return this.te(t,r).next(function(){return i.Xt(t).next(function(o){return o.targetCount+=1,i.ee(r,o),i.Zt(t,o)})})},e.prototype.updateTargetData=function(t,r){return this.te(t,r)},e.prototype.removeTargetData=function(t,r){var i=this;return this.removeMatchingKeysForTargetId(t,r.targetId).next(function(){return pi(t).delete(r.targetId)}).next(function(){return i.Xt(t)}).next(function(o){return $(o.targetCount>0),o.targetCount-=1,i.Zt(t,o)})},e.prototype.removeTargets=function(t,r,i){var o=this,u=0,c=[];return pi(t).$t(function(l,f){var p=Uo(f);p.sequenceNumber<=r&&i.get(p.targetId)===null&&(u++,c.push(o.removeTargetData(t,p)))}).next(function(){return L.waitFor(c)}).next(function(){return u})},e.prototype.forEachTarget=function(t,r){return pi(t).$t(function(i,o){var u=Uo(o);r(u)})},e.prototype.Xt=function(t){return Oy(t).get(Ee.key).next(function(r){return $(r!==null),r})},e.prototype.Zt=function(t,r){return Oy(t).put(Ee.key,r)},e.prototype.te=function(t,r){return pi(t).put(l0(this.R,r))},e.prototype.ee=function(t,r){var i=!1;return t.targetId>r.highestTargetId&&(r.highestTargetId=t.targetId,i=!0),t.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t.sequenceNumber,i=!0),i},e.prototype.getTargetCount=function(t){return this.Xt(t).next(function(r){return r.targetCount})},e.prototype.getTargetData=function(t,r){var i=gs(r),o=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),u=null;return pi(t).$t({range:o,index:de.queryTargetsIndexName},function(c,l,f){var p=Uo(l);Va(r,p.target)&&(u=p,f.done())}).next(function(){return u})},e.prototype.addMatchingKeys=function(t,r,i){var o=this,u=[],c=Mn(t);return r.forEach(function(l){var f=He(l.path);u.push(c.put(new Kt(i,f))),u.push(o.referenceDelegate.addReference(t,i,l))}),L.waitFor(u)},e.prototype.removeMatchingKeys=function(t,r,i){var o=this,u=Mn(t);return L.forEach(r,function(c){var l=He(c.path);return L.waitFor([u.delete([i,l]),o.referenceDelegate.removeReference(t,i,c)])})},e.prototype.removeMatchingKeysForTargetId=function(t,r){var i=Mn(t),o=IDBKeyRange.bound([r],[r+1],!1,!0);return i.delete(o)},e.prototype.getMatchingKeysForTargetId=function(t,r){var i=IDBKeyRange.bound([r],[r+1],!1,!0),o=Mn(t),u=ct();return o.$t({range:i,Ft:!0},function(c,l,f){var p=vn(c[1]),g=new K(p);u=u.add(g)}).next(function(){return u})},e.prototype.containsKey=function(t,r){var i=He(r.path),o=IDBKeyRange.bound([i],[Ab(i)],!1,!0),u=0;return Mn(t).$t({index:Kt.documentTargetsIndex,Ft:!0,range:o},function(c,l,f){var p=c[0];c[1],p!==0&&(u++,f.done())}).next(function(){return u>0})},e.prototype.lt=function(t,r){return pi(t).get(r).next(function(i){return i?Uo(i):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(e){return ge(e,de.store)}function Oy(e){return ge(e,Ee.store)}function Mn(e){return ge(e,Kt.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(e){return D(this,void 0,void 0,function(){return k(this,function(t){if(e.code!==S.FAILED_PRECONDITION||e.message!==s0)throw e;return P("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(e,t){var r=e[0],i=e[1],o=t[0],u=t[1],c=et(r,o);return c===0?et(i,u):c}var Ok=function(){function e(t){this.ne=t,this.buffer=new Pt(xy),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(t){var r=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(r);else{var i=this.buffer.last();xy(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),xk=function(){function e(t,r){this.garbageCollector=t,this.asyncQueue=r,this.oe=!1,this.ce=null}return e.prototype.start=function(t){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(t)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),e.prototype.ue=function(t){var r=this,i=this.oe?3e5:6e4;P("LruGarbageCollector","Garbage collection scheduled in "+i+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,function(){return D(r,void 0,void 0,function(){var o;return k(this,function(u){switch(u.label){case 0:this.ce=null,this.oe=!0,u.label=1;case 1:return u.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return u.sent(),[3,7];case 3:return Lr(o=u.sent())?(P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o),[3,6]):[3,4];case 4:return[4,Pr(o)];case 5:u.sent(),u.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return u.sent(),[2]}})})})},e}(),Lk=function(){function e(t,r){this.ae=t,this.params=r}return e.prototype.calculateTargetCount=function(t,r){return this.ae.he(t).next(function(i){return Math.floor(r/100*i)})},e.prototype.nthSequenceNumber=function(t,r){var i=this;if(r===0)return L.resolve(_e.o);var o=new Ok(r);return this.ae.forEachTarget(t,function(u){return o.re(u.sequenceNumber)}).next(function(){return i.ae.le(t,function(u){return o.re(u)})}).next(function(){return o.maxValue})},e.prototype.removeTargets=function(t,r,i){return this.ae.removeTargets(t,r,i)},e.prototype.removeOrphanedDocuments=function(t,r){return this.ae.removeOrphanedDocuments(t,r)},e.prototype.collect=function(t,r){var i=this;return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Ry)):this.getCacheSize(t).next(function(o){return o<i.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector","Garbage collection skipped; Cache size "+o+" is lower than threshold "+i.params.cacheSizeCollectionThreshold),Ry):i.fe(t,r)})},e.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},e.prototype.fe=function(t,r){var i,o,u,c,l,f,p,g=this,y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(w){return w>g.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+g.params.maximumSequenceNumbersToCollect+" from "+w),o=g.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),g.nthSequenceNumber(t,o)}).next(function(w){return i=w,l=Date.now(),g.removeTargets(t,i,r)}).next(function(w){return u=w,f=Date.now(),g.removeOrphanedDocuments(t,i)}).next(function(w){return p=Date.now(),cf()<=ot.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(c-y)+`ms
	Determined least recently used `+o+" in "+(l-c)+`ms
	Removed `+u+" targets in "+(f-l)+`ms
	Removed `+w+" documents in "+(p-f)+`ms
Total Duration: `+(p-y)+"ms"),L.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})})},e}(),Pk=function(){function e(t,r){this.db=t,this.garbageCollector=function(i,o){return new Lk(i,o)}(this,r)}return e.prototype.he=function(t){var r=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(i){return r.next(function(o){return i+o})})},e.prototype.de=function(t){var r=0;return this.le(t,function(i){r++}).next(function(){return r})},e.prototype.forEachTarget=function(t,r){return this.db.getTargetCache().forEachTarget(t,r)},e.prototype.le=function(t,r){return this.we(t,function(i,o){return r(o)})},e.prototype.addReference=function(t,r,i){return qu(t,i)},e.prototype.removeReference=function(t,r,i){return qu(t,i)},e.prototype.removeTargets=function(t,r,i){return this.db.getTargetCache().removeTargets(t,r,i)},e.prototype.markPotentiallyOrphaned=function(t,r){return qu(t,r)},e.prototype._e=function(t,r){return function(i,o){var u=!1;return p0(i).Ot(function(c){return d0(i,c,o).next(function(l){return l&&(u=!0),L.resolve(!l)})}).next(function(){return u})}(t,r)},e.prototype.removeOrphanedDocuments=function(t,r){var i=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[],c=0;return this.we(t,function(l,f){if(f<=r){var p=i._e(t,l).next(function(g){if(!g)return c++,o.getEntry(t,l).next(function(){return o.removeEntry(l),Mn(t).delete([0,He(l.path)])})});u.push(p)}}).next(function(){return L.waitFor(u)}).next(function(){return o.apply(t)}).next(function(){return c})},e.prototype.removeTarget=function(t,r){var i=r.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)},e.prototype.updateLimboDocument=function(t,r){return qu(t,r)},e.prototype.we=function(t,r){var i,o=Mn(t),u=_e.o;return o.$t({index:Kt.documentTargetsIndex},function(c,l){var f=c[0];c[1];var p=l.path,g=l.sequenceNumber;f===0?(u!==_e.o&&r(new K(vn(i)),u),u=g,i=p):u=_e.o}).next(function(){u!==_e.o&&r(new K(vn(i)),u)})},e.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},e}();function qu(e,t){return Mn(e).put(function(r,i){return new Kt(0,He(r.path),i)}(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hi=function(){function e(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={}}return e.prototype.get=function(t){var r=this.mapKeyFn(t),i=this.inner[r];if(i!==void 0)for(var o=0,u=i;o<u.length;o++){var c=u[o],l=c[0],f=c[1];if(this.equalsFn(l,t))return f}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,r){var i=this.mapKeyFn(t),o=this.inner[i];if(o!==void 0){for(var u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,r]);o.push([t,r])}else this.inner[i]=[[t,r]]},e.prototype.delete=function(t){var r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return!1;for(var o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return i.length===1?delete this.inner[r]:i.splice(o,1),!0;return!1},e.prototype.forEach=function(t){Or(this.inner,function(r,i){for(var o=0,u=i;o<u.length;o++){var c=u[o],l=c[0],f=c[1];t(l,f)}})},e.prototype.isEmpty=function(){return Nb(this.inner)},e}(),v0=function(){function e(){this.changes=new Hi(function(t){return t.toString()},function(t,r){return t.isEqual(r)}),this.changesApplied=!1}return e.prototype.getReadTime=function(t){var r=this.changes.get(t);return r?r.readTime:J.min()},e.prototype.addEntry=function(t,r){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:r})},e.prototype.removeEntry=function(t,r){r===void 0&&(r=null),this.assertNotApplied(),this.changes.set(t,{document:zt.newInvalidDocument(t),readTime:r})},e.prototype.getEntry=function(t,r){this.assertNotApplied();var i=this.changes.get(r);return i!==void 0?L.resolve(i.document):this.getFromCache(t,r)},e.prototype.getEntries=function(t,r){return this.getAllFromCache(t,r)},e.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},e.prototype.assertNotApplied=function(){},e}(),Mk=function(){function e(t,r){this.R=t,this.Ut=r}return e.prototype.addEntry=function(t,r,i){return Ln(t).put(Bu(r),i)},e.prototype.removeEntry=function(t,r){var i=Ln(t),o=Bu(r);return i.delete(o)},e.prototype.updateMetadata=function(t,r){var i=this;return this.getMetadata(t).next(function(o){return o.byteSize+=r,i.me(t,o)})},e.prototype.getEntry=function(t,r){var i=this;return Ln(t).get(Bu(r)).next(function(o){return i.ye(r,o)})},e.prototype.ge=function(t,r){var i=this;return Ln(t).get(Bu(r)).next(function(o){return{document:i.ye(r,o),size:da(o)}})},e.prototype.getEntries=function(t,r){var i=this,o=Oe();return this.pe(t,r,function(u,c){var l=i.ye(u,c);o=o.insert(u,l)}).next(function(){return o})},e.prototype.Ee=function(t,r){var i=this,o=Oe(),u=new Zt(K.comparator);return this.pe(t,r,function(c,l){var f=i.ye(c,l);o=o.insert(c,f),u=u.insert(c,da(l))}).next(function(){return{documents:o,Te:u}})},e.prototype.pe=function(t,r,i){if(r.isEmpty())return L.resolve();var o=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),u=r.getIterator(),c=u.getNext();return Ln(t).$t({range:o},function(l,f,p){for(var g=K.fromSegments(l);c&&K.comparator(c,g)<0;)i(c,null),c=u.getNext();c&&c.isEqual(g)&&(i(c,f),c=u.hasNext()?u.getNext():null),c?p.Ct(c.path.toArray()):p.done()}).next(function(){for(;c;)i(c,null),c=u.hasNext()?u.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(t,r,i){var o=this,u=Oe(),c=r.path.length+1,l={};if(i.isEqual(J.min())){var f=r.path.toArray();l.range=IDBKeyRange.lowerBound(f)}else{var p=r.path.toArray(),g=dd(i);l.range=IDBKeyRange.lowerBound([p,g],!0),l.index=bt.collectionReadTimeIndex}return Ln(t).$t(l,function(y,w,I){if(y.length===c){var E=gf(o.R,w);r.path.isPrefixOf(E.key.path)?ys(r,E)&&(u=u.insert(E.key,E)):I.done()}}).next(function(){return u})},e.prototype.newChangeBuffer=function(t){return new Fk(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(t){return this.getMetadata(t).next(function(r){return r.byteSize})},e.prototype.getMetadata=function(t){return Ly(t).get(nn.key).next(function(r){return $(!!r),r})},e.prototype.me=function(t,r){return Ly(t).put(nn.key,r)},e.prototype.ye=function(t,r){if(r){var i=gf(this.R,r);if(!i.isNoDocument()||!i.version.isEqual(J.min()))return i}return zt.newInvalidDocument(t)},e}(),Fk=function(e){function t(r,i){var o=this;return(o=e.call(this)||this).Ie=r,o.trackRemovals=i,o.Ae=new Hi(function(u){return u.toString()},function(u,c){return u.isEqual(c)}),o}return z(t,e),t.prototype.applyChanges=function(r){var i=this,o=[],u=0,c=new Pt(function(l,f){return et(l.canonicalString(),f.canonicalString())});return this.changes.forEach(function(l,f){var p=i.Ae.get(l);if(f.document.isValidDocument()){var g=Ny(i.Ie.R,f.document,i.getReadTime(l));c=c.add(l.path.popLast());var y=da(g);u+=y-p,o.push(i.Ie.addEntry(r,l,g))}else if(u-=p,i.trackRemovals){var w=Ny(i.Ie.R,zt.newNoDocument(l,J.min()),i.getReadTime(l));o.push(i.Ie.addEntry(r,l,w))}else o.push(i.Ie.removeEntry(r,l))}),c.forEach(function(l){o.push(i.Ie.Ut.addToCollectionParentIndex(r,l))}),o.push(this.Ie.updateMetadata(r,u)),L.waitFor(o)},t.prototype.getFromCache=function(r,i){var o=this;return this.Ie.ge(r,i).next(function(u){return o.Ae.set(i,u.size),u.document})},t.prototype.getAllFromCache=function(r,i){var o=this;return this.Ie.Ee(r,i).next(function(u){var c=u.documents;return u.Te.forEach(function(l,f){o.Ae.set(l,f)}),c})},t}(v0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(e){return ge(e,nn.store)}function Ln(e){return ge(e,bt.store)}function Bu(e){return e.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uk=function(){function e(t){this.R=t}return e.prototype.Rt=function(t,r,i,o){var u=this;$(i<o&&i>=0&&o<=11);var c=new a0("createOrUpgrade",r);i<1&&o>=1&&(function(f){f.createObjectStore(Ie.store)}(t),function(f){f.createObjectStore(Vn.store,{keyPath:Vn.keyPath}),f.createObjectStore(ft.store,{keyPath:ft.keyPath,autoIncrement:!0}).createIndex(ft.userMutationsIndex,ft.userMutationsKeyPath,{unique:!0}),f.createObjectStore(Qt.store)}(t),Py(t),function(f){f.createObjectStore(bt.store)}(t));var l=L.resolve();return i<3&&o>=3&&(i!==0&&(function(f){f.deleteObjectStore(Kt.store),f.deleteObjectStore(de.store),f.deleteObjectStore(Ee.store)}(t),Py(t)),l=l.next(function(){return function(f){var p=f.store(Ee.store),g=new Ee(0,0,J.min().toTimestamp(),0);return p.put(Ee.key,g)}(c)})),i<4&&o>=4&&(i!==0&&(l=l.next(function(){return function(f,p){return p.store(ft.store).Nt().next(function(g){f.deleteObjectStore(ft.store),f.createObjectStore(ft.store,{keyPath:ft.keyPath,autoIncrement:!0}).createIndex(ft.userMutationsIndex,ft.userMutationsKeyPath,{unique:!0});var y=p.store(ft.store),w=g.map(function(I){return y.put(I)});return L.waitFor(w)})}(t,c)})),l=l.next(function(){(function(f){f.createObjectStore(gn.store,{keyPath:gn.keyPath})})(t)})),i<5&&o>=5&&(l=l.next(function(){return u.Re(c)})),i<6&&o>=6&&(l=l.next(function(){return function(f){f.createObjectStore(nn.store)}(t),u.be(c)})),i<7&&o>=7&&(l=l.next(function(){return u.ve(c)})),i<8&&o>=8&&(l=l.next(function(){return u.Pe(t,c)})),i<9&&o>=9&&(l=l.next(function(){(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(t),function(f){var p=f.objectStore(bt.store);p.createIndex(bt.readTimeIndex,bt.readTimeIndexPath,{unique:!1}),p.createIndex(bt.collectionReadTimeIndex,bt.collectionReadTimeIndexPath,{unique:!1})}(r)})),i<10&&o>=10&&(l=l.next(function(){return u.Ve(c)})),i<11&&o>=11&&(l=l.next(function(){(function(f){f.createObjectStore(Ci.store,{keyPath:Ci.keyPath})})(t),function(f){f.createObjectStore(Ri.store,{keyPath:Ri.keyPath})}(t)})),l},e.prototype.be=function(t){var r=0;return t.store(bt.store).$t(function(i,o){r+=da(o)}).next(function(){var i=new nn(r);return t.store(nn.store).put(nn.key,i)})},e.prototype.Re=function(t){var r=this,i=t.store(Vn.store),o=t.store(ft.store);return i.Nt().next(function(u){return L.forEach(u,function(c){var l=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return o.Nt(ft.userMutationsIndex,l).next(function(f){return L.forEach(f,function(p){$(p.userId===c.userId);var g=gi(r.R,p);return f0(t,c.userId,g).next(function(){})})})})})},e.prototype.ve=function(t){var r=t.store(Kt.store),i=t.store(bt.store);return t.store(Ee.store).get(Ee.key).next(function(o){var u=[];return i.$t(function(c,l){var f=new ut(c),p=function(g){return[0,He(g)]}(f);u.push(r.get(p).next(function(g){return g?L.resolve():function(y){return r.put(new Kt(0,He(y),o.highestListenSequenceNumber))}(f)}))}).next(function(){return L.waitFor(u)})})},e.prototype.Pe=function(t,r){t.createObjectStore(Ir.store,{keyPath:Ir.keyPath});var i=r.store(Ir.store),o=new vd,u=function(c){if(o.add(c)){var l=c.lastSegment(),f=c.popLast();return i.put({collectionId:l,parent:He(f)})}};return r.store(bt.store).$t({Ft:!0},function(c,l){var f=new ut(c);return u(f.popLast())}).next(function(){return r.store(Qt.store).$t({Ft:!0},function(c,l){c[0];var f=c[1];c[2];var p=vn(f);return u(p.popLast())})})},e.prototype.Ve=function(t){var r=this,i=t.store(de.store);return i.$t(function(o,u){var c=Uo(u),l=l0(r.R,c);return i.put(l)})},e}();function Py(e){e.createObjectStore(Kt.store,{keyPath:Kt.keyPath}).createIndex(Kt.documentTargetsIndex,Kt.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(de.store,{keyPath:de.keyPath}).createIndex(de.queryTargetsIndexName,de.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Ee.store)}var Gl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Vk=function(){function e(t,r,i,o,u,c,l,f,p,g){if(this.allowTabSynchronization=t,this.persistenceKey=r,this.clientId=i,this.Se=u,this.window=c,this.document=l,this.De=p,this.Ce=g,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(y){return Promise.resolve()},!e.yt())throw new O(S.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pk(this,o),this.Le=r+"main",this.R=new c0(f),this.Be=new Oi(this.Le,11,new Uk(this.R)),this.qe=new Rk(this.referenceDelegate,this.R),this.Ut=new Dk,this.Ue=function(y,w){return new Mk(y,w)}(this.R,this.Ut),this.Ke=new Nk,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,g===!1&&Dt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new O(S.FAILED_PRECONDITION,Gl);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(r){return t.qe.getHighestSequenceNumber(r)})}).then(function(r){t.Ne=new _e(r,t.De)}).then(function(){t.xe=!0}).catch(function(r){return t.Be&&t.Be.close(),Promise.reject(r)})},e.prototype.He=function(t){var r=this;return this.Me=function(i){return D(r,void 0,void 0,function(){return k(this,function(o){return this.started?[2,t(i)]:[2]})})},t(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(t){var r=this;this.Be.vt(function(i){return D(r,void 0,void 0,function(){return k(this,function(o){switch(o.label){case 0:return i.newVersion===null?[4,t()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(t){var r=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return D(r,void 0,void 0,function(){return k(this,function(i){switch(i.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(r){return Ku(r).put(new gn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(r).next(function(i){i||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(r)}).next(function(i){return t.isPrimary&&!i?t.Xe(r).next(function(){return!1}):!!i&&t.Ze(r).next(function(){return!0})})}).catch(function(r){if(Lr(r))return P("IndexedDbPersistence","Failed to extend owner lease: ",r),t.isPrimary;if(!t.allowTabSynchronization)throw r;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",r),!1}).then(function(r){t.isPrimary!==r&&t.Se.enqueueRetryable(function(){return t.Me(r)}),t.isPrimary=r})},e.prototype.Je=function(t){var r=this;return Mo(t).get(Ie.key).next(function(i){return L.resolve(r.tn(i))})},e.prototype.en=function(t){return Ku(t).delete(this.clientId)},e.prototype.nn=function(){return D(this,void 0,void 0,function(){var t,r,i,o,u=this;return k(this,function(c){switch(c.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(l){var f=ge(l,gn.store);return f.Nt().next(function(p){var g=u.rn(p,18e5),y=p.filter(function(w){return g.indexOf(w)===-1});return L.forEach(y,function(w){return f.delete(w.clientId)}).next(function(){return y})})}).catch(function(){return[]})]);case 1:if(t=c.sent(),this.Qe)for(r=0,i=t;r<i.length;r++)o=i[r],this.Qe.removeItem(this.on(o.clientId));c.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},e.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.Ye=function(t){var r=this;return this.Ce?L.resolve(!0):Mo(t).get(Ie.key).next(function(i){if(i!==null&&r.sn(i.leaseTimestampMs,5e3)&&!r.cn(i.ownerId)){if(r.tn(i)&&r.networkEnabled)return!0;if(!r.tn(i)){if(!i.allowTabSynchronization)throw new O(S.FAILED_PRECONDITION,Gl);return!1}}return!(!r.networkEnabled||!r.inForeground)||Ku(t).Nt().next(function(o){return r.rn(o,5e3).find(function(u){if(r.clientId!==u.clientId){var c=!r.networkEnabled&&u.networkEnabled,l=!r.inForeground&&u.inForeground,f=r.networkEnabled===u.networkEnabled;if(c||l&&f)return!0}return!1})===void 0})}).next(function(i){return r.isPrimary!==i&&P("IndexedDbPersistence","Client "+(i?"is":"is not")+" eligible for a primary lease."),i})},e.prototype.shutdown=function(){return D(this,void 0,void 0,function(){var t=this;return k(this,function(r){switch(r.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ie.store,gn.store],function(i){var o=new Ay(i,_e.o);return t.Xe(o).next(function(){return t.en(o)})})];case 1:return r.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(t,r){var i=this;return t.filter(function(o){return i.sn(o.updateTimeMs,r)&&!i.cn(o.clientId)})},e.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(r){return Ku(r).Nt().next(function(i){return t.rn(i,18e5).map(function(o){return o.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(t){return Ck.Qt(t,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,r,i){var o=this;P("IndexedDbPersistence","Starting transaction:",t);var u,c=r==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(t,c,Tk,function(l){return u=new Ay(l,o.Ne?o.Ne.next():_e.o),r==="readwrite-primary"?o.Je(u).next(function(f){return!!f||o.Ye(u)}).next(function(f){if(!f)throw Dt("Failed to obtain primary lease for action '"+t+"'."),o.isPrimary=!1,o.Se.enqueueRetryable(function(){return o.Me(!1)}),new O(S.FAILED_PRECONDITION,s0);return i(u)}).next(function(f){return o.Ze(u).next(function(){return f})}):o.dn(u).next(function(){return i(u)})}).then(function(l){return u.raiseOnCommittedEvent(),l})},e.prototype.dn=function(t){var r=this;return Mo(t).get(Ie.key).next(function(i){if(i!==null&&r.sn(i.leaseTimestampMs,5e3)&&!r.cn(i.ownerId)&&!r.tn(i)&&!(r.Ce||r.allowTabSynchronization&&i.allowTabSynchronization))throw new O(S.FAILED_PRECONDITION,Gl)})},e.prototype.Ze=function(t){var r=new Ie(this.clientId,this.allowTabSynchronization,Date.now());return Mo(t).put(Ie.key,r)},e.yt=function(){return Oi.yt()},e.prototype.Xe=function(t){var r=this,i=Mo(t);return i.get(Ie.key).next(function(o){return r.tn(o)?(P("IndexedDbPersistence","Releasing primary lease."),i.delete(Ie.key)):L.resolve()})},e.prototype.sn=function(t,r){var i=Date.now();return!(t<i-r||t>i&&(Dt("Detected an update time that is in the future: "+t+" > "+i),1))},e.prototype.We=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground=t.document.visibilityState==="visible",t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var t,r=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ke=function(){r.un(),KS()&&navigator.appVersion.match("Version/14")&&r.Se.enterRestrictedMode(!0),r.Se.enqueueAndForget(function(){return r.shutdown()})},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(t){var r;try{var i=((r=this.Qe)===null||r===void 0?void 0:r.getItem(this.on(t)))!==null;return P("IndexedDbPersistence","Client '"+t+"' "+(i?"is":"is not")+" zombied in LocalStorage"),i}catch(o){return Dt("IndexedDbPersistence","Failed to get zombied client id.",o),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Dt("Failed to set zombie client id.",t)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},e.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function Mo(e){return ge(e,Ie.store)}function Ku(e){return ge(e,gn.store)}function gd(e,t){var r=e.projectId;return e.isDefaultDatabase||(r+="."+e.database),"firestore/"+t+"/"+r+"/"}var jk=function(e,t){this.progress=e,this.wn=t},g0=function(){function e(t,r,i){this.Ue=t,this._n=r,this.Ut=i}return e.prototype.mn=function(t,r){var i=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,r).next(function(o){return i.yn(t,r,o)})},e.prototype.yn=function(t,r,i){return this.Ue.getEntry(t,r).next(function(o){for(var u=0,c=i;u<c.length;u++)c[u].applyToLocalView(o);return o})},e.prototype.gn=function(t,r){t.forEach(function(i,o){for(var u=0,c=r;u<c.length;u++)c[u].applyToLocalView(o)})},e.prototype.pn=function(t,r){var i=this;return this.Ue.getEntries(t,r).next(function(o){return i.En(t,o).next(function(){return o})})},e.prototype.En=function(t,r){var i=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,r).next(function(o){return i.gn(r,o)})},e.prototype.getDocumentsMatchingQuery=function(t,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.Tn(t,r.path):sd(r)?this.In(t,r,i):this.An(t,r,i)},e.prototype.Tn=function(t,r){return this.mn(t,new K(r)).next(function(i){var o=pf();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})},e.prototype.In=function(t,r,i){var o=this,u=r.collectionGroup,c=pf();return this.Ut.getCollectionParents(t,u).next(function(l){return L.forEach(l,function(f){var p=function(g,y){return new bn(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(r,f.child(u));return o.An(t,p,i).next(function(g){g.forEach(function(y,w){c=c.insert(y,w)})})}).next(function(){return c})})},e.prototype.An=function(t,r,i){var o,u,c=this;return this.Ue.getDocumentsMatchingQuery(t,r,i).next(function(l){return o=l,c._n.getAllMutationBatchesAffectingQuery(t,r)}).next(function(l){return u=l,c.Rn(t,u,o).next(function(f){o=f;for(var p=0,g=u;p<g.length;p++)for(var y=g[p],w=0,I=y.mutations;w<I.length;w++){var E=I[w],_=E.key,A=o.get(_);A==null&&(A=zt.newInvalidDocument(_),o=o.insert(_,A)),df(E,A,y.localWriteTime),A.isFoundDocument()||(o=o.remove(_))}})}).next(function(){return o.forEach(function(l,f){ys(r,f)||(o=o.remove(l))}),o})},e.prototype.Rn=function(t,r,i){for(var o=ct(),u=0,c=r;u<c.length;u++)for(var l=0,f=c[u].mutations;l<f.length;l++){var p=f[l];p instanceof Hn&&i.get(p.key)===null&&(o=o.add(p.key))}var g=i;return this.Ue.getEntries(t,o).next(function(y){return y.forEach(function(w,I){I.isFoundDocument()&&(g=g.insert(w,I))}),g})},e}(),qk=function(){function e(t,r,i,o){this.targetId=t,this.fromCache=r,this.bn=i,this.vn=o}return e.Pn=function(t,r){for(var i=ct(),o=ct(),u=0,c=r.docChanges;u<c.length;u++){var l=c[u];switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}}return new e(t,r.fromCache,i,o)},e}(),m0=function(){function e(){}return e.prototype.Vn=function(t){this.Sn=t},e.prototype.getDocumentsMatchingQuery=function(t,r,i,o){var u=this;return function(c){return c.filters.length===0&&c.limit===null&&c.startAt==null&&c.endAt==null&&(c.explicitOrderBy.length===0||c.explicitOrderBy.length===1&&c.explicitOrderBy[0].field.isKeyField())}(r)||i.isEqual(J.min())?this.Dn(t,r):this.Sn.pn(t,o).next(function(c){var l=u.Cn(r,c);return(zu(r)||la(r))&&u.Nn(r.limitType,l,o,i)?u.Dn(t,r):(cf()<=ot.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ff(r)),u.Sn.getDocumentsMatchingQuery(t,r,i).next(function(f){return l.forEach(function(p){f=f.insert(p.key,p)}),f}))})},e.prototype.Cn=function(t,r){var i=new Pt(Mb(t));return r.forEach(function(o,u){ys(t,u)&&(i=i.add(u))}),i},e.prototype.Nn=function(t,r,i,o){if(i.size!==r.size)return!0;var u=t==="F"?r.last():r.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)},e.prototype.Dn=function(t,r){return cf()<=ot.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",ff(r)),this.Sn.getDocumentsMatchingQuery(t,r,J.min())},e}(),Bk=function(){function e(t,r,i,o){this.persistence=t,this.xn=r,this.R=o,this.kn=new Zt(et),this.Fn=new Hi(function(u){return gs(u)},Va),this.$n=J.min(),this._n=t.getMutationQueue(i),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new g0(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(t){var r=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(i){return t.collect(i,r.kn)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(e,t,r,i){return new Bk(e,t,r,i)}function w0(e,t){return D(this,void 0,void 0,function(){var r,i,o,u;return k(this,function(c){switch(c.label){case 0:return r=M(e),i=r._n,o=r.Mn,[4,r.persistence.runTransaction("Handle user change","readonly",function(l){var f;return r._n.getAllMutationBatches(l).next(function(p){return f=p,i=r.persistence.getMutationQueue(t),o=new g0(r.On,i,r.persistence.getIndexManager()),i.getAllMutationBatches(l)}).next(function(p){for(var g=[],y=[],w=ct(),I=0,E=f;I<E.length;I++){var _=E[I];g.push(_.batchId);for(var A=0,x=_.mutations;A<x.length;A++){var U=x[A];w=w.add(U.key)}}for(var C=0,W=p;C<W.length;C++){var F=W[C];y.push(F.batchId);for(var rt=0,T=F.mutations;rt<T.length;rt++){var jr=T[rt];w=w.add(jr.key)}}return o.pn(l,w).next(function(Pe){return{Ln:Pe,removedBatchIds:g,addedBatchIds:y}})})})];case 1:return u=c.sent(),[2,(r._n=i,r.Mn=o,r.xn.Vn(r.Mn),u)]}})})}function Kk(e,t){var r=M(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(i){var o=t.batch.keys(),u=r.On.newChangeBuffer({trackRemovals:!0});return function(c,l,f,p){var g=f.batch,y=g.keys(),w=L.resolve();return y.forEach(function(I){w=w.next(function(){return p.getEntry(l,I)}).next(function(E){var _=f.docVersions.get(I);$(_!==null),E.version.compareTo(_)<0&&(g.applyToRemoteDocument(E,f),E.isValidDocument()&&p.addEntry(E,f.commitVersion))})}),w.next(function(){return c._n.removeMutationBatch(l,g)})}(r,i,t,u).next(function(){return u.apply(i)}).next(function(){return r._n.performConsistencyCheck(i)}).next(function(){return r.Mn.pn(i,o)})})}function b0(e){var t=M(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(r){return t.qe.getLastRemoteSnapshotVersion(r)})}function Gk(e,t){var r=M(e),i=t.snapshotVersion,o=r.kn;return r.persistence.runTransaction("Apply remote event","readwrite-primary",function(u){var c=r.On.newChangeBuffer({trackRemovals:!0});o=r.kn;var l=[];t.targetChanges.forEach(function(g,y){var w=o.get(y);if(w){l.push(r.qe.removeMatchingKeys(u,g.removedDocuments,y).next(function(){return r.qe.addMatchingKeys(u,g.addedDocuments,y)}));var I=g.resumeToken;if(I.approximateByteSize()>0){var E=w.withResumeToken(I,i).withSequenceNumber(u.currentSequenceNumber);o=o.insert(y,E),function(_,A,x){return $(A.resumeToken.approximateByteSize()>0),_.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8||x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(w,E,g)&&l.push(r.qe.updateTargetData(u,E))}}});var f=Oe();if(t.documentUpdates.forEach(function(g,y){t.resolvedLimboDocuments.has(g)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(u,g))}),l.push(I0(u,c,t.documentUpdates,i,void 0).next(function(g){f=g})),!i.isEqual(J.min())){var p=r.qe.getLastRemoteSnapshotVersion(u).next(function(g){return r.qe.setTargetsMetadata(u,u.currentSequenceNumber,i)});l.push(p)}return L.waitFor(l).next(function(){return c.apply(u)}).next(function(){return r.Mn.En(u,f)}).next(function(){return f})}).then(function(u){return r.kn=o,u})}function I0(e,t,r,i,o){var u=ct();return r.forEach(function(c){return u=u.add(c)}),t.getEntries(e,u).next(function(c){var l=Oe();return r.forEach(function(f,p){var g=c.get(f),y=(o==null?void 0:o.get(f))||i;p.isNoDocument()&&p.version.isEqual(J.min())?(t.removeEntry(f,y),l=l.insert(f,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(p,y),l=l.insert(f,p)):P("LocalStore","Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",p.version)}),l})}function Hk(e,t){var r=M(e);return r.persistence.runTransaction("Get next mutation batch","readonly",function(i){return t===void 0&&(t=-1),r._n.getNextMutationBatchAfterBatchId(i,t)})}function Pi(e,t){var r=M(e);return r.persistence.runTransaction("Allocate target","readwrite",function(i){var o;return r.qe.getTargetData(i,t).next(function(u){return u?(o=u,L.resolve(o)):r.qe.allocateTargetId(i).next(function(c){return o=new Ka(t,c,0,i.currentSequenceNumber),r.qe.addTargetData(i,o).next(function(){return o})})})}).then(function(i){var o=r.kn.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(r.kn=r.kn.insert(i.targetId,i),r.Fn.set(t,i.targetId)),i})}function Mi(e,t,r){return D(this,void 0,void 0,function(){var i,o,u,c;return k(this,function(l){switch(l.label){case 0:i=M(e),o=i.kn.get(t),u=r?"readwrite":"readwrite-primary",l.label=1;case 1:return l.trys.push([1,4,,5]),r?[3,3]:[4,i.persistence.runTransaction("Release target",u,function(f){return i.persistence.referenceDelegate.removeTarget(f,o)})];case 2:l.sent(),l.label=3;case 3:return[3,5];case 4:if(!Lr(c=l.sent()))throw c;return P("LocalStore","Failed to update sequence numbers for target "+t+": "+c),[3,5];case 5:return i.kn=i.kn.remove(t),i.Fn.delete(o.target),[2]}})})}function va(e,t,r){var i=M(e),o=J.min(),u=ct();return i.persistence.runTransaction("Execute query","readonly",function(c){return function(l,f,p){var g=M(l),y=g.Fn.get(p);return y!==void 0?L.resolve(g.kn.get(y)):g.qe.getTargetData(f,p)}(i,c,xe(t)).next(function(l){if(l)return o=l.lastLimboFreeSnapshotVersion,i.qe.getMatchingKeysForTargetId(c,l.targetId).next(function(f){u=f})}).next(function(){return i.xn.getDocumentsMatchingQuery(c,t,r?o:J.min(),r?u:ct())}).next(function(l){return{documents:l,Bn:u}})})}function E0(e,t){var r=M(e),i=M(r.qe),o=r.kn.get(t);return o?Promise.resolve(o.target):r.persistence.runTransaction("Get target data","readonly",function(u){return i.lt(u,t).next(function(c){return c?c.target:null})})}function T0(e){var t=M(e);return t.persistence.runTransaction("Get new document changes","readonly",function(r){return function(i,o,u){var c=M(i),l=Oe(),f=dd(u),p=Ln(o),g=IDBKeyRange.lowerBound(f,!0);return p.$t({index:bt.readTimeIndex,range:g},function(y,w){var I=gf(c.R,w);l=l.insert(I.key,I),f=w.readTime}).next(function(){return{wn:l,readTime:h0(f)}})}(t.On,r,t.$n)}).then(function(r){var i=r.wn,o=r.readTime;return t.$n=o,i})}function zk(e){return D(this,void 0,void 0,function(){var t;return k(this,function(r){return[2,(t=M(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(i){return function(o){var u=Ln(o),c=J.min();return u.$t({index:bt.readTimeIndex,reverse:!0},function(l,f,p){f.readTime&&(c=h0(f.readTime)),p.done()}).next(function(){return c})}(i)}).then(function(i){t.$n=i})]})})}function $k(e,t,r,i){return D(this,void 0,void 0,function(){var o,u,c,l,f,p,g,y,w,I;return k(this,function(E){switch(E.label){case 0:for(o=M(e),u=ct(),c=Oe(),l=$b(),f=0,p=r;f<p.length;f++)g=p[f],y=t.qn(g.metadata.name),g.document&&(u=u.add(y)),c=c.insert(y,t.Un(g)),l=l.insert(y,t.Kn(g.metadata.readTime));return w=o.On.newChangeBuffer({trackRemovals:!0}),[4,Pi(o,function(_){return xe(Gi(ut.fromString("__bundle__/docs/"+_)))}(i))];case 1:return I=E.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",function(_){return I0(_,w,c,J.min(),l).next(function(A){return w.apply(_),A}).next(function(A){return o.qe.removeMatchingKeysForTargetId(_,I.targetId).next(function(){return o.qe.addMatchingKeys(_,u,I.targetId)}).next(function(){return o.Mn.En(_,A)}).next(function(){return A})})})]}})})}function Wk(e,t,r){return r===void 0&&(r=ct()),D(this,void 0,void 0,function(){var i,o;return k(this,function(u){switch(u.label){case 0:return[4,Pi(e,xe(pd(t.bundledQuery)))];case 1:return i=u.sent(),[2,(o=M(e)).persistence.runTransaction("Save named query","readwrite",function(c){var l=Vt(t.readTime);if(i.snapshotVersion.compareTo(l)>=0)return o.Ke.saveNamedQuery(c,t);var f=i.withResumeToken(ue.EMPTY_BYTE_STRING,l);return o.kn=o.kn.insert(f.targetId,f),o.qe.updateTargetData(c,f).next(function(){return o.qe.removeMatchingKeysForTargetId(c,i.targetId)}).next(function(){return o.qe.addMatchingKeys(c,r,i.targetId)}).next(function(){return o.Ke.saveNamedQuery(c,t)})})]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qk=function(){function e(t){this.R=t,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(t,r){return L.resolve(this.Qn.get(r))},e.prototype.saveBundleMetadata=function(t,r){var i;return this.Qn.set(r.id,{id:(i=r).id,version:i.version,createTime:Vt(i.createTime)}),L.resolve()},e.prototype.getNamedQuery=function(t,r){return L.resolve(this.jn.get(r))},e.prototype.saveNamedQuery=function(t,r){return this.jn.set(r.name,function(i){return{name:i.name,query:pd(i.bundledQuery),readTime:Vt(i.readTime)}}(r)),L.resolve()},e}(),md=function(){function e(){this.Wn=new Pt(Ft.Gn),this.zn=new Pt(Ft.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(t,r){var i=new Ft(t,r);this.Wn=this.Wn.add(i),this.zn=this.zn.add(i)},e.prototype.Jn=function(t,r){var i=this;t.forEach(function(o){return i.addReference(o,r)})},e.prototype.removeReference=function(t,r){this.Yn(new Ft(t,r))},e.prototype.Xn=function(t,r){var i=this;t.forEach(function(o){return i.removeReference(o,r)})},e.prototype.Zn=function(t){var r=this,i=new K(new ut([])),o=new Ft(i,t),u=new Ft(i,t+1),c=[];return this.zn.forEachInRange([o,u],function(l){r.Yn(l),c.push(l.key)}),c},e.prototype.ts=function(){var t=this;this.Wn.forEach(function(r){return t.Yn(r)})},e.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},e.prototype.es=function(t){var r=new K(new ut([])),i=new Ft(r,t),o=new Ft(r,t+1),u=ct();return this.zn.forEachInRange([i,o],function(c){u=u.add(c.key)}),u},e.prototype.containsKey=function(t){var r=new Ft(t,0),i=this.Wn.firstAfterOrEqual(r);return i!==null&&t.isEqual(i.key)},e}(),Ft=function(){function e(t,r){this.key=t,this.ns=r}return e.Gn=function(t,r){return K.comparator(t.key,r.key)||et(t.ns,r.ns)},e.Hn=function(t,r){return et(t.ns,r.ns)||K.comparator(t.key,r.key)},e}(),Xk=function(){function e(t,r){this.Ut=t,this.referenceDelegate=r,this._n=[],this.ss=1,this.rs=new Pt(Ft.Gn)}return e.prototype.checkEmpty=function(t){return L.resolve(this._n.length===0)},e.prototype.addMutationBatch=function(t,r,i,o){var u=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var c=new fd(u,r,i,o);this._n.push(c);for(var l=0,f=o;l<f.length;l++){var p=f[l];this.rs=this.rs.add(new Ft(p.key,u)),this.Ut.addToCollectionParentIndex(t,p.key.path.popLast())}return L.resolve(c)},e.prototype.lookupMutationBatch=function(t,r){return L.resolve(this.os(r))},e.prototype.getNextMutationBatchAfterBatchId=function(t,r){var i=r+1,o=this.cs(i),u=o<0?0:o;return L.resolve(this._n.length>u?this._n[u]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return L.resolve(this._n.length===0?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(t){return L.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,r){var i=this,o=new Ft(r,0),u=new Ft(r,Number.POSITIVE_INFINITY),c=[];return this.rs.forEachInRange([o,u],function(l){var f=i.os(l.ns);c.push(f)}),L.resolve(c)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,r){var i=this,o=new Pt(et);return r.forEach(function(u){var c=new Ft(u,0),l=new Ft(u,Number.POSITIVE_INFINITY);i.rs.forEachInRange([c,l],function(f){o=o.add(f.ns)})}),L.resolve(this.us(o))},e.prototype.getAllMutationBatchesAffectingQuery=function(t,r){var i=r.path,o=i.length+1,u=i;K.isDocumentKey(u)||(u=u.child(""));var c=new Ft(new K(u),0),l=new Pt(et);return this.rs.forEachWhile(function(f){var p=f.key.path;return!!i.isPrefixOf(p)&&(p.length===o&&(l=l.add(f.ns)),!0)},c),L.resolve(this.us(l))},e.prototype.us=function(t){var r=this,i=[];return t.forEach(function(o){var u=r.os(o);u!==null&&i.push(u)}),i},e.prototype.removeMutationBatch=function(t,r){var i=this;$(this.hs(r.batchId,"removed")===0),this._n.shift();var o=this.rs;return L.forEach(r.mutations,function(u){var c=new Ft(u.key,r.batchId);return o=o.delete(c),i.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(function(){i.rs=o})},e.prototype.Gt=function(t){},e.prototype.containsKey=function(t,r){var i=new Ft(r,0),o=this.rs.firstAfterOrEqual(i);return L.resolve(r.isEqual(o&&o.key))},e.prototype.performConsistencyCheck=function(t){return this._n.length,L.resolve()},e.prototype.hs=function(t,r){return this.cs(t)},e.prototype.cs=function(t){return this._n.length===0?0:t-this._n[0].batchId},e.prototype.os=function(t){var r=this.cs(t);return r<0||r>=this._n.length?null:this._n[r]},e}(),Yk=function(){function e(t,r){this.Ut=t,this.ls=r,this.docs=new Zt(K.comparator),this.size=0}return e.prototype.addEntry=function(t,r,i){var o=r.key,u=this.docs.get(o),c=u?u.size:0,l=this.ls(r);return this.docs=this.docs.insert(o,{document:r.clone(),size:l,readTime:i}),this.size+=l-c,this.Ut.addToCollectionParentIndex(t,o.path.popLast())},e.prototype.removeEntry=function(t){var r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)},e.prototype.getEntry=function(t,r){var i=this.docs.get(r);return L.resolve(i?i.document.clone():zt.newInvalidDocument(r))},e.prototype.getEntries=function(t,r){var i=this,o=Oe();return r.forEach(function(u){var c=i.docs.get(u);o=o.insert(u,c?c.document.clone():zt.newInvalidDocument(u))}),L.resolve(o)},e.prototype.getDocumentsMatchingQuery=function(t,r,i){for(var o=Oe(),u=new K(r.path.child("")),c=this.docs.getIteratorFrom(u);c.hasNext();){var l=c.getNext(),f=l.key,p=l.value,g=p.document,y=p.readTime;if(!r.path.isPrefixOf(f.path))break;y.compareTo(i)<=0||ys(r,g)&&(o=o.insert(g.key,g.clone()))}return L.resolve(o)},e.prototype.fs=function(t,r){return L.forEach(this.docs,function(i){return r(i)})},e.prototype.newChangeBuffer=function(t){return new Jk(this)},e.prototype.getSize=function(t){return L.resolve(this.size)},e}(),Jk=function(e){function t(r){var i=this;return(i=e.call(this)||this).Ie=r,i}return z(t,e),t.prototype.applyChanges=function(r){var i=this,o=[];return this.changes.forEach(function(u,c){c.document.isValidDocument()?o.push(i.Ie.addEntry(r,c.document,i.getReadTime(u))):i.Ie.removeEntry(u)}),L.waitFor(o)},t.prototype.getFromCache=function(r,i){return this.Ie.getEntry(r,i)},t.prototype.getAllFromCache=function(r,i){return this.Ie.getEntries(r,i)},t}(v0),Zk=function(){function e(t){this.persistence=t,this.ds=new Hi(function(r){return gs(r)},Va),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.ws=0,this._s=new md,this.targetCount=0,this.ys=pa.Jt()}return e.prototype.forEachTarget=function(t,r){return this.ds.forEach(function(i,o){return r(o)}),L.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(t){return L.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(t){return L.resolve(this.ws)},e.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),L.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(t,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.ws&&(this.ws=r),L.resolve()},e.prototype.te=function(t){this.ds.set(t.target,t);var r=t.targetId;r>this.highestTargetId&&(this.ys=new pa(r),this.highestTargetId=r),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},e.prototype.addTargetData=function(t,r){return this.te(r),this.targetCount+=1,L.resolve()},e.prototype.updateTargetData=function(t,r){return this.te(r),L.resolve()},e.prototype.removeTargetData=function(t,r){return this.ds.delete(r.target),this._s.Zn(r.targetId),this.targetCount-=1,L.resolve()},e.prototype.removeTargets=function(t,r,i){var o=this,u=0,c=[];return this.ds.forEach(function(l,f){f.sequenceNumber<=r&&i.get(f.targetId)===null&&(o.ds.delete(l),c.push(o.removeMatchingKeysForTargetId(t,f.targetId)),u++)}),L.waitFor(c).next(function(){return u})},e.prototype.getTargetCount=function(t){return L.resolve(this.targetCount)},e.prototype.getTargetData=function(t,r){var i=this.ds.get(r)||null;return L.resolve(i)},e.prototype.addMatchingKeys=function(t,r,i){return this._s.Jn(r,i),L.resolve()},e.prototype.removeMatchingKeys=function(t,r,i){this._s.Xn(r,i);var o=this.persistence.referenceDelegate,u=[];return o&&r.forEach(function(c){u.push(o.markPotentiallyOrphaned(t,c))}),L.waitFor(u)},e.prototype.removeMatchingKeysForTargetId=function(t,r){return this._s.Zn(r),L.resolve()},e.prototype.getMatchingKeysForTargetId=function(t,r){var i=this._s.es(r);return L.resolve(i)},e.prototype.containsKey=function(t,r){return L.resolve(this._s.containsKey(r))},e}(),tD=function(){function e(t,r){var i=this;this.gs={},this.Ne=new _e(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Zk(this),this.Ut=new kk,this.Ue=function(o,u){return new Yk(o,function(c){return i.referenceDelegate.ps(c)})}(this.Ut),this.R=new c0(r),this.Ke=new Qk(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(t){var r=this.gs[t.toKey()];return r||(r=new Xk(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=r),r},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,r,i){var o=this;P("MemoryPersistence","Starting transaction:",t);var u=new eD(this.Ne.next());return this.referenceDelegate.Es(),i(u).next(function(c){return o.referenceDelegate.Ts(u).next(function(){return c})}).toPromise().then(function(c){return u.raiseOnCommittedEvent(),c})},e.prototype.Is=function(t,r){return L.or(Object.values(this.gs).map(function(i){return function(){return i.containsKey(t,r)}}))},e}(),eD=function(e){function t(r){var i=this;return(i=e.call(this)||this).currentSequenceNumber=r,i}return z(t,e),t}(u0),nD=function(){function e(t){this.persistence=t,this.As=new md,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw B()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(t,r,i){return this.As.addReference(i,r),this.vs.delete(i.toString()),L.resolve()},e.prototype.removeReference=function(t,r,i){return this.As.removeReference(i,r),this.vs.add(i.toString()),L.resolve()},e.prototype.markPotentiallyOrphaned=function(t,r){return this.vs.add(r.toString()),L.resolve()},e.prototype.removeTarget=function(t,r){var i=this;this.As.Zn(r.targetId).forEach(function(u){return i.vs.add(u.toString())});var o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,r.targetId).next(function(u){u.forEach(function(c){return i.vs.add(c.toString())})}).next(function(){return o.removeTargetData(t,r)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(t){var r=this,i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.vs,function(o){var u=K.fromPath(o);return r.Ps(t,u).next(function(c){c||i.removeEntry(u)})}).next(function(){return r.Rs=null,i.apply(t)})},e.prototype.updateLimboDocument=function(t,r){var i=this;return this.Ps(t,r).next(function(o){o?i.vs.delete(r.toString()):i.vs.add(r.toString())})},e.prototype.ps=function(t){return 0},e.prototype.Ps=function(t,r){var i=this;return L.or([function(){return L.resolve(i.As.containsKey(r))},function(){return i.persistence.getTargetCache().containsKey(t,r)},function(){return i.persistence.Is(t,r)}])},e}(),Bt=function(){function e(t){this.uid=t}return e.prototype.isAuthenticated=function(){return this.uid!=null},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(e,t){return"firestore_clients_"+e+"_"+t}function Fy(e,t,r){var i="firestore_mutations_"+e+"_"+r;return t.isAuthenticated()&&(i+="_"+t.uid),i}function Hl(e,t){return"firestore_targets_"+e+"_"+t}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");var Uy=function(){function e(t,r,i,o){this.user=t,this.batchId=r,this.state=i,this.error=o}return e.Vs=function(t,r,i){var o,u=JSON.parse(i),c=typeof u=="object"&&["pending","acknowledged","rejected"].indexOf(u.state)!==-1&&(u.error===void 0||typeof u.error=="object");return c&&u.error&&(c=typeof u.error.message=="string"&&typeof u.error.code=="string")&&(o=new O(u.error.code,u.error.message)),c?new e(t,r,u.state,o):(Dt("SharedClientState","Failed to parse mutation state for ID '"+r+"': "+i),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),zl=function(){function e(t,r,i){this.targetId=t,this.state=r,this.error=i}return e.Vs=function(t,r){var i,o=JSON.parse(r),u=typeof o=="object"&&["not-current","current","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return u&&o.error&&(u=typeof o.error.message=="string"&&typeof o.error.code=="string")&&(i=new O(o.error.code,o.error.message)),u?new e(t,o.state,i):(Dt("SharedClientState","Failed to parse target state for ID '"+t+"': "+r),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),Vy=function(){function e(t,r){this.clientId=t,this.activeTargetIds=r}return e.Vs=function(t,r){for(var i=JSON.parse(r),o=typeof i=="object"&&i.activeTargetIds instanceof Array,u=Ba(),c=0;o&&c<i.activeTargetIds.length;++c)o=Cb(i.activeTargetIds[c]),u=u.add(i.activeTargetIds[c]);return o?new e(t,u):(Dt("SharedClientState","Failed to parse client data for instance '"+t+"': "+r),null)},e}(),rD=function(){function e(t,r){this.clientId=t,this.onlineState=r}return e.Vs=function(t){var r=JSON.parse(t);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new e(r.clientId,r.onlineState):(Dt("SharedClientState","Failed to parse online state: "+t),null)},e}(),mf=function(){function e(){this.activeTargetIds=Ba()}return e.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),$l=function(){function e(t,r,i,o,u){this.window=t,this.Se=r,this.persistenceKey=i,this.Ns=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Zt(et),this.started=!1,this.$s=[];var c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Os=My(this.persistenceKey,this.Ns),this.Ms=function(l){return"firestore_sequence_number_"+l}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new mf),this.Ls=new RegExp("^firestore_clients_"+c+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+c+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+c+"_(\\d+)$"),this.Us=function(l){return"firestore_online_state_"+l}(this.persistenceKey),this.Ks=function(l){return"firestore_bundle_loaded_"+l}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return D(this,void 0,void 0,function(){var t,r,i,o,u,c,l,f,p,g,y,w=this;return k(this,function(I){switch(I.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=I.sent(),r=0,i=t;r<i.length;r++)(o=i[r])!==this.Ns&&(u=this.getItem(My(this.persistenceKey,o)))&&(c=Vy.Vs(o,u))&&(this.Fs=this.Fs.insert(c.clientId,c));for(this.Qs(),(l=this.storage.getItem(this.Us))&&(f=this.js(l))&&this.Ws(f),p=0,g=this.$s;p<g.length;p++)y=g[p],this.ks(y);return this.$s=[],this.window.addEventListener("pagehide",function(){return w.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(t){var r=!1;return this.Fs.forEach(function(i,o){o.activeTargetIds.has(t)&&(r=!0)}),r},e.prototype.addPendingMutation=function(t){this.zs(t,"pending")},e.prototype.updateMutationState=function(t,r,i){this.zs(t,r,i),this.Hs(t)},e.prototype.addLocalQueryTarget=function(t){var r="not-current";if(this.isActiveQueryTarget(t)){var i=this.storage.getItem(Hl(this.persistenceKey,t));if(i){var o=zl.Vs(t,i);o&&(r=o.state)}}return this.Js.Ds(t),this.Qs(),r},e.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},e.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){this.removeItem(Hl(this.persistenceKey,t))},e.prototype.updateQueryState=function(t,r,i){this.Ys(t,r,i)},e.prototype.handleUserChange=function(t,r,i){var o=this;r.forEach(function(u){o.Hs(u)}),this.currentUser=t,i.forEach(function(u){o.addPendingMutation(u)})},e.prototype.setOnlineState=function(t){this.Xs(t)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(t){var r=this.storage.getItem(t);return P("SharedClientState","READ",t,r),r},e.prototype.setItem=function(t,r){P("SharedClientState","SET",t,r),this.storage.setItem(t,r)},e.prototype.removeItem=function(t){P("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.ks=function(t){var r=this,i=t;if(i.storageArea===this.storage){if(P("SharedClientState","EVENT",i.key,i.newValue),i.key===this.Os)return void Dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return D(r,void 0,void 0,function(){var o,u,c,l,f,p;return k(this,function(g){if(this.started){if(i.key!==null){if(this.Ls.test(i.key)){if(i.newValue==null)return o=this.ti(i.key),[2,this.ei(o,null)];if(u=this.ni(i.key,i.newValue))return[2,this.ei(u.clientId,u)]}else if(this.Bs.test(i.key)){if(i.newValue!==null&&(c=this.si(i.key,i.newValue)))return[2,this.ii(c)]}else if(this.qs.test(i.key)){if(i.newValue!==null&&(l=this.ri(i.key,i.newValue)))return[2,this.oi(l)]}else if(i.key===this.Us){if(i.newValue!==null&&(f=this.js(i.newValue)))return[2,this.Ws(f)]}else if(i.key===this.Ms)(p=function(y){var w=_e.o;if(y!=null)try{var I=JSON.parse(y);$(typeof I=="number"),w=I}catch(E){Dt("SharedClientState","Failed to read sequence number from WebStorage",E)}return w}(i.newValue))!==_e.o&&this.sequenceNumberHandler(p);else if(i.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(i);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(t,r,i){var o=new Uy(this.currentUser,t,r,i),u=Fy(this.persistenceKey,this.currentUser,t);this.setItem(u,o.Ss())},e.prototype.Hs=function(t){var r=Fy(this.persistenceKey,this.currentUser,t);this.removeItem(r)},e.prototype.Xs=function(t){var r={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(r))},e.prototype.Ys=function(t,r,i){var o=Hl(this.persistenceKey,t),u=new zl(t,r,i);this.setItem(o,u.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(t){var r=this.Ls.exec(t);return r?r[1]:null},e.prototype.ni=function(t,r){var i=this.ti(t);return Vy.Vs(i,r)},e.prototype.si=function(t,r){var i=this.Bs.exec(t),o=Number(i[1]),u=i[2]!==void 0?i[2]:null;return Uy.Vs(new Bt(u),o,r)},e.prototype.ri=function(t,r){var i=this.qs.exec(t),o=Number(i[1]);return zl.Vs(o,r)},e.prototype.js=function(t){return rD.Vs(t)},e.prototype.ii=function(t){return D(this,void 0,void 0,function(){return k(this,function(r){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(P("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},e.prototype.ei=function(t,r){var i=this,o=r?this.Fs.insert(t,r):this.Fs.remove(t),u=this.Gs(this.Fs),c=this.Gs(o),l=[],f=[];return c.forEach(function(p){u.has(p)||l.push(p)}),u.forEach(function(p){c.has(p)||f.push(p)}),this.syncEngine.hi(l,f).then(function(){i.Fs=o})},e.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},e.prototype.Gs=function(t){var r=Ba();return t.forEach(function(i,o){r=r.unionWith(o.activeTargetIds)}),r},e}(),_0=function(){function e(){this.li=new mf,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(t){},e.prototype.updateMutationState=function(t,r,i){},e.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},e.prototype.updateQueryState=function(t,r,i){this.fi[t]=r},e.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},e.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){delete this.fi[t]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.start=function(){return this.li=new mf,Promise.resolve()},e.prototype.handleUserChange=function(t,r,i){},e.prototype.setOnlineState=function(t){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(t){},e.prototype.notifyBundleLoaded=function(){},e}(),iD=function(){function e(){}return e.prototype.di=function(t){},e.prototype.shutdown=function(){},e}(),jy=function(){function e(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return e.prototype.di=function(t){this.gi.push(t)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,r=this.gi;t<r.length;t++)(0,r[t])(0)},e.prototype.yi=function(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,r=this.gi;t<r.length;t++)(0,r[t])(1)},e.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),oD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},sD=function(){function e(t){this.Ei=t.Ei,this.Ti=t.Ti}return e.prototype.Ii=function(t){this.Ai=t},e.prototype.Ri=function(t){this.bi=t},e.prototype.onMessage=function(t){this.vi=t},e.prototype.close=function(){this.Ti()},e.prototype.send=function(t){this.Ei(t)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(t){this.bi(t)},e.prototype.Si=function(t){this.vi(t)},e}(),uD=function(e){function t(r){var i=this;return(i=e.call(this,r)||this).forceLongPolling=r.forceLongPolling,i.autoDetectLongPolling=r.autoDetectLongPolling,i.useFetchStreams=r.useFetchStreams,i}return z(t,e),t.prototype.Fi=function(r,i,o,u){return new Promise(function(c,l){var f=new FN;f.listenOnce(LN.COMPLETE,function(){try{switch(f.getLastErrorCode()){case Kl.NO_ERROR:var g=f.getResponseJson();P("Connection","XHR received:",JSON.stringify(g)),c(g);break;case Kl.TIMEOUT:P("Connection",'RPC "'+r+'" timed out'),l(new O(S.DEADLINE_EXCEEDED,"Request time out"));break;case Kl.HTTP_ERROR:var y=f.getStatus();if(P("Connection",'RPC "'+r+'" failed with status:',y,"response text:",f.getResponseText()),y>0){var w=f.getResponseJson().error;if(w&&w.status&&w.message){var I=function(E){var _=E.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(_)>=0?_:S.UNKNOWN}(w.status);l(new O(I,w.message))}else l(new O(S.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new O(S.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{P("Connection",'RPC "'+r+'" completed.')}});var p=JSON.stringify(u);f.send(i,"POST",p,o,15)})},t.prototype.Oi=function(r,i){var o=[this.Di,"/","google.firestore.v1.Firestore","/",r,"/channel"],u=ON(),c=xN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new MN({})),this.ki(l.initMessageHeaders,i),MS()||VS()||jS()||qS()||BS()||US()||(l.httpHeadersOverwriteParam="$httpHeaders");var f=o.join("");P("Connection","Creating WebChannel: "+f,l);var p=u.createWebChannel(f,l),g=!1,y=!1,w=new sD({Ei:function(E){y?P("Connection","Not sending because WebChannel is closed:",E):(g||(P("Connection","Opening WebChannel transport."),p.open(),g=!0),P("Connection","WebChannel sending:",E),p.send(E))},Ti:function(){return p.close()}}),I=function(E,_,A){E.listen(_,function(x){try{A(x)}catch(U){setTimeout(function(){throw U},0)}})};return I(p,Vu.EventType.OPEN,function(){y||P("Connection","WebChannel transport opened.")}),I(p,Vu.EventType.CLOSE,function(){y||(y=!0,P("Connection","WebChannel transport closed"),w.Vi())}),I(p,Vu.EventType.ERROR,function(E){y||(y=!0,Yo("Connection","WebChannel transport errored:",E),w.Vi(new O(S.UNAVAILABLE,"The operation could not be completed")))}),I(p,Vu.EventType.MESSAGE,function(E){var _;if(!y){var A=E.data[0];$(!!A);var x=A,U=x.error||((_=x[0])===null||_===void 0?void 0:_.error);if(U){P("Connection","WebChannel received error:",U);var C=U.status,W=function(rt){var T=Nt[rt];if(T!==void 0)return zb(T)}(C),F=U.message;W===void 0&&(W=S.INTERNAL,F="Unknown error status: "+C+" with message "+U.message),y=!0,w.Vi(new O(W,F)),p.close()}else P("Connection","WebChannel received:",A),w.Si(A)}}),I(c,PN.STAT_EVENT,function(E){E.stat===ry.PROXY?P("Connection","Detected buffering proxy"):E.stat===ry.NOPROXY&&P("Connection","Detected no buffering proxy")}),setTimeout(function(){w.Pi()},0),w},t}(function(){function e(t){this.databaseInfo=t,this.databaseId=t.databaseId;var r=t.ssl?"https":"http";this.Di=r+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(t,r,i,o){var u=this.xi(t,r);P("RestConnection","Sending: ",u,i);var c={};return this.ki(c,o),this.Fi(t,u,c,i).then(function(l){return P("RestConnection","Received: ",l),l},function(l){throw Yo("RestConnection",t+" failed with error: ",l,"url: ",u,"request:",i),l})},e.prototype.$i=function(t,r,i,o){return this.Ni(t,r,i,o)},e.prototype.ki=function(t,r){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(var i in r.authHeaders)r.authHeaders.hasOwnProperty(i)&&(t[i]=r.authHeaders[i])},e.prototype.xi=function(t,r){var i=oD[t];return this.Di+"/v1/"+r+":"+i},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(){return typeof window<"u"?window:null}function Qu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(e){return new fk(e,!0)}var yd=function(){function e(t,r,i,o,u){i===void 0&&(i=1e3),o===void 0&&(o=1.5),u===void 0&&(u=6e4),this.Se=t,this.timerId=r,this.Mi=i,this.Li=o,this.Bi=u,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(t){var r=this;this.cancel();var i=Math.floor(this.qi+this.Wi()),o=Math.max(0,Date.now()-this.Ki),u=Math.max(0,i-o);u>0&&P("ExponentialBackoff","Backing off for "+u+" ms (base delay: "+this.qi+" ms, delay with jitter: "+i+" ms, last attempt: "+o+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,u,function(){return r.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),A0=function(){function e(t,r,i,o,u,c){this.Se=t,this.zi=i,this.Hi=o,this.Ji=u,this.listener=c,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new yd(t,r)}return e.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},e.prototype.er=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.nr()},e.prototype.stop=function(){return D(this,void 0,void 0,function(){return k(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var t=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},e.prototype.cr=function(t){this.ur(),this.stream.send(t)},e.prototype.rr=function(){return D(this,void 0,void 0,function(){return k(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(t,r){return D(this,void 0,void 0,function(){return k(this,function(i){switch(i.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,t!==3?this.Zi.reset():r&&r.code===S.RESOURCE_EXHAUSTED?(Dt(r.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):r&&r.code===S.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(r)];case 1:return i.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var t=this;this.state=1;var r=this.hr(this.Yi),i=this.Yi;this.Ji.getToken().then(function(o){t.Yi===i&&t.lr(o)},function(o){r(function(){var u=new O(S.UNKNOWN,"Fetching auth token failed: "+o.message);return t.dr(u)})})},e.prototype.lr=function(t){var r=this,i=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){i(function(){return r.state=2,r.listener.Ii()})}),this.stream.Ri(function(o){i(function(){return r.dr(o)})}),this.stream.onMessage(function(o){i(function(){return r.onMessage(o)})})},e.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return D(t,void 0,void 0,function(){return k(this,function(r){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(t){return P("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.hr=function(t){var r=this;return function(i){r.Se.enqueueAndForget(function(){return r.Yi===t?i():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),aD=function(e){function t(r,i,o,u,c){var l=this;return(l=e.call(this,r,"listen_stream_connection_backoff","listen_stream_idle",i,o,c)||this).R=u,l}return z(t,e),t.prototype.wr=function(r){return this.Hi.Oi("Listen",r)},t.prototype.onMessage=function(r){this.Zi.reset();var i=function(u,c){var l;if("targetChange"in c){c.targetChange;var f=function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:B()}(c.targetChange.targetChangeType||"NO_CHANGE"),p=c.targetChange.targetIds||[],g=function(A,x){return A.I?($(x===void 0||typeof x=="string"),ue.fromBase64String(x||"")):($(x===void 0||x instanceof Uint8Array),ue.fromUint8Array(x||new Uint8Array))}(u,c.targetChange.resumeToken),y=(w=c.targetChange.cause)&&function(A){var x=A.code===void 0?S.UNKNOWN:zb(A.code);return new O(x,A.message||"")}(w);l=new Qb(f,p,g,y||null)}else if("documentChange"in c){c.documentChange,(f=c.documentChange).document,f.document.name,f.document.updateTime,p=rn(u,f.document.name),g=Vt(f.document.updateTime);var w=new Te({mapValue:{fields:f.document.fields}}),I=(y=zt.newFoundDocument(p,g,w),f.targetIds||[]),E=f.removedTargetIds||[];l=new Wu(I,E,y.key,y)}else if("documentDelete"in c)c.documentDelete,(f=c.documentDelete).document,p=rn(u,f.document),g=f.readTime?Vt(f.readTime):J.min(),w=zt.newNoDocument(p,g),y=f.removedTargetIds||[],l=new Wu([],y,w.key,w);else if("documentRemove"in c)c.documentRemove,(f=c.documentRemove).document,p=rn(u,f.document),g=f.removedTargetIds||[],l=new Wu([],g,p,null);else{if(!("filter"in c))return B();c.filter;var _=c.filter;_.targetId,f=_.count||0,p=new rk(f),g=_.targetId,l=new Wb(g,p)}return l}(this.R,r),o=function(u){if(!("targetChange"in u))return J.min();var c=u.targetChange;return c.targetIds&&c.targetIds.length?J.min():c.readTime?Vt(c.readTime):J.min()}(r);return this.listener._r(i,o)},t.prototype.mr=function(r){var i={};i.database=rs(this.R),i.addTarget=function(u,c){var l,f=c.target;return(l=ca(f)?{documents:e0(u,f)}:{query:n0(u,f)}).targetId=c.targetId,c.resumeToken.approximateByteSize()>0?l.resumeToken=Xb(u,c.resumeToken):c.snapshotVersion.compareTo(J.min())>0&&(l.readTime=es(u,c.snapshotVersion.toTimestamp())),l}(this.R,r);var o=function(u,c){var l=function(f,p){switch(p){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return B()}}(0,c.purpose);return l==null?null:{"goog-listen-tags":l}}(this.R,r);o&&(i.labels=o),this.cr(i)},t.prototype.yr=function(r){var i={};i.database=rs(this.R),i.removeTarget=r,this.cr(i)},t}(A0),cD=function(e){function t(r,i,o,u,c){var l=this;return(l=e.call(this,r,"write_stream_connection_backoff","write_stream_idle",i,o,c)||this).R=u,l.gr=!1,l}return z(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(r){return this.Hi.Oi("Write",r)},t.prototype.onMessage=function(r){if($(!!r.streamToken),this.lastStreamToken=r.streamToken,this.gr){this.Zi.reset();var i=function(u,c){return u&&u.length>0?($(c!==void 0),u.map(function(l){return function(f,p){var g=f.updateTime?Vt(f.updateTime):Vt(p);return g.isEqual(J.min())&&(g=Vt(p)),new tk(g,f.transformResults||[])}(l,c)})):[]}(r.writeResults,r.commitTime),o=Vt(r.commitTime);return this.listener.Tr(o,i)}return $(!r.writeResults||r.writeResults.length===0),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var r={};r.database=rs(this.R),this.cr(r)},t.prototype.Er=function(r){var i=this,o={streamToken:this.lastStreamToken,writes:r.map(function(u){return fa(i.R,u)})};this.cr(o)},t}(A0),hD=function(e){function t(r,i,o){var u=this;return(u=e.call(this)||this).credentials=r,u.Hi=i,u.R=o,u.Rr=!1,u}return z(t,e),t.prototype.br=function(){if(this.Rr)throw new O(S.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(r,i,o){var u=this;return this.br(),this.credentials.getToken().then(function(c){return u.Hi.Ni(r,i,o,c)}).catch(function(c){throw c.name==="FirebaseError"?(c.code===S.UNAUTHENTICATED&&u.credentials.invalidateToken(),c):new O(S.UNKNOWN,c.toString())})},t.prototype.$i=function(r,i,o){var u=this;return this.br(),this.credentials.getToken().then(function(c){return u.Hi.$i(r,i,o,c)}).catch(function(c){throw c.name==="FirebaseError"?(c.code===S.UNAUTHENTICATED&&u.credentials.invalidateToken(),c):new O(S.UNKNOWN,c.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),lD=function(){function e(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var t=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(t){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},e.prototype.set=function(t){this.kr(),this.vr=0,t==="Online"&&(this.Vr=!1),this.Dr(t)},e.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},e.prototype.Cr=function(t){var r="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(Dt(r),this.Vr=!1):P("OnlineStateTracker",r)},e.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},e}(),fD=function(e,t,r,i,o){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di(function(c){r.enqueueAndForget(function(){return D(u,void 0,void 0,function(){return k(this,function(l){switch(l.label){case 0:return zn(this)?(P("RemoteStore","Restarting streams for network reachability change."),[4,function(f){return D(this,void 0,void 0,function(){var p;return k(this,function(g){switch(g.label){case 0:return(p=M(f)).Or.add(4),[4,zi(p)];case 1:return g.sent(),p.Br.set("Unknown"),p.Or.delete(4),[4,Ts(p)];case 2:return g.sent(),[2]}})})}(this)]):[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})})}),this.Br=new lD(r,i)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(e){return D(this,void 0,void 0,function(){var t,r;return k(this,function(i){switch(i.label){case 0:if(!zn(e))return[3,4];t=0,r=e.Mr,i.label=1;case 1:return t<r.length?[4,(0,r[t])(!0)]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function zi(e){return D(this,void 0,void 0,function(){var t,r;return k(this,function(i){switch(i.label){case 0:t=0,r=e.Mr,i.label=1;case 1:return t<r.length?[4,(0,r[t])(!1)]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Ga(e,t){var r=M(e);r.$r.has(t.targetId)||(r.$r.set(t.targetId,t),Id(r)?bd(r):Wi(r).er()&&wd(r,t))}function is(e,t){var r=M(e),i=Wi(r);r.$r.delete(t),i.er()&&N0(r,t),r.$r.size===0&&(i.er()?i.ir():zn(r)&&r.Br.set("Unknown"))}function wd(e,t){e.qr.U(t.targetId),Wi(e).mr(t)}function N0(e,t){e.qr.U(t),Wi(e).yr(t)}function bd(e){e.qr=new ck({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),Wi(e).start(),e.Br.Sr()}function Id(e){return zn(e)&&!Wi(e).tr()&&e.$r.size>0}function zn(e){return M(e).Or.size===0}function k0(e){e.qr=void 0}function dD(e){return D(this,void 0,void 0,function(){return k(this,function(t){return e.$r.forEach(function(r,i){wd(e,r)}),[2]})})}function pD(e,t){return D(this,void 0,void 0,function(){return k(this,function(r){return k0(e),Id(e)?(e.Br.Nr(t),bd(e)):e.Br.set("Unknown"),[2]})})}function vD(e,t,r){return D(this,void 0,void 0,function(){var i,o,u;return k(this,function(c){switch(c.label){case 0:if(e.Br.set("Online"),!(t instanceof Qb&&t.state===2&&t.cause))return[3,6];c.label=1;case 1:return c.trys.push([1,3,,5]),[4,function(l,f){return D(this,void 0,void 0,function(){var p,g,y,w;return k(this,function(I){switch(I.label){case 0:p=f.cause,g=0,y=f.targetIds,I.label=1;case 1:return g<y.length?(w=y[g],l.$r.has(w)?[4,l.remoteSyncer.rejectListen(w,p)]:[3,3]):[3,5];case 2:I.sent(),l.$r.delete(w),l.qr.removeTarget(w),I.label=3;case 3:I.label=4;case 4:return g++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return c.sent(),[3,5];case 3:return i=c.sent(),P("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),[4,ga(e,i)];case 4:return c.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Wu?e.qr.X(t):t instanceof Wb?e.qr.rt(t):e.qr.et(t),r.isEqual(J.min()))return[3,13];c.label=7;case 7:return c.trys.push([7,11,,13]),[4,b0(e.localStore)];case 8:return o=c.sent(),r.compareTo(o)>=0?[4,function(l,f){var p=l.qr.ut(f);return p.targetChanges.forEach(function(g,y){if(g.resumeToken.approximateByteSize()>0){var w=l.$r.get(y);w&&l.$r.set(y,w.withResumeToken(g.resumeToken,f))}}),p.targetMismatches.forEach(function(g){var y=l.$r.get(g);if(y){l.$r.set(g,y.withResumeToken(ue.EMPTY_BYTE_STRING,y.snapshotVersion)),N0(l,g);var w=new Ka(y.target,g,1,y.sequenceNumber);wd(l,w)}}),l.remoteSyncer.applyRemoteEvent(p)}(e,r)]:[3,10];case 9:c.sent(),c.label=10;case 10:return[3,13];case 11:return P("RemoteStore","Failed to raise snapshot:",u=c.sent()),[4,ga(e,u)];case 12:return c.sent(),[3,13];case 13:return[2]}})})}function ga(e,t,r){return D(this,void 0,void 0,function(){var i=this;return k(this,function(o){switch(o.label){case 0:if(!Lr(t))throw t;return e.Or.add(1),[4,zi(e)];case 1:return o.sent(),e.Br.set("Offline"),r||(r=function(){return b0(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return D(i,void 0,void 0,function(){return k(this,function(u){switch(u.label){case 0:return P("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return u.sent(),e.Or.delete(1),[4,Ts(e)];case 2:return u.sent(),[2]}})})}),[2]}})})}function D0(e,t){return t().catch(function(r){return ga(e,r,t)})}function $i(e){return D(this,void 0,void 0,function(){var t,r,i,o,u;return k(this,function(c){switch(c.label){case 0:t=M(e),r=Bn(t),i=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,c.label=1;case 1:if(!function(l){return zn(l)&&l.Fr.length<10}(t))return[3,7];c.label=2;case 2:return c.trys.push([2,4,,6]),[4,Hk(t.localStore,i)];case 3:return(o=c.sent())===null?(t.Fr.length===0&&r.ir(),[3,7]):(i=o.batchId,function(l,f){l.Fr.push(f);var p=Bn(l);p.er()&&p.pr&&p.Er(f.mutations)}(t,o),[3,6]);case 4:return u=c.sent(),[4,ga(t,u)];case 5:return c.sent(),[3,6];case 6:return[3,1];case 7:return C0(t)&&R0(t),[2]}})})}function C0(e){return zn(e)&&!Bn(e).tr()&&e.Fr.length>0}function R0(e){Bn(e).start()}function gD(e){return D(this,void 0,void 0,function(){return k(this,function(t){return Bn(e).Ar(),[2]})})}function mD(e){return D(this,void 0,void 0,function(){var t,r,i,o;return k(this,function(u){for(t=Bn(e),r=0,i=e.Fr;r<i.length;r++)o=i[r],t.Er(o.mutations);return[2]})})}function yD(e,t,r){return D(this,void 0,void 0,function(){var i,o;return k(this,function(u){switch(u.label){case 0:return i=e.Fr.shift(),o=Ak.from(i,t,r),[4,D0(e,function(){return e.remoteSyncer.applySuccessfulWrite(o)})];case 1:return u.sent(),[4,$i(e)];case 2:return u.sent(),[2]}})})}function wD(e,t){return D(this,void 0,void 0,function(){return k(this,function(r){switch(r.label){case 0:return t&&Bn(e).pr?[4,function(i,o){return D(this,void 0,void 0,function(){var u,c;return k(this,function(l){switch(l.label){case 0:return Hb(c=o.code)&&c!==S.ABORTED?(u=i.Fr.shift(),Bn(i).sr(),[4,D0(i,function(){return i.remoteSyncer.rejectFailedWrite(u.batchId,o)})]):[3,3];case 1:return l.sent(),[4,$i(i)];case 2:l.sent(),l.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return C0(e)&&R0(e),[2]}})})}function yf(e,t){return D(this,void 0,void 0,function(){var r;return k(this,function(i){switch(i.label){case 0:return r=M(e),t?(r.Or.delete(2),[4,Ts(r)]):[3,2];case 1:return i.sent(),[3,5];case 2:return t?[3,4]:(r.Or.add(2),[4,zi(r)]);case 3:i.sent(),r.Br.set("Unknown"),i.label=4;case 4:i.label=5;case 5:return[2]}})})}function Wi(e){var t=this;return e.Ur||(e.Ur=function(r,i,o){var u=M(r);return u.br(),new aD(i,u.Hi,u.credentials,u.R,o)}(e.datastore,e.asyncQueue,{Ii:dD.bind(null,e),Ri:pD.bind(null,e),_r:vD.bind(null,e)}),e.Mr.push(function(r){return D(t,void 0,void 0,function(){return k(this,function(i){switch(i.label){case 0:return r?(e.Ur.sr(),Id(e)?bd(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:i.sent(),k0(e),i.label=3;case 3:return[2]}})})})),e.Ur}function Bn(e){var t=this;return e.Kr||(e.Kr=function(r,i,o){var u=M(r);return u.br(),new cD(i,u.Hi,u.credentials,u.R,o)}(e.datastore,e.asyncQueue,{Ii:gD.bind(null,e),Ri:wD.bind(null,e),Ir:mD.bind(null,e),Tr:yD.bind(null,e)}),e.Mr.push(function(r){return D(t,void 0,void 0,function(){return k(this,function(i){switch(i.label){case 0:return r?(e.Kr.sr(),[4,$i(e)]):[3,2];case 1:return i.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:i.sent(),e.Fr.length>0&&(P("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),i.label=4;case 4:return[2]}})})})),e.Kr}var bD=function(){function e(t,r,i,o,u){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(c){})}return e.createAndSchedule=function(t,r,i,o,u){var c=new e(t,r,Date.now()+i,o,u);return c.start(i),c},e.prototype.start=function(t){var r=this;this.timerHandle=setTimeout(function(){return r.handleDelayElapsed()},t)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(S.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.timerHandle!==null?(t.clearTimeout(),t.op().then(function(r){return t.deferred.resolve(r)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function Qi(e,t){if(Dt("AsyncQueue",t+": "+e),Lr(e))return new O(S.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O0=function(){function e(t){this.comparator=t?function(r,i){return t(r,i)||K.comparator(r.key,i.key)}:function(r,i){return K.comparator(r.key,i.key)},this.keyedMap=pf(),this.sortedSet=new Zt(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(t){return this.keyedMap.get(t)!=null},e.prototype.get=function(t){return this.keyedMap.get(t)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(t){var r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(r,i){return t(r),!1})},e.prototype.add=function(t){var r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))},e.prototype.delete=function(t){var r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var r=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();r.hasNext();){var o=r.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(r){t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,r){var i=new e;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=r,i},e}(),qy=function(){function e(){this.Qr=new Zt(K.comparator)}return e.prototype.track=function(t){var r=t.doc.key,i=this.Qr.get(r);i?t.type!==0&&i.type===3?this.Qr=this.Qr.insert(r,t):t.type===3&&i.type!==1?this.Qr=this.Qr.insert(r,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Qr=this.Qr.insert(r,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Qr=this.Qr.insert(r,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Qr=this.Qr.remove(r):t.type===1&&i.type===2?this.Qr=this.Qr.insert(r,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Qr=this.Qr.insert(r,{type:2,doc:t.doc}):B():this.Qr=this.Qr.insert(r,t)},e.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(r,i){t.push(i)}),t},e}(),ma=function(){function e(t,r,i,o,u,c,l,f){this.query=t,this.docs=r,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=l,this.excludesMetadataChanges=f}return e.fromInitialDocuments=function(t,r,i,o){var u=[];return r.forEach(function(c){u.push({type:0,doc:c})}),new e(t,r,O0.emptySet(r),u,i,o,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ms(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var r=this.docChanges,i=t.docChanges;if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(r[o].type!==i[o].type||!r[o].doc.isEqual(i[o].doc))return!1;return!0},e}(),ID=function(){this.Wr=void 0,this.listeners=[]},ED=function(){this.queries=new Hi(function(e){return Pb(e)},ms),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(e,t){return D(this,void 0,void 0,function(){var r,i,o,u,c,l,f;return k(this,function(p){switch(p.label){case 0:if(r=M(e),i=t.query,o=!1,(u=r.queries.get(i))||(o=!0,u=new ID),!o)return[3,4];p.label=1;case 1:return p.trys.push([1,3,,4]),c=u,[4,r.onListen(i)];case 2:return c.Wr=p.sent(),[3,4];case 3:return l=p.sent(),f=Qi(l,"Initialization of query '"+ff(t.query)+"' failed"),[2,void t.onError(f)];case 4:return r.queries.set(i,u),u.listeners.push(t),t.zr(r.onlineState),u.Wr&&t.Hr(u.Wr)&&_d(r),[2]}})})}function Td(e,t){return D(this,void 0,void 0,function(){var r,i,o,u,c;return k(this,function(l){return r=M(e),i=t.query,o=!1,(u=r.queries.get(i))&&(c=u.listeners.indexOf(t))>=0&&(u.listeners.splice(c,1),o=u.listeners.length===0),o?[2,(r.queries.delete(i),r.onUnlisten(i))]:[2]})})}function TD(e,t){for(var r=M(e),i=!1,o=0,u=t;o<u.length;o++){var c=u[o],l=c.query,f=r.queries.get(l);if(f){for(var p=0,g=f.listeners;p<g.length;p++)g[p].Hr(c)&&(i=!0);f.Wr=c}}i&&_d(r)}function _D(e,t,r){var i=M(e),o=i.queries.get(t);if(o)for(var u=0,c=o.listeners;u<c.length;u++)c[u].onError(r);i.queries.delete(t)}function _d(e){e.Gr.forEach(function(t){t.next()})}var Sd=function(){function e(t,r,i){this.query=t,this.Jr=r,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=i||{}}return e.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var r=[],i=0,o=t.docChanges;i<o.length;i++){var u=o[i];u.type!==3&&r.push(u)}t=new ma(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var c=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),c=!0):this.eo(t,this.onlineState)&&(this.no(t),c=!0),this.Xr=t,c},e.prototype.onError=function(t){this.Jr.error(t)},e.prototype.zr=function(t){this.onlineState=t;var r=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),r=!0),r},e.prototype.eo=function(t,r){if(!t.fromCache)return!0;var i=r!=="Offline";return!(this.options.so&&i||t.docs.isEmpty()&&r!=="Offline")},e.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var r=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0},e.prototype.no=function(t){t=ma.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},e}(),SD=function(){function e(t,r){this.payload=t,this.byteLength=r}return e.prototype.io=function(){return"metadata"in this.payload},e}(),By=function(){function e(t){this.R=t}return e.prototype.qn=function(t){return rn(this.R,t)},e.prototype.Un=function(t){return t.metadata.exists?t0(this.R,t.document,!1):zt.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},e.prototype.Kn=function(t){return Vt(t)},e}(),AD=function(){function e(t,r,i){this.ro=t,this.localStore=r,this.R=i,this.queries=[],this.documents=[],this.progress=x0(t)}return e.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var r=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++r):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null},e.prototype.co=function(t){for(var r=new Map,i=new By(this.R),o=0,u=t;o<u.length;o++){var c=u[o];if(c.metadata.queries)for(var l=i.qn(c.metadata.name),f=0,p=c.metadata.queries;f<p.length;f++){var g=p[f],y=(r.get(g)||ct()).add(l);r.set(g,y)}}return r},e.prototype.complete=function(){return D(this,void 0,void 0,function(){var t,r,i,o,u;return k(this,function(c){switch(c.label){case 0:return[4,$k(this.localStore,new By(this.R),this.documents,this.ro.id)];case 1:t=c.sent(),r=this.co(this.documents),i=0,o=this.queries,c.label=2;case 2:return i<o.length?(u=o[i],[4,Wk(this.localStore,u,r.get(u.name))]):[3,5];case 3:c.sent(),c.label=4;case 4:return i++,[3,2];case 5:return[2,(this.progress.taskState="Success",new jk(Object.assign({},this.progress),t))]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L0=function(e){this.key=e},P0=function(e){this.key=e},M0=function(){function e(t,r){this.query=t,this.uo=r,this.ao=null,this.current=!1,this.ho=ct(),this.mutatedKeys=ct(),this.lo=Mb(t),this.fo=new O0(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(t,r){var i=this,o=r?r.mo:new qy,u=r?r.fo:this.fo,c=r?r.mutatedKeys:this.mutatedKeys,l=u,f=!1,p=zu(this.query)&&u.size===this.query.limit?u.last():null,g=la(this.query)&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal(function(w,I){var E=u.get(w),_=ys(i.query,I)?I:null,A=!!E&&i.mutatedKeys.has(E.key),x=!!_&&(_.hasLocalMutations||i.mutatedKeys.has(_.key)&&_.hasCommittedMutations),U=!1;E&&_?E.data.isEqual(_.data)?A!==x&&(o.track({type:3,doc:_}),U=!0):i.yo(E,_)||(o.track({type:2,doc:_}),U=!0,(p&&i.lo(_,p)>0||g&&i.lo(_,g)<0)&&(f=!0)):!E&&_?(o.track({type:0,doc:_}),U=!0):E&&!_&&(o.track({type:1,doc:E}),U=!0,(p||g)&&(f=!0)),U&&(_?(l=l.add(_),c=x?c.add(w):c.delete(w)):(l=l.delete(w),c=c.delete(w)))}),zu(this.query)||la(this.query))for(;l.size>this.query.limit;){var y=zu(this.query)?l.last():l.first();l=l.delete(y.key),c=c.delete(y.key),o.track({type:1,doc:y})}return{fo:l,mo:o,Nn:f,mutatedKeys:c}},e.prototype.yo=function(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations},e.prototype.applyChanges=function(t,r,i){var o=this,u=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var c=t.mo.jr();c.sort(function(g,y){return function(w,I){var E=function(_){switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return E(w)-E(I)}(g.type,y.type)||o.lo(g.doc,y.doc)}),this.po(i);var l=r?this.Eo():[],f=this.ho.size===0&&this.current?1:0,p=f!==this.ao;return this.ao=f,c.length!==0||p?{snapshot:new ma(this.query,t.fo,u,c,t.mutatedKeys,f===0,p,!1),To:l}:{To:l}},e.prototype.zr=function(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new qy,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},e.prototype.po=function(t){var r=this;t&&(t.addedDocuments.forEach(function(i){return r.uo=r.uo.add(i)}),t.modifiedDocuments.forEach(function(i){}),t.removedDocuments.forEach(function(i){return r.uo=r.uo.delete(i)}),this.current=t.current)},e.prototype.Eo=function(){var t=this;if(!this.current)return[];var r=this.ho;this.ho=ct(),this.fo.forEach(function(o){t.Io(o.key)&&(t.ho=t.ho.add(o.key))});var i=[];return r.forEach(function(o){t.ho.has(o)||i.push(new P0(o))}),this.ho.forEach(function(o){r.has(o)||i.push(new L0(o))}),i},e.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ct();var r=this._o(t.documents);return this.applyChanges(r,!0)},e.prototype.Ro=function(){return ma.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},e}(),ND=function(e,t,r){this.query=e,this.targetId=t,this.view=r},kD=function(e){this.key=e,this.bo=!1},DD=function(){function e(t,r,i,o,u,c){this.localStore=t,this.remoteStore=r,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.vo={},this.Po=new Hi(function(l){return Pb(l)},ms),this.Vo=new Map,this.So=new Set,this.Do=new Zt(K.comparator),this.Co=new Map,this.No=new md,this.xo={},this.ko=new Map,this.Fo=pa.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),e}();function CD(e,t){return D(this,void 0,void 0,function(){var r,i,o,u,c,l;return k(this,function(f){switch(f.label){case 0:return r=Cd(e),(u=r.Po.get(t))?(i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),o=u.view.Ro(),[3,4]):[3,1];case 1:return[4,Pi(r.localStore,xe(t))];case 2:return c=f.sent(),l=r.sharedClientState.addLocalQueryTarget(c.targetId),i=c.targetId,[4,Ad(r,t,i,l==="current")];case 3:o=f.sent(),r.isPrimaryClient&&Ga(r.remoteStore,c),f.label=4;case 4:return[2,o]}})})}function Ad(e,t,r,i){return D(this,void 0,void 0,function(){var o,u,c,l,f,p;return k(this,function(g){switch(g.label){case 0:return e.Oo=function(y,w,I){return function(E,_,A,x){return D(this,void 0,void 0,function(){var U,C,W;return k(this,function(F){switch(F.label){case 0:return U=_.view._o(A),U.Nn?[4,va(E.localStore,_.query,!1).then(function(rt){var T=rt.documents;return _.view._o(T,U)})]:[3,2];case 1:U=F.sent(),F.label=2;case 2:return C=x&&x.targetChanges.get(_.targetId),W=_.view.applyChanges(U,E.isPrimaryClient,C),[2,(wf(E,_.targetId,W.To),W.snapshot)]}})})}(e,y,w,I)},[4,va(e.localStore,t,!0)];case 1:return o=g.sent(),u=new M0(t,o.Bn),c=u._o(o.documents),l=cd.createSynthesizedTargetChangeForCurrentChange(r,i&&e.onlineState!=="Offline"),f=u.applyChanges(c,e.isPrimaryClient,l),wf(e,r,f.To),p=new ND(t,r,u),[2,(e.Po.set(t,p),e.Vo.has(r)?e.Vo.get(r).push(t):e.Vo.set(r,[t]),f.snapshot)]}})})}function RD(e,t){return D(this,void 0,void 0,function(){var r,i,o;return k(this,function(u){switch(u.label){case 0:return r=M(e),i=r.Po.get(t),(o=r.Vo.get(i.targetId)).length>1?[2,(r.Vo.set(i.targetId,o.filter(function(c){return!ms(c,t)})),void r.Po.delete(t))]:r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)?[3,2]:[4,Mi(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),is(r.remoteStore,i.targetId),Fi(r,i.targetId)}).catch(Pr)]):[3,3];case 1:u.sent(),u.label=2;case 2:return[3,5];case 3:return Fi(r,i.targetId),[4,Mi(r.localStore,i.targetId,!0)];case 4:u.sent(),u.label=5;case 5:return[2]}})})}function OD(e,t,r){return D(this,void 0,void 0,function(){var i,o,u,c;return k(this,function(l){switch(l.label){case 0:i=Rd(e),l.label=1;case 1:return l.trys.push([1,5,,6]),[4,function(f,p){var g,y=M(f),w=pe.now(),I=p.reduce(function(E,_){return E.add(_.key)},ct());return y.persistence.runTransaction("Locally write mutations","readwrite",function(E){return y.Mn.pn(E,I).next(function(_){g=_;for(var A=[],x=0,U=p;x<U.length;x++){var C=U[x],W=nk(C,g.get(C.key));W!=null&&A.push(new Hn(C.key,W,Rb(W.value.mapValue),Xt.exists(!0)))}return y._n.addMutationBatch(E,w,A,p)})}).then(function(E){return E.applyToLocalDocumentSet(g),{batchId:E.batchId,changes:g}})}(i.localStore,t)];case 2:return o=l.sent(),i.sharedClientState.addPendingMutation(o.batchId),function(f,p,g){var y=f.xo[f.currentUser.toKey()];y||(y=new Zt(et)),y=y.insert(p,g),f.xo[f.currentUser.toKey()]=y}(i,o.batchId,r),[4,In(i,o.changes)];case 3:return l.sent(),[4,$i(i.remoteStore)];case 4:return l.sent(),[3,6];case 5:return u=l.sent(),c=Qi(u,"Failed to persist write"),r.reject(c),[3,6];case 6:return[2]}})})}function F0(e,t){return D(this,void 0,void 0,function(){var r,i;return k(this,function(o){switch(o.label){case 0:r=M(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Gk(r.localStore,t)];case 2:return i=o.sent(),t.targetChanges.forEach(function(u,c){var l=r.Co.get(c);l&&($(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?l.bo=!0:u.modifiedDocuments.size>0?$(l.bo):u.removedDocuments.size>0&&($(l.bo),l.bo=!1))}),[4,In(r,i,t)];case 3:return o.sent(),[3,6];case 4:return[4,Pr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Ky(e,t,r){var i=M(e);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){var o=[];i.Po.forEach(function(u,c){var l=c.view.zr(t);l.snapshot&&o.push(l.snapshot)}),function(u,c){var l=M(u);l.onlineState=c;var f=!1;l.queries.forEach(function(p,g){for(var y=0,w=g.listeners;y<w.length;y++)w[y].zr(c)&&(f=!0)}),f&&_d(l)}(i.eventManager,t),o.length&&i.vo._r(o),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function xD(e,t,r){return D(this,void 0,void 0,function(){var i,o,u,c,l,f;return k(this,function(p){switch(p.label){case 0:return(i=M(e)).sharedClientState.updateQueryState(t,"rejected",r),o=i.Co.get(t),(u=o&&o.key)?(c=(c=new Zt(K.comparator)).insert(u,zt.newNoDocument(u,J.min())),l=ct().add(u),f=new ad(J.min(),new Map,new Pt(et),c,l),[4,F0(i,f)]):[3,2];case 1:return p.sent(),i.Do=i.Do.remove(u),i.Co.delete(t),Dd(i),[3,4];case 2:return[4,Mi(i.localStore,t,!1).then(function(){return Fi(i,t,r)}).catch(Pr)];case 3:p.sent(),p.label=4;case 4:return[2]}})})}function LD(e,t){return D(this,void 0,void 0,function(){var r,i,o;return k(this,function(u){switch(u.label){case 0:r=M(e),i=t.batch.batchId,u.label=1;case 1:return u.trys.push([1,4,,6]),[4,Kk(r.localStore,t)];case 2:return o=u.sent(),kd(r,i,null),Nd(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),[4,In(r,o)];case 3:return u.sent(),[3,6];case 4:return[4,Pr(u.sent())];case 5:return u.sent(),[3,6];case 6:return[2]}})})}function PD(e,t,r){return D(this,void 0,void 0,function(){var i,o;return k(this,function(u){switch(u.label){case 0:i=M(e),u.label=1;case 1:return u.trys.push([1,4,,6]),[4,function(c,l){var f=M(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",function(p){var g;return f._n.lookupMutationBatch(p,l).next(function(y){return $(y!==null),g=y.keys(),f._n.removeMutationBatch(p,y)}).next(function(){return f._n.performConsistencyCheck(p)}).next(function(){return f.Mn.pn(p,g)})})}(i.localStore,t)];case 2:return o=u.sent(),kd(i,t,r),Nd(i,t),i.sharedClientState.updateMutationState(t,"rejected",r),[4,In(i,o)];case 3:return u.sent(),[3,6];case 4:return[4,Pr(u.sent())];case 5:return u.sent(),[3,6];case 6:return[2]}})})}function MD(e,t){return D(this,void 0,void 0,function(){var r,i,o,u,c;return k(this,function(l){switch(l.label){case 0:zn((r=M(e)).remoteStore)||P("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,function(f){var p=M(f);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(g){return p._n.getHighestUnacknowledgedBatchId(g)})}(r.localStore)];case 2:return(i=l.sent())===-1?[2,void t.resolve()]:((o=r.ko.get(i)||[]).push(t),r.ko.set(i,o),[3,4]);case 3:return u=l.sent(),c=Qi(u,"Initialization of waitForPendingWrites() operation failed"),t.reject(c),[3,4];case 4:return[2]}})})}function Nd(e,t){(e.ko.get(t)||[]).forEach(function(r){r.resolve()}),e.ko.delete(t)}function kd(e,t,r){var i=M(e),o=i.xo[i.currentUser.toKey()];if(o){var u=o.get(t);u&&(r?u.reject(r):u.resolve(),o=o.remove(t)),i.xo[i.currentUser.toKey()]=o}}function Fi(e,t,r){r===void 0&&(r=null),e.sharedClientState.removeLocalQueryTarget(t);for(var i=0,o=e.Vo.get(t);i<o.length;i++){var u=o[i];e.Po.delete(u),r&&e.vo.Mo(u,r)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(c){e.No.containsKey(c)||U0(e,c)})}function U0(e,t){e.So.delete(t.path.canonicalString());var r=e.Do.get(t);r!==null&&(is(e.remoteStore,r),e.Do=e.Do.remove(t),e.Co.delete(r),Dd(e))}function wf(e,t,r){for(var i=0,o=r;i<o.length;i++){var u=o[i];u instanceof L0?(e.No.addReference(u.key,t),FD(e,u)):u instanceof P0?(P("SyncEngine","Document no longer in limbo: "+u.key),e.No.removeReference(u.key,t),e.No.containsKey(u.key)||U0(e,u.key)):B()}}function FD(e,t){var r=t.key,i=r.path.canonicalString();e.Do.get(r)||e.So.has(i)||(P("SyncEngine","New document in limbo: "+r),e.So.add(i),Dd(e))}function Dd(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var r=new K(ut.fromString(t)),i=e.Fo.next();e.Co.set(i,new kD(r)),e.Do=e.Do.insert(r,i),Ga(e.remoteStore,new Ka(xe(Gi(r.path)),i,2,_e.o))}}function In(e,t,r){return D(this,void 0,void 0,function(){var i,o,u,c;return k(this,function(l){switch(l.label){case 0:return i=M(e),o=[],u=[],c=[],i.Po.isEmpty()?[3,3]:(i.Po.forEach(function(f,p){c.push(i.Oo(p,t,r).then(function(g){if(g){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,g.fromCache?"not-current":"current"),o.push(g);var y=qk.Pn(p.targetId,g);u.push(y)}}))}),[4,Promise.all(c)]);case 1:return l.sent(),i.vo._r(o),[4,function(f,p){return D(this,void 0,void 0,function(){var g,y,w,I,E,_,A,x,U;return k(this,function(C){switch(C.label){case 0:g=M(f),C.label=1;case 1:return C.trys.push([1,3,,4]),[4,g.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(W){return L.forEach(p,function(F){return L.forEach(F.bn,function(rt){return g.persistence.referenceDelegate.addReference(W,F.targetId,rt)}).next(function(){return L.forEach(F.vn,function(rt){return g.persistence.referenceDelegate.removeReference(W,F.targetId,rt)})})})})];case 2:return C.sent(),[3,4];case 3:if(!Lr(y=C.sent()))throw y;return P("LocalStore","Failed to update sequence numbers: "+y),[3,4];case 4:for(w=0,I=p;w<I.length;w++)E=I[w],_=E.targetId,E.fromCache||(A=g.kn.get(_),x=A.snapshotVersion,U=A.withLastLimboFreeSnapshotVersion(x),g.kn=g.kn.insert(_,U));return[2]}})})}(i.localStore,u)];case 2:l.sent(),l.label=3;case 3:return[2]}})})}function UD(e,t){return D(this,void 0,void 0,function(){var r,i;return k(this,function(o){switch(o.label){case 0:return(r=M(e)).currentUser.isEqual(t)?[3,3]:(P("SyncEngine","User change. New user:",t.toKey()),[4,w0(r.localStore,t)]);case 1:return i=o.sent(),r.currentUser=t,function(u,c){u.ko.forEach(function(l){l.forEach(function(f){f.reject(new O(S.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.ko.clear()}(r),r.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),[4,In(r,i.Ln)];case 2:o.sent(),o.label=3;case 3:return[2]}})})}function VD(e,t){var r=M(e),i=r.Co.get(t);if(i&&i.bo)return ct().add(i.key);var o=ct(),u=r.Vo.get(t);if(!u)return o;for(var c=0,l=u;c<l.length;c++){var f=l[c],p=r.Po.get(f);o=o.unionWith(p.view.wo)}return o}function jD(e,t){return D(this,void 0,void 0,function(){var r,i,o;return k(this,function(u){switch(u.label){case 0:return[4,va((r=M(e)).localStore,t.query,!0)];case 1:return i=u.sent(),o=t.view.Ao(i),[2,(r.isPrimaryClient&&wf(r,t.targetId,o.To),o)]}})})}function qD(e){return D(this,void 0,void 0,function(){var t;return k(this,function(r){return[2,T0((t=M(e)).localStore).then(function(i){return In(t,i)})]})})}function BD(e,t,r,i){return D(this,void 0,void 0,function(){var o,u;return k(this,function(c){switch(c.label){case 0:return[4,function(l,f){var p=M(l),g=M(p._n);return p.persistence.runTransaction("Lookup mutation documents","readonly",function(y){return g.jt(y,f).next(function(w){return w?p.Mn.pn(y,w):L.resolve(null)})})}((o=M(e)).localStore,t)];case 1:return(u=c.sent())===null?[3,6]:r!=="pending"?[3,3]:[4,$i(o.remoteStore)];case 2:return c.sent(),[3,4];case 3:r==="acknowledged"||r==="rejected"?(kd(o,t,i||null),Nd(o,t),function(l,f){M(M(l)._n).Gt(f)}(o.localStore,t)):B(),c.label=4;case 4:return[4,In(o,u)];case 5:return c.sent(),[3,7];case 6:P("SyncEngine","Cannot apply mutation batch with id: "+t),c.label=7;case 7:return[2]}})})}function KD(e,t){return D(this,void 0,void 0,function(){var r,i,o,u,c,l,f,p;return k(this,function(g){switch(g.label){case 0:return Cd(r=M(e)),Rd(r),t!==!0||r.$o===!0?[3,3]:(i=r.sharedClientState.getAllActiveQueryTargets(),[4,Gy(r,i.toArray())]);case 1:return o=g.sent(),r.$o=!0,[4,yf(r.remoteStore,!0)];case 2:for(g.sent(),u=0,c=o;u<c.length;u++)l=c[u],Ga(r.remoteStore,l);return[3,7];case 3:return t!==!1||r.$o===!1?[3,7]:(f=[],p=Promise.resolve(),r.Vo.forEach(function(y,w){r.sharedClientState.isLocalQueryTarget(w)?f.push(w):p=p.then(function(){return Fi(r,w),Mi(r.localStore,w,!0)}),is(r.remoteStore,w)}),[4,p]);case 4:return g.sent(),[4,Gy(r,f)];case 5:return g.sent(),function(y){var w=M(y);w.Co.forEach(function(I,E){is(w.remoteStore,E)}),w.No.ts(),w.Co=new Map,w.Do=new Zt(K.comparator)}(r),r.$o=!1,[4,yf(r.remoteStore,!1)];case 6:g.sent(),g.label=7;case 7:return[2]}})})}function Gy(e,t,r){return D(this,void 0,void 0,function(){var i,o,u,c,l,f,p,g,y,w,I,E,_,A;return k(this,function(x){switch(x.label){case 0:i=M(e),o=[],u=[],c=0,l=t,x.label=1;case 1:return c<l.length?(f=l[c],p=void 0,(g=i.Vo.get(f))&&g.length!==0?[4,Pi(i.localStore,xe(g[0]))]:[3,7]):[3,13];case 2:p=x.sent(),y=0,w=g,x.label=3;case 3:return y<w.length?(I=w[y],E=i.Po.get(I),[4,jD(i,E)]):[3,6];case 4:(_=x.sent()).snapshot&&u.push(_.snapshot),x.label=5;case 5:return y++,[3,3];case 6:return[3,11];case 7:return[4,E0(i.localStore,f)];case 8:return A=x.sent(),[4,Pi(i.localStore,A)];case 9:return p=x.sent(),[4,Ad(i,V0(A),f,!1)];case 10:x.sent(),x.label=11;case 11:o.push(p),x.label=12;case 12:return c++,[3,1];case 13:return[2,(i.vo._r(u),o)]}})})}function V0(e){return xb(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function GD(e){var t=M(e);return M(M(t.localStore).persistence).fn()}function HD(e,t,r,i){return D(this,void 0,void 0,function(){var o,u,c;return k(this,function(l){switch(l.label){case 0:return(o=M(e)).$o?(P("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(t))return[3,8];switch(r){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,T0(o.localStore)];case 3:return u=l.sent(),c=ad.createSynthesizedRemoteEventForCurrentChange(t,r==="current"),[4,In(o,u,c)];case 4:return l.sent(),[3,8];case 5:return[4,Mi(o.localStore,t,!0)];case 6:return l.sent(),Fi(o,t,i),[3,8];case 7:B(),l.label=8;case 8:return[2]}})})}function zD(e,t,r){return D(this,void 0,void 0,function(){var i,o,u,c,l,f,p,g,y,w;return k(this,function(I){switch(I.label){case 0:if(!(i=Cd(e)).$o)return[3,10];o=0,u=t,I.label=1;case 1:return o<u.length?(c=u[o],i.Vo.has(c)?(P("SyncEngine","Adding an already active target "+c),[3,5]):[4,E0(i.localStore,c)]):[3,6];case 2:return l=I.sent(),[4,Pi(i.localStore,l)];case 3:return f=I.sent(),[4,Ad(i,V0(l),f.targetId,!1)];case 4:I.sent(),Ga(i.remoteStore,f),I.label=5;case 5:return o++,[3,1];case 6:p=function(E){return k(this,function(_){switch(_.label){case 0:return i.Vo.has(E)?[4,Mi(i.localStore,E,!1).then(function(){is(i.remoteStore,E),Fi(i,E)}).catch(Pr)]:[3,2];case 1:_.sent(),_.label=2;case 2:return[2]}})},g=0,y=r,I.label=7;case 7:return g<y.length?(w=y[g],[5,p(w)]):[3,10];case 8:I.sent(),I.label=9;case 9:return g++,[3,7];case 10:return[2]}})})}function Cd(e){var t=M(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=F0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=VD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xD.bind(null,t),t.vo._r=TD.bind(null,t.eventManager),t.vo.Mo=_D.bind(null,t.eventManager),t}function Rd(e){var t=M(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=LD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=PD.bind(null,t),t}function $D(e,t,r){var i=M(e);(function(o,u,c){return D(this,void 0,void 0,function(){var l,f,p,g,y,w;return k(this,function(I){switch(I.label){case 0:return I.trys.push([0,14,,15]),[4,u.getMetadata()];case 1:return l=I.sent(),[4,function(E,_){var A=M(E),x=Vt(_.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",function(U){return A.Ke.getBundleMetadata(U,_.id)}).then(function(U){return!!U&&U.createTime.compareTo(x)>=0})}(o.localStore,l)];case 2:return I.sent()?[4,u.close()]:[3,4];case 3:return[2,(I.sent(),void c._completeWith(function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}}(l)))];case 4:return c._updateProgress(x0(l)),f=new AD(l,o.localStore,u.R),[4,u.Lo()];case 5:p=I.sent(),I.label=6;case 6:return p?[4,f.oo(p)]:[3,10];case 7:return(g=I.sent())&&c._updateProgress(g),[4,u.Lo()];case 8:p=I.sent(),I.label=9;case 9:return[3,6];case 10:return[4,f.complete()];case 11:return y=I.sent(),[4,In(o,y.wn,void 0)];case 12:return I.sent(),[4,function(E,_){var A=M(E);return A.persistence.runTransaction("Save bundle","readwrite",function(x){return A.Ke.saveBundleMetadata(x,_)})}(o.localStore,l)];case 13:return I.sent(),c._completeWith(y.progress),[3,15];case 14:return Yo("SyncEngine","Loading bundle failed with "+(w=I.sent())),c._failWith(w),[3,15];case 15:return[2]}})})})(i,t,r).then(function(){i.sharedClientState.notifyBundleLoaded()})}var j0=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return D(this,void 0,void 0,function(){return k(this,function(r){switch(r.label){case 0:return this.R=Es(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return r.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},e.prototype.Uo=function(t){return null},e.prototype.Ko=function(t){return y0(this.persistence,new m0,t.initialUser,this.R)},e.prototype.qo=function(t){return new tD(nD.bs,this.R)},e.prototype.Bo=function(t){return new _0},e.prototype.terminate=function(){return D(this,void 0,void 0,function(){return k(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},e}(),q0=function(e){function t(r,i,o){var u=this;return(u=e.call(this)||this).Qo=r,u.cacheSizeBytes=i,u.forceOwnership=o,u.synchronizeTabs=!1,u}return z(t,e),t.prototype.initialize=function(r){return D(this,void 0,void 0,function(){var i=this;return k(this,function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,r)];case 1:return o.sent(),[4,zk(this.localStore)];case 2:return o.sent(),[4,this.Qo.initialize(this,r)];case 3:return o.sent(),[4,Rd(this.Qo.syncEngine)];case 4:return o.sent(),[4,$i(this.Qo.remoteStore)];case 5:return o.sent(),[4,this.persistence.He(function(){return i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()})];case 6:return o.sent(),[2]}})})},t.prototype.Ko=function(r){return y0(this.persistence,new m0,r.initialUser,this.R)},t.prototype.Uo=function(r){var i=this.persistence.referenceDelegate.garbageCollector;return new xk(i,r.asyncQueue)},t.prototype.qo=function(r){var i=gd(r.databaseInfo.databaseId,r.databaseInfo.persistenceKey),o=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new Vk(this.synchronizeTabs,i,r.clientId,o,r.asyncQueue,S0(),Qu(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(r){return new _0},t}(j0),WD=function(e){function t(r,i){var o=this;return(o=e.call(this,r,i,!1)||this).Qo=r,o.cacheSizeBytes=i,o.synchronizeTabs=!0,o}return z(t,e),t.prototype.initialize=function(r){return D(this,void 0,void 0,function(){var i,o=this;return k(this,function(u){switch(u.label){case 0:return[4,e.prototype.initialize.call(this,r)];case 1:return u.sent(),i=this.Qo.syncEngine,this.sharedClientState instanceof $l?(this.sharedClientState.syncEngine={ui:BD.bind(null,i),ai:HD.bind(null,i),hi:zD.bind(null,i),fn:GD.bind(null,i),ci:qD.bind(null,i)},[4,this.sharedClientState.start()]):[3,3];case 2:u.sent(),u.label=3;case 3:return[4,this.persistence.He(function(c){return D(o,void 0,void 0,function(){return k(this,function(l){switch(l.label){case 0:return[4,KD(this.Qo.syncEngine,c)];case 1:return l.sent(),this.gcScheduler&&(c&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):c||this.gcScheduler.stop()),[2]}})})})];case 4:return u.sent(),[2]}})})},t.prototype.Bo=function(r){var i=S0();if(!$l.yt(i))throw new O(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var o=gd(r.databaseInfo.databaseId,r.databaseInfo.persistenceKey);return new $l(i,r.asyncQueue,o,r.clientId,r.initialUser)},t}(q0),bf=function(){function e(){}return e.prototype.initialize=function(t,r){return D(this,void 0,void 0,function(){var i=this;return k(this,function(o){switch(o.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(u){return Ky(i.syncEngine,u,1)},this.remoteStore.remoteSyncer.handleCredentialChange=UD.bind(null,this.syncEngine),[4,yf(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(t){return new ED},e.prototype.createDatastore=function(t){var r,i=Es(t.databaseInfo.databaseId),o=(r=t.databaseInfo,new uD(r));return function(u,c,l){return new hD(u,c,l)}(t.credentials,o,i)},e.prototype.createRemoteStore=function(t){var r,i,o,u,c,l=this;return r=this.localStore,i=this.datastore,o=t.asyncQueue,u=function(f){return Ky(l.syncEngine,f,0)},c=jy.yt()?new jy:new iD,new fD(r,i,o,u,c)},e.prototype.createSyncEngine=function(t,r){return function(i,o,u,c,l,f,p){var g=new DD(i,o,u,c,l,f);return p&&(g.$o=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)},e.prototype.terminate=function(){return function(t){return D(this,void 0,void 0,function(){var r;return k(this,function(i){switch(i.label){case 0:return r=M(t),P("RemoteStore","RemoteStore shutting down."),r.Or.add(5),[4,zi(r)];case 1:return i.sent(),r.Lr.shutdown(),r.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(e,t){t===void 0&&(t=10240);var r=0;return{read:function(){return D(this,void 0,void 0,function(){var i;return k(this,function(o){return r<e.byteLength?(i={value:e.slice(r,r+t),done:!1},[2,(r+=t,i)]):[2,{done:!0}]})})},cancel:function(){return D(this,void 0,void 0,function(){return k(this,function(i){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ha=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(t,r){var i=this;this.muted||setTimeout(function(){i.muted||t(r)},0)},e}(),QD=function(){function e(t,r){var i=this;this.Go=t,this.R=r,this.metadata=new Jt,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(o){o&&o.io()?i.metadata.resolve(o.payload.metadata):i.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(o==null?void 0:o.payload)))},function(o){return i.metadata.reject(o)})}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return D(this,void 0,void 0,function(){return k(this,function(t){return[2,this.metadata.promise]})})},e.prototype.Lo=function(){return D(this,void 0,void 0,function(){return k(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},e.prototype.Ho=function(){return D(this,void 0,void 0,function(){var t,r,i,o;return k(this,function(u){switch(u.label){case 0:return[4,this.Jo()];case 1:return(t=u.sent())===null?[2,null]:(r=this.zo.decode(t),i=Number(r),isNaN(i)&&this.Yo("length string ("+r+") is not valid number"),[4,this.Xo(i)]);case 2:return o=u.sent(),[2,new SD(JSON.parse(o),t.length+i)]}})})},e.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t===123})},e.prototype.Jo=function(){return D(this,void 0,void 0,function(){var t,r;return k(this,function(i){switch(i.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(i.sent())return[3,3];i.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),r=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),r)])}})})},e.prototype.Xo=function(t){return D(this,void 0,void 0,function(){var r;return k(this,function(i){switch(i.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:i.sent()&&this.Yo("Reached the end of bundle when more is expected."),i.label=2;case 2:return[3,0];case 3:return r=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),r)]}})})},e.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},e.prototype.tc=function(){return D(this,void 0,void 0,function(){var t,r;return k(this,function(i){switch(i.label){case 0:return[4,this.Go.read()];case 1:return(t=i.sent()).done||((r=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),r.set(t.value,this.buffer.length),this.buffer=r),[2,t.done]}})})},e}(),XD=function(){function e(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(t){return D(this,void 0,void 0,function(){var r,i=this;return k(this,function(o){switch(o.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new O(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(u,c){return D(this,void 0,void 0,function(){var l,f,p,g,y,w;return k(this,function(I){switch(I.label){case 0:return l=M(u),f=rs(l.R)+"/documents",p={documents:c.map(function(E){return ns(l.R,E)})},[4,l.$i("BatchGetDocuments",f,p)];case 1:return g=I.sent(),y=new Map,g.forEach(function(E){var _=function(A,x){return"found"in x?function(U,C){$(!!C.found),C.found.name,C.found.updateTime;var W=rn(U,C.found.name),F=Vt(C.found.updateTime),rt=new Te({mapValue:{fields:C.found.fields}});return zt.newFoundDocument(W,F,rt)}(A,x):"missing"in x?function(U,C){$(!!C.missing),$(!!C.readTime);var W=rn(U,C.missing),F=Vt(C.readTime);return zt.newNoDocument(W,F)}(A,x):B()}(l.R,E);y.set(_.key.toString(),_)}),w=[],[2,(c.forEach(function(E){var _=y.get(E.toString());$(!!_),w.push(_)}),w)]}})})}(this.datastore,t)];case 1:return[2,((r=o.sent()).forEach(function(u){return i.recordVersion(u)}),r)]}})})},e.prototype.set=function(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.update=function(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())},e.prototype.delete=function(t){this.write(new Is(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.commit=function(){return D(this,void 0,void 0,function(){var t,r=this;return k(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(o){t.delete(o.key.toString())}),t.forEach(function(o,u){var c=K.fromPath(u);r.mutations.push(new ud(c,r.precondition(c)))}),[4,function(o,u){return D(this,void 0,void 0,function(){var c,l,f;return k(this,function(p){switch(p.label){case 0:return c=M(o),l=rs(c.R)+"/documents",f={writes:u.map(function(g){return fa(c.R,g)})},[4,c.Ni("Commit",l,f)];case 1:return p.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return i.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(t){var r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw B();r=J.min()}var i=this.readVersions.get(t.key.toString());if(i){if(!r.isEqual(i))throw new O(S.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)},e.prototype.precondition=function(t){var r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?Xt.updateTime(r):Xt.none()},e.prototype.preconditionForUpdate=function(t){var r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(J.min()))throw new O(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xt.updateTime(r)}return Xt.exists(!0)},e.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},e.prototype.ensureCommitNotCalled=function(){},e}(),YD=function(){function e(t,r,i,o){this.asyncQueue=t,this.datastore=r,this.updateFunction=i,this.deferred=o,this.ec=5,this.Zi=new yd(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var t=this;this.Zi.ji(function(){return D(t,void 0,void 0,function(){var r,i,o=this;return k(this,function(u){return r=new XD(this.datastore),(i=this.sc(r))&&i.then(function(c){o.asyncQueue.enqueueAndForget(function(){return r.commit().then(function(){o.deferred.resolve(c)}).catch(function(l){o.ic(l)})})}).catch(function(c){o.ic(c)}),[2]})})})},e.prototype.sc=function(t){try{var r=this.updateFunction(t);return!xr(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}},e.prototype.ic=function(t){var r=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return r.nc(),Promise.resolve()})):this.deferred.reject(t)},e.prototype.rc=function(t){if(t.name==="FirebaseError"){var r=t.code;return r==="aborted"||r==="failed-precondition"||!Hb(r)}return!1},e}(),JD=function(){function e(t,r,i){var o=this;this.credentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=Sb.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(r,function(u){return D(o,void 0,void 0,function(){return k(this,function(c){switch(c.label){case 0:return P("FirestoreClient","Received user=",u.uid),[4,this.credentialListener(u)];case 1:return c.sent(),this.user=u,[2]}})})})}return e.prototype.getConfiguration=function(){return D(this,void 0,void 0,function(){return k(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new O(S.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var r=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return D(t,void 0,void 0,function(){var i,o;return k(this,function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:u.sent(),u.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:u.sent(),u.label=4;case 4:return this.credentials.removeChangeListener(),r.resolve(),[3,6];case 5:return i=u.sent(),o=Qi(i,"Failed to shutdown persistence"),r.reject(o),[3,6];case 6:return[2]}})})}),r.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(e,t){return D(this,void 0,void 0,function(){var r,i,o=this;return k(this,function(u){switch(u.label){case 0:return e.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return r=u.sent(),[4,t.initialize(r)];case 2:return u.sent(),i=r.initialUser,e.setCredentialChangeListener(function(c){return D(o,void 0,void 0,function(){return k(this,function(l){switch(l.label){case 0:return i.isEqual(c)?[3,2]:[4,w0(t.localStore,c)];case 1:l.sent(),i=c,l.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function K0(e,t){return D(this,void 0,void 0,function(){var r,i;return k(this,function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,Od(e)];case 1:return r=o.sent(),P("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return i=o.sent(),[4,t.initialize(r,i)];case 3:return o.sent(),e.setCredentialChangeListener(function(u){return function(c,l){return D(this,void 0,void 0,function(){var f,p;return k(this,function(g){switch(g.label){case 0:return(f=M(c)).asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials"),p=zn(f),f.Or.add(3),[4,zi(f)];case 1:return g.sent(),p&&f.Br.set("Unknown"),[4,f.remoteSyncer.handleCredentialChange(l)];case 2:return g.sent(),f.Or.delete(3),[4,Ts(f)];case 3:return g.sent(),[2]}})})}(t.remoteStore,u)}),e.onlineComponents=t,[2]}})})}function Od(e){return D(this,void 0,void 0,function(){return k(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(P("FirestoreClient","Using default OfflineComponentProvider"),[4,B0(e,new j0)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function za(e){return D(this,void 0,void 0,function(){return k(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(P("FirestoreClient","Using default OnlineComponentProvider"),[4,K0(e,new bf)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function zy(e){return Od(e).then(function(t){return t.persistence})}function xd(e){return Od(e).then(function(t){return t.localStore})}function $y(e){return za(e).then(function(t){return t.remoteStore})}function Ld(e){return za(e).then(function(t){return t.syncEngine})}function Ui(e){return D(this,void 0,void 0,function(){var t,r;return k(this,function(i){switch(i.label){case 0:return[4,za(e)];case 1:return t=i.sent(),[2,((r=t.eventManager).onListen=CD.bind(null,t.syncEngine),r.onUnlisten=RD.bind(null,t.syncEngine),r)]}})})}function Wy(e,t,r){var i=this;r===void 0&&(r={});var o=new Jt;return e.asyncQueue.enqueueAndForget(function(){return D(i,void 0,void 0,function(){var u;return k(this,function(c){switch(c.label){case 0:return u=function(l,f,p,g,y){var w=new Ha({next:function(E){f.enqueueAndForget(function(){return Td(l,I)});var _=E.docs.has(p);!_&&E.fromCache?y.reject(new O(S.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&E.fromCache&&g&&g.source==="server"?y.reject(new O(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:function(E){return y.reject(E)}}),I=new Sd(Gi(p.path),w,{includeMetadataChanges:!0,so:!0});return Ed(l,I)},[4,Ui(e)];case 1:return[2,u.apply(void 0,[c.sent(),e.asyncQueue,t,r,o])]}})})}),o.promise}function Qy(e,t,r){var i=this;r===void 0&&(r={});var o=new Jt;return e.asyncQueue.enqueueAndForget(function(){return D(i,void 0,void 0,function(){var u;return k(this,function(c){switch(c.label){case 0:return u=function(l,f,p,g,y){var w=new Ha({next:function(E){f.enqueueAndForget(function(){return Td(l,I)}),E.fromCache&&g.source==="server"?y.reject(new O(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:function(E){return y.reject(E)}}),I=new Sd(p,w,{includeMetadataChanges:!0,so:!0});return Ed(l,I)},[4,Ui(e)];case 1:return[2,u.apply(void 0,[c.sent(),e.asyncQueue,t,r,o])]}})})}),o.promise}var ZD=function(e,t,r,i,o,u,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.useFetchStreams=l},ya=function(){function e(t,r){this.projectId=t,this.database=r||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),Xy=new Map,G0=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},Yy=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,r){this.changeListener=r,t.enqueueRetryable(function(){return r(Bt.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),tC=function(){function e(t){this.token=t,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,r){var i=this;this.changeListener=r,t.enqueueRetryable(function(){return r(i.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),eC=function(){function e(t){var r=this;this.currentUser=Bt.UNAUTHENTICATED,this.oc=new Jt,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){r.cc++,r.currentUser=r.ac(),r.oc.resolve(),r.changeListener&&r.asyncQueue.enqueueRetryable(function(){return r.changeListener(r.currentUser)})};var i=function(o){P("FirebaseCredentialsProvider","Auth detected"),r.auth=o,r.auth.addAuthTokenListener(r.uc)};t.onInit(function(o){return i(o)}),setTimeout(function(){if(!r.auth){var o=t.getImmediate({optional:!0});o?i(o):(P("FirebaseCredentialsProvider","Auth not yet detected"),r.oc.resolve())}},0)}return e.prototype.getToken=function(){var t=this,r=this.cc,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(function(o){return t.cc!==r?(P("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):o?($(typeof o.accessToken=="string"),new G0(o.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(t,r){var i=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return D(i,void 0,void 0,function(){return k(this,function(o){switch(o.label){case 0:return[4,this.oc.promise];case 1:return o.sent(),[4,r(this.currentUser)];case 2:return o.sent(),this.changeListener=r,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return $(t===null||typeof t=="string"),new Bt(t)},e}(),nC=function(){function e(t,r,i){this.hc=t,this.lc=r,this.fc=i,this.type="FirstParty",this.user=Bt.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},r=this.hc.auth.getAuthHeaderValueForFirstParty([]);return r&&(t.Authorization=r),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),e}(),rC=function(){function e(t,r,i){this.hc=t,this.lc=r,this.fc=i}return e.prototype.getToken=function(){return Promise.resolve(new nC(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(t,r){t.enqueueRetryable(function(){return r(Bt.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(e,t,r){if(!r)throw new O(S.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function Md(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new O(S.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function H0(e,t,r,i){if(t===!0&&i===!0)throw new O(S.INVALID_ARGUMENT,e+" and "+r+" cannot be used together.")}function Jy(e){if(!K.isDocumentKey(e))throw new O(S.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Zy(e){if(K.isDocumentKey(e))throw new O(S.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function $a(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(r){if(r.constructor){var i=/function\s+([^\s(]+)\s*\(/.exec(r.constructor.toString());if(i&&i.length>1)return i[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":B()}function st(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new O(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var r=$a(e);throw new O(S.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+r)}return e}function tw(e,t){if(t<=0)throw new O(S.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ew=function(){function e(t){var r;if(t.host===void 0){if(t.ssl!==void 0)throw new O(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(r=t.ssl)===null||r===void 0||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new O(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,H0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},e}(),os=function(){function e(t,r){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ew({}),this._settingsFrozen=!1,t instanceof ya?(this._databaseId=t,this._credentials=new Yy):(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new O(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(i.options.projectId)}(t),this._credentials=new eC(r))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new O(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(t){if(this._settingsFrozen)throw new O(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ew(t),t.credentials!==void 0&&(this._credentials=function(r){if(!r)return new Yy;switch(r.type){case"gapi":var i=r.client;return $(!(typeof i!="object"||i===null||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new rC(i,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new O(S.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return t=this,(r=Xy.get(t))&&(P("ComponentProvider","Removing Datastore"),Xy.delete(t),r.terminate()),Promise.resolve();var t,r},e}(),yt=function(){function e(t,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new jn(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),ve=function(){function e(t,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),jn=function(e){function t(r,i,o){var u=this;return(u=e.call(this,r,i,Gi(o))||this)._path=o,u.type="collection",u}return z(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var r=this._path.popLast();return r.isEmpty()?null:new yt(this.firestore,null,new K(r))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(r){return new t(this.firestore,r,this._path)},t}(ve);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(e,t){for(var r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(e=Ct(e),Pd("collection","path",t),e instanceof os)return Zy(r=ut.fromString.apply(ut,It([t],i))),new jn(e,null,r);if(!(e instanceof yt||e instanceof jn))throw new O(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Zy(r=ut.fromString.apply(ut,It([e.path],i)).child(ut.fromString(t))),new jn(e.firestore,null,r)}function Xu(e,t){for(var r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(e=Ct(e),arguments.length===1&&(t=Sb.u()),Pd("doc","path",t),e instanceof os)return Jy(r=ut.fromString.apply(ut,It([t],i))),new yt(e,null,new K(r));if(!(e instanceof yt||e instanceof jn))throw new O(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Jy(r=e._path.child(ut.fromString.apply(ut,It([t],i)))),new yt(e.firestore,e instanceof jn?e.converter:null,new K(r))}function $0(e,t){return e=Ct(e),t=Ct(t),(e instanceof yt||e instanceof jn)&&(t instanceof yt||t instanceof jn)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function W0(e,t){return e=Ct(e),t=Ct(t),e instanceof ve&&t instanceof ve&&e.firestore===t.firestore&&ms(e._query,t._query)&&e.converter===t.converter}var iC=function(){function e(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new yd(this,"async_queue_retry"),this.Ic=function(){var i=Qu();i&&P("AsyncQueue","Visibility state changed to "+i.visibilityState),t.Zi.Gi()};var r=Qu();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(t){this.enqueue(t)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},e.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var r=Qu();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(t){var r=this;if(this.Ac(),this._c)return new Promise(function(){});var i=new Jt;return this.Rc(function(){return r._c&&r.Ec?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)}).then(function(){return i.promise})},e.prototype.enqueueRetryable=function(t){var r=this;this.enqueueAndForget(function(){return r.wc.push(t),r.bc()})},e.prototype.bc=function(){return D(this,void 0,void 0,function(){var t,r=this;return k(this,function(i){switch(i.label){case 0:if(this.wc.length===0)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return i.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Lr(t=i.sent()))throw t;return P("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return r.bc()}),i.label=5;case 5:return[2]}})})},e.prototype.Rc=function(t){var r=this,i=this.dc.then(function(){return r.gc=!0,t().catch(function(o){throw r.yc=o,r.gc=!1,Dt("INTERNAL UNHANDLED ERROR: ",function(u){var c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),c}(o)),o}).then(function(o){return r.gc=!1,o})});return this.dc=i,i},e.prototype.enqueueAfterDelay=function(t,r,i){var o=this;this.Ac(),this.Tc.indexOf(t)>-1&&(r=0);var u=bD.createAndSchedule(this,t,r,i,function(c){return o.vc(c)});return this.mc.push(u),u},e.prototype.Ac=function(){this.yc&&B()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return D(this,void 0,void 0,function(){var t;return k(this,function(r){switch(r.label){case 0:return[4,t=this.dc];case 1:r.sent(),r.label=2;case 2:if(t!==this.dc)return[3,0];r.label=3;case 3:return[2]}})})},e.prototype.Vc=function(t){for(var r=0,i=this.mc;r<i.length;r++)if(i[r].timerId===t)return!0;return!1},e.prototype.Sc=function(t){var r=this;return this.Pc().then(function(){r.mc.sort(function(c,l){return c.targetTimeMs-l.targetTimeMs});for(var i=0,o=r.mc;i<o.length;i++){var u=o[i];if(u.skipDelay(),t!=="all"&&u.timerId===t)break}return r.Pc()})},e.prototype.Dc=function(t){this.Tc.push(t)},e.prototype.vc=function(t){var r=this.mc.indexOf(t);this.mc.splice(r,1)},e}();function Vi(e){return function(t,r){if(typeof t!="object"||t===null)return!1;for(var i=t,o=0,u=["next","error","complete"];o<u.length;o++){var c=u[o];if(c in i&&typeof i[c]=="function")return!0}return!1}(e)}var oC=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new Jt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(t,r,i){this._progressObserver={next:t,error:r,complete:i}},e.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},e.prototype.then=function(t,r){return this._taskCompletionResolver.promise.then(t,r)},e.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},e.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},e.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},e}(),sC=-1,St=function(e){function t(r,i){var o=this;return(o=e.call(this,r,i)||this).type="firestore",o._queue=new iC,o._persistenceKey="name"in r?r.name:"[DEFAULT]",o}return z(t,e),t.prototype._terminate=function(){return this._firestoreClient||Q0(this),this._firestoreClient.terminate()},t}(os);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(e){return e._firestoreClient||Q0(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Q0(e){var t,r=e._freezeSettings(),i=function(o,u,c,l){return new ZD(o,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new JD(e._credentials,e._queue,i)}function nw(e,t,r){var i=this,o=new Jt;return e.asyncQueue.enqueue(function(){return D(i,void 0,void 0,function(){var u;return k(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,B0(e,r)];case 1:return c.sent(),[4,K0(e,t)];case 2:return c.sent(),o.resolve(),[3,4];case 3:if(!function(l){return l.name==="FirebaseError"?l.code===S.FAILED_PRECONDITION||l.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(u=c.sent()))throw u;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function rw(e){if(e._initialized||e._terminated)throw new O(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on=function(){function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var i=0;i<t.length;++i)if(t[i].length===0)throw new O(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(t)}return e.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},e}(),Cr=function(){function e(t){this._byteString=t}return e.fromBase64String=function(t){try{return new e(ue.fromBase64String(t))}catch(r){throw new O(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}},e.fromUint8Array=function(t){return new e(ue.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},e}(),Mr=function(e){this._methodName=e},Wa=function(){function e(t,r){if(!isFinite(t)||t<-90||t>90)throw new O(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new O(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(t){return et(this._lat,t._lat)||et(this._long,t._long)},e}(),uC=/^__.*__$/,aC=function(){function e(t,r,i){this.data=t,this.fieldMask=r,this.fieldTransforms=i}return e.prototype.toMutation=function(t,r){return this.fieldMask!==null?new Hn(t,this.data,this.fieldMask,r,this.fieldTransforms):new bs(t,this.data,r,this.fieldTransforms)},e}(),X0=function(){function e(t,r,i){this.data=t,this.fieldMask=r,this.fieldTransforms=i}return e.prototype.toMutation=function(t,r){return new Hn(t,this.data,this.fieldMask,r,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}var J0=function(){function e(t,r,i,o,u,c){this.settings=t,this.databaseId=r,this.R=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Cc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(t){var r,i=(r=this.path)===null||r===void 0?void 0:r.child(t),o=this.xc({path:i,Fc:!1});return o.$c(t),o},e.prototype.Oc=function(t){var r,i=(r=this.path)===null||r===void 0?void 0:r.child(t),o=this.xc({path:i,Fc:!1});return o.Cc(),o},e.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(t){return wa(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(t){return this.fieldMask.find(function(r){return t.isPrefixOf(r)})!==void 0||this.fieldTransforms.find(function(r){return t.isPrefixOf(r.field)})!==void 0},e.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},e.prototype.$c=function(t){if(t.length===0)throw this.Lc("Document fields must not be empty");if(Y0(this.Nc)&&uC.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),cC=function(){function e(t,r,i){this.databaseId=t,this.ignoreUndefinedProperties=r,this.R=i||Es(t)}return e.prototype.Uc=function(t,r,i,o){return o===void 0&&(o=!1),new J0({Nc:t,methodName:r,qc:i,path:ze.emptyPath(),Fc:!1,Bc:o},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function Fr(e){var t=e._freezeSettings(),r=Es(e._databaseId);return new cC(e._databaseId,!!t.ignoreUndefinedProperties,r)}function Qa(e,t,r,i,o,u){u===void 0&&(u={});var c=e.Uc(u.merge||u.mergeFields?2:0,t,r,o);jd("Data must be an object, but it was:",c,i);var l,f,p=eI(i,c);if(u.merge)l=new _i(c.fieldMask),f=c.fieldTransforms;else if(u.mergeFields){for(var g=[],y=0,w=u.mergeFields;y<w.length;y++){var I=If(t,w[y],r);if(!c.contains(I))throw new O(S.INVALID_ARGUMENT,"Field '"+I+"' is specified in your field mask but missing from your input data.");rI(g,I)||g.push(I)}l=new _i(g),f=c.fieldTransforms.filter(function(E){return l.covers(E.field)})}else l=null,f=c.fieldTransforms;return new aC(new Te(p),l,f)}var Fd=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return z(t,e),t.prototype._toFieldTransform=function(r){if(r.Nc!==2)throw r.Nc===1?r.Lc(this._methodName+"() can only appear at the top level of your update data"):r.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return r.fieldMask.push(r.path),null},t.prototype.isEqual=function(r){return r instanceof t},t}(Mr);function Z0(e,t,r){return new J0({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:r},t.databaseId,t.R,t.ignoreUndefinedProperties)}var hC=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return z(t,e),t.prototype._toFieldTransform=function(r){return new ws(r.path,new ki)},t.prototype.isEqual=function(r){return r instanceof t},t}(Mr),lC=function(e){function t(r,i){var o=this;return(o=e.call(this,r)||this).Kc=i,o}return z(t,e),t.prototype._toFieldTransform=function(r){var i=Z0(this,r,!0),o=this.Kc.map(function(c){return Ur(c,i)}),u=new kr(o);return new ws(r.path,u)},t.prototype.isEqual=function(r){return this===r},t}(Mr),fC=function(e){function t(r,i){var o=this;return(o=e.call(this,r)||this).Kc=i,o}return z(t,e),t.prototype._toFieldTransform=function(r){var i=Z0(this,r,!0),o=this.Kc.map(function(c){return Ur(c,i)}),u=new Dr(o);return new ws(r.path,u)},t.prototype.isEqual=function(r){return this===r},t}(Mr),dC=function(e){function t(r,i){var o=this;return(o=e.call(this,r)||this).Qc=i,o}return z(t,e),t.prototype._toFieldTransform=function(r){var i=new Di(r.R,Vb(r.R,this.Qc));return new ws(r.path,i)},t.prototype.isEqual=function(r){return this===r},t}(Mr);function Ud(e,t,r,i){var o=e.Uc(1,t,r);jd("Data must be an object, but it was:",o,i);var u=[],c=Te.empty();Or(i,function(f,p){var g=qd(t,f,r);p=Ct(p);var y=o.Oc(g);if(p instanceof Fd)u.push(g);else{var w=Ur(p,y);w!=null&&(u.push(g),c.set(g,w))}});var l=new _i(u);return new X0(c,l,o.fieldTransforms)}function Vd(e,t,r,i,o,u){var c=e.Uc(1,t,r),l=[If(t,i,r)],f=[o];if(u.length%2!=0)throw new O(S.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var p=0;p<u.length;p+=2)l.push(If(t,u[p])),f.push(u[p+1]);for(var g=[],y=Te.empty(),w=l.length-1;w>=0;--w)if(!rI(g,l[w])){var I=l[w],E=f[w];E=Ct(E);var _=c.Oc(I);if(E instanceof Fd)g.push(I);else{var A=Ur(E,_);A!=null&&(g.push(I),y.set(I,A))}}var x=new _i(g);return new X0(y,x,c.fieldTransforms)}function tI(e,t,r,i){return i===void 0&&(i=!1),Ur(r,e.Uc(i?4:3,t))}function Ur(e,t){if(nI(e=Ct(e)))return jd("Unsupported field value:",t,e),eI(e,t);if(e instanceof Mr)return function(r,i){if(!Y0(i.Nc))throw i.Lc(r._methodName+"() can only be used with update() and set()");if(!i.path)throw i.Lc(r._methodName+"() is not currently supported inside arrays");var o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.Nc!==4)throw t.Lc("Nested arrays are not supported");return function(r,i){for(var o=[],u=0,c=0,l=r;c<l.length;c++){var f=Ur(l[c],i.Mc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}}(e,t)}return function(r,i){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vb(i.R,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){var o=pe.fromDate(r);return{timestampValue:es(i.R,o)}}if(r instanceof pe)return o=new pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3)),{timestampValue:es(i.R,o)};if(r instanceof Wa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cr)return{bytesValue:Xb(i.R,r._byteString)};if(r instanceof yt){o=i.databaseId;var u=r.firestore._databaseId;if(!u.isEqual(o))throw i.Lc("Document reference is for database "+u.projectId+"/"+u.database+" but should be for database "+o.projectId+"/"+o.database);return{referenceValue:hd(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Lc("Unsupported field value: "+$a(r))}(e,t)}function eI(e,t){var r={};return Nb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Or(e,function(i,o){var u=Ur(o,t.kc(i));u!=null&&(r[i]=u)}),{mapValue:{fields:r}}}function nI(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof pe||e instanceof Wa||e instanceof Cr||e instanceof yt||e instanceof Mr)}function jd(e,t,r){if(!nI(r)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(r)){var i=$a(r);throw i==="an object"?t.Lc(e+" a custom object"):t.Lc(e+" "+i)}}function If(e,t,r){if((t=Ct(t))instanceof on)return t._internalPath;if(typeof t=="string")return qd(e,t);throw wa("Field path arguments must be of type string or FieldPath.",e,!1,void 0,r)}var pC=new RegExp("[~\\*/\\[\\]]");function qd(e,t,r){if(t.search(pC)>=0)throw wa("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return new(on.bind.apply(on,It([void 0],t.split("."))))()._internalPath}catch{throw wa("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function wa(e,t,r,i,o){var u=i&&!i.isEmpty(),c=o!==void 0,l="Function "+t+"() called with invalid data";r&&(l+=" (via `toFirestore()`)");var f="";return(u||c)&&(f+=" (found",u&&(f+=" in field "+i),c&&(f+=" in document "+o),f+=")"),new O(S.INVALID_ARGUMENT,(l+=". ")+e+f)}function rI(e,t){return e.some(function(r){return r.isEqual(t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ss=function(){function e(t,r,i,o,u){this._firestore=t,this._userDataWriter=r,this._key=i,this._document=o,this._converter=u}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new yt(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this._document!==null},e.prototype.data=function(){if(this._document){if(this._converter){var t=new vC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(t){if(this._document){var r=this._document.data.field(ba("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}},e}(),vC=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return z(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(ss);function ba(e,t){return typeof t=="string"?qd(e,t):t instanceof on?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wr=function(){function e(t,r){this.hasPendingWrites=t,this.fromCache=r}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),mn=function(e){function t(r,i,o,u,c,l){var f=this;return(f=e.call(this,r,i,o,u,l)||this)._firestore=r,f._firestoreImpl=r,f.metadata=c,f}return z(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(r){if(r===void 0&&(r={}),this._document){if(this._converter){var i=new Ko(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,r)}return this._userDataWriter.convertValue(this._document.data.value,r.serverTimestamps)}},t.prototype.get=function(r,i){if(i===void 0&&(i={}),this._document){var o=this._document.data.field(ba("DocumentSnapshot.get",r));if(o!==null)return this._userDataWriter.convertValue(o,i.serverTimestamps)}},t}(ss),Ko=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return z(t,e),t.prototype.data=function(r){return r===void 0&&(r={}),e.prototype.data.call(this,r)},t}(mn),Fn=function(){function e(t,r,i,o){this._firestore=t,this._userDataWriter=r,this._snapshot=o,this.metadata=new wr(o.hasPendingWrites,o.fromCache),this.query=i}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(r){return t.push(r)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,r){var i=this;this._snapshot.docs.forEach(function(o){t.call(r,new Ko(i._firestore,i._userDataWriter,o.key,o,new wr(i._snapshot.mutatedKeys.has(o.key),i._snapshot.fromCache),i.query.converter))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new O(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){var u=0;return i._snapshot.docChanges.map(function(l){return{type:"added",doc:new Ko(i._firestore,i._userDataWriter,l.doc.key,l.doc,new wr(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:u++}})}var c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(function(l){return o||l.type!==3}).map(function(l){var f=new Ko(i._firestore,i._userDataWriter,l.doc.key,l.doc,new wr(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),p=-1,g=-1;return l.type!==0&&(p=c.indexOf(l.doc.key),c=c.delete(l.doc.key)),l.type!==1&&(g=(c=c.add(l.doc)).indexOf(l.doc.key)),{type:gC(l.type),doc:f,oldIndex:p,newIndex:g}})}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges},e}();function gC(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}function iI(e,t){return e instanceof mn&&t instanceof mn?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Fn&&t instanceof Fn&&e._firestore===t._firestore&&W0(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(e){if(la(e)&&e.explicitOrderBy.length===0)throw new O(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _s=function(){};function xn(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=0,o=t;i<o.length;i++){var u=o[i];e=u._apply(e)}return e}var mC=function(e){function t(r,i,o){var u=this;return(u=e.call(this)||this).jc=r,u.Wc=i,u.Gc=o,u.type="where",u}return z(t,e),t.prototype._apply=function(r){var i=Fr(r.firestore),o=function(u,c,l,f,p,g,y){var w;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new O(S.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+g+"' queries on FieldPath.documentId().");if(g==="in"||g==="not-in"){aw(y,g);for(var I=[],E=0,_=y;E<_.length;E++){var A=_[E];I.push(uw(f,u,A))}w={arrayValue:{values:I}}}else w=uw(f,u,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||aw(y,g),w=tI(l,"where",y,g==="in"||g==="not-in");var x=Se.create(p,g,w);return function(U,C){if(C.g()){var W=od(U);if(W!==null&&!W.isEqual(C.field))throw new O(S.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+W.toString()+"' and '"+C.field.toString()+"'");var F=id(U);F!==null&&uI(U,C.field,F)}var rt=function(T,jr){for(var Pe=0,Rs=T.filters;Pe<Rs.length;Pe++){var qr=Rs[Pe];if(jr.indexOf(qr.op)>=0)return qr.op}return null}(U,function(T){switch(T){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(C.op));if(rt!==null)throw rt===C.op?new O(S.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+C.op.toString()+"' filter."):new O(S.INVALID_ARGUMENT,"Invalid query. You cannot use '"+C.op.toString()+"' filters with '"+rt.toString()+"' filters.")}(u,x),x}(r._query,0,i,r.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ve(r.firestore,r.converter,function(u,c){var l=u.filters.concat([c]);return new bn(u.path,u.collectionGroup,u.explicitOrderBy.slice(),l,u.limit,u.limitType,u.startAt,u.endAt)}(r._query,o))},t}(_s),yC=function(e){function t(r,i){var o=this;return(o=e.call(this)||this).jc=r,o.zc=i,o.type="orderBy",o}return z(t,e),t.prototype._apply=function(r){var i=function(o,u,c){if(o.startAt!==null)throw new O(S.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new O(S.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var l=new bi(u,c);return function(f,p){if(id(f)===null){var g=od(f);g!==null&&uI(f,g,p.field)}}(o,l),l}(r._query,this.jc,this.zc);return new ve(r.firestore,r.converter,function(o,u){var c=o.explicitOrderBy.concat([u]);return new bn(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(r._query,i))},t}(_s),iw=function(e){function t(r,i,o){var u=this;return(u=e.call(this)||this).type=r,u.Hc=i,u.Jc=o,u}return z(t,e),t.prototype._apply=function(r){return new ve(r.firestore,r.converter,Lb(r._query,this.Hc,this.Jc))},t}(_s),ow=function(e){function t(r,i,o){var u=this;return(u=e.call(this)||this).type=r,u.Yc=i,u.Xc=o,u}return z(t,e),t.prototype._apply=function(r){var i=sI(r,this.type,this.Yc,this.Xc);return new ve(r.firestore,r.converter,function(o,u){return new bn(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)}(r._query,i))},t}(_s),sw=function(e){function t(r,i,o){var u=this;return(u=e.call(this)||this).type=r,u.Yc=i,u.Xc=o,u}return z(t,e),t.prototype._apply=function(r){var i=sI(r,this.type,this.Yc,this.Xc);return new ve(r.firestore,r.converter,function(o,u){return new bn(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)}(r._query,i))},t}(_s);function sI(e,t,r,i){if(r[0]=Ct(r[0]),r[0]instanceof ss)return function(u,c,l,f,p){if(!f)throw new O(S.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+l+"().");for(var g=[],y=0,w=Ni(u);y<w.length;y++){var I=w[y];if(I.field.isKeyField())g.push(aa(c,f.key));else{var E=f.data.field(I.field);if(ed(E))throw new O(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){var _=I.field.canonicalString();throw new O(S.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+_+"' (used as the orderBy) does not exist.")}g.push(E)}}return new ts(g,p)}(e._query,e.firestore._databaseId,t,r[0]._document,i);var o=Fr(e.firestore);return function(u,c,l,f,p,g){var y=u.explicitOrderBy;if(p.length>y.length)throw new O(S.INVALID_ARGUMENT,"Too many arguments provided to "+f+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var w=[],I=0;I<p.length;I++){var E=p[I];if(y[I].field.isKeyField()){if(typeof E!="string")throw new O(S.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+f+"(), but got a "+typeof E);if(!sd(u)&&E.indexOf("/")!==-1)throw new O(S.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+f+"() must be a plain document ID, but '"+E+"' contains a slash.");var _=u.path.child(ut.fromString(E));if(!K.isDocumentKey(_))throw new O(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+f+"() must result in a valid document path, but '"+_+"' is not because it contains an odd number of segments.");var A=new K(_);w.push(aa(c,A))}else{var x=tI(l,f,E);w.push(x)}}return new ts(w,g)}(e._query,e.firestore._databaseId,o,t,r,i)}function uw(e,t,r){if(typeof(r=Ct(r))=="string"){if(r==="")throw new O(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!sd(t)&&r.indexOf("/")!==-1)throw new O(S.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+r+"' contains a '/' character.");var i=t.path.child(ut.fromString(r));if(!K.isDocumentKey(i))throw new O(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+i+"' is not because it has an odd number of segments ("+i.length+").");return aa(e,new K(i))}if(r instanceof yt)return aa(e,r._key);throw new O(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$a(r)+".")}function aw(e,t){if(!Array.isArray(e)||e.length===0)throw new O(S.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new O(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function uI(e,t,r){if(!r.isEqual(t))throw new O(S.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+r.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bd=function(){function e(){}return e.prototype.convertValue=function(t,r){switch(r===void 0&&(r="none"),Nr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return kt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Si(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 10:return this.convertObject(t.mapValue,r);default:throw B()}},e.prototype.convertObject=function(t,r){var i=this,o={};return Or(t.fields,function(u,c){o[u]=i.convertValue(c,r)}),o},e.prototype.convertGeoPoint=function(t){return new Wa(kt(t.latitude),kt(t.longitude))},e.prototype.convertArray=function(t,r){var i=this;return(t.values||[]).map(function(o){return i.convertValue(o,r)})},e.prototype.convertServerTimestamp=function(t,r){switch(r){case"previous":var i=Db(t);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Jo(t));default:return null}},e.prototype.convertTimestamp=function(t){var r=qn(t);return new pe(r.seconds,r.nanos)},e.prototype.convertDocumentKey=function(t,r){var i=ut.fromString(t);$(o0(i));var o=new ya(i.get(1),i.get(3)),u=new K(i.popFirst(5));return o.isEqual(r)||Dt("Document "+u+" contains a document reference within a different database ("+o.projectId+"/"+o.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),u},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(e,t,r){return e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t}var wC=function(e){function t(r){var i=this;return(i=e.call(this)||this).firestore=r,i}return z(t,e),t.prototype.convertBytes=function(r){return new Cr(r)},t.prototype.convertReference=function(r){var i=this.convertDocumentKey(r,this.firestore._databaseId);return new yt(this.firestore,null,i)},t}(Bd),bC=function(){function e(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Fr(t)}return e.prototype.set=function(t,r,i){this._verifyNotCommitted();var o=Un(t,this._firestore),u=Xa(o.converter,r,i),c=Qa(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,i);return this._mutations.push(c.toMutation(o._key,Xt.none())),this},e.prototype.update=function(t,r,i){for(var o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];this._verifyNotCommitted();var c,l=Un(t,this._firestore);return c=typeof(r=Ct(r))=="string"||r instanceof on?Vd(this._dataReader,"WriteBatch.update",l._key,r,i,o):Ud(this._dataReader,"WriteBatch.update",l._key,r),this._mutations.push(c.toMutation(l._key,Xt.exists(!0))),this},e.prototype.delete=function(t){this._verifyNotCommitted();var r=Un(t,this._firestore);return this._mutations=this._mutations.concat(new Is(r._key,Xt.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new O(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(e,t){if((e=Ct(e)).firestore!==t)throw new O(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er=function(e){function t(r){var i=this;return(i=e.call(this)||this).firestore=r,i}return z(t,e),t.prototype.convertBytes=function(r){return new Cr(r)},t.prototype.convertReference=function(r){var i=this.convertDocumentKey(r,this.firestore._databaseId);return new yt(this.firestore,null,i)},t}(Bd);function cw(e,t,r){e=st(e,yt);var i=st(e.firestore,St),o=Xa(e.converter,t,r);return Ss(i,[Qa(Fr(i),"setDoc",e._key,o,e.converter!==null,r).toMutation(e._key,Xt.none())])}function hw(e,t,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];e=st(e,yt);var u=st(e.firestore,St),c=Fr(u);return Ss(u,[(typeof(t=Ct(t))=="string"||t instanceof on?Vd(c,"updateDoc",e._key,t,r,i):Ud(c,"updateDoc",e._key,t)).toMutation(e._key,Xt.exists(!0))])}function aI(e){for(var t,r,i,o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];e=Ct(e);var c={includeMetadataChanges:!1},l=0;typeof o[l]!="object"||Vi(o[l])||(c=o[l],l++);var f,p,g,y={includeMetadataChanges:c.includeMetadataChanges};if(Vi(o[l])){var w=o[l];o[l]=(t=w.next)===null||t===void 0?void 0:t.bind(w),o[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),o[l+2]=(i=w.complete)===null||i===void 0?void 0:i.bind(w)}if(e instanceof yt)p=st(e.firestore,St),g=Gi(e._key.path),f={next:function(_){o[l]&&o[l](Ef(p,e,_))},error:o[l+1],complete:o[l+2]};else{var I=st(e,ve);p=st(I.firestore,St),g=I._query;var E=new Er(p);f={next:function(_){o[l]&&o[l](new Fn(p,E,I,_))},error:o[l+1],complete:o[l+2]},oI(e._query)}return function(_,A,x,U){var C=this,W=new Ha(U),F=new Sd(A,W,x);return _.asyncQueue.enqueueAndForget(function(){return D(C,void 0,void 0,function(){var rt;return k(this,function(T){switch(T.label){case 0:return rt=Ed,[4,Ui(_)];case 1:return[2,rt.apply(void 0,[T.sent(),F])]}})})}),function(){W.Wo(),_.asyncQueue.enqueueAndForget(function(){return D(C,void 0,void 0,function(){var rt;return k(this,function(T){switch(T.label){case 0:return rt=Td,[4,Ui(_)];case 1:return[2,rt.apply(void 0,[T.sent(),F])]}})})})}}(Ut(p),g,y,f)}function Ss(e,t){return function(r,i){var o=this,u=new Jt;return r.asyncQueue.enqueueAndForget(function(){return D(o,void 0,void 0,function(){var c;return k(this,function(l){switch(l.label){case 0:return c=OD,[4,Ld(r)];case 1:return[2,c.apply(void 0,[l.sent(),i,u])]}})})}),u.promise}(Ut(e),t)}function Ef(e,t,r){var i=r.docs.get(t._key),o=new Er(e);return new mn(e,o,t._key,i,new wr(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IC=function(e){function t(r,i){var o=this;return(o=e.call(this,r,i)||this)._firestore=r,o}return z(t,e),t.prototype.get=function(r){var i=this,o=Un(r,this._firestore),u=new Er(this._firestore);return e.prototype.get.call(this,r).then(function(c){return new mn(i._firestore,u,o._key,c._document,new wr(!1,!1),o.converter)})},t}(function(){function e(t,r){this._firestore=t,this._transaction=r,this._dataReader=Fr(t)}return e.prototype.get=function(t){var r=this,i=Un(t,this._firestore),o=new wC(this._firestore);return this._transaction.lookup([i._key]).then(function(u){if(!u||u.length!==1)return B();var c=u[0];if(c.isFoundDocument())return new ss(r._firestore,o,c.key,c,i.converter);if(c.isNoDocument())return new ss(r._firestore,o,i._key,null,i.converter);throw B()})},e.prototype.set=function(t,r,i){var o=Un(t,this._firestore),u=Xa(o.converter,r,i),c=Qa(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,i);return this._transaction.set(o._key,c),this},e.prototype.update=function(t,r,i){for(var o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];var c,l=Un(t,this._firestore);return c=typeof(r=Ct(r))=="string"||r instanceof on?Vd(this._dataReader,"Transaction.update",l._key,r,i,o):Ud(this._dataReader,"Transaction.update",l._key,r),this._transaction.update(l._key,c),this},e.prototype.delete=function(t){var r=Un(t,this._firestore);return this._transaction.delete(r._key),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(){if(typeof Uint8Array>"u")throw new O(S.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function fw(){if(typeof atob>"u")throw new O(S.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var cI=function(){function e(t){this._delegate=t}return e.fromBase64String=function(t){return fw(),new e(Cr.fromBase64String(t))},e.fromUint8Array=function(t){return lw(),new e(Cr.fromUint8Array(t))},e.prototype.toBase64=function(){return fw(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return lw(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),EC=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,r){return function(i,o){rw(i=st(i,St));var u=Ut(i),c=i._freezeSettings(),l=new bf;return nw(u,l,new q0(l,c.cacheSizeBytes,o==null?void 0:o.forceOwnership))}(t._delegate,{forceOwnership:r})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(r){rw(r=st(r,St));var i=Ut(r),o=r._freezeSettings(),u=new bf;return nw(i,u,new WD(u,o.cacheSizeBytes))}(t._delegate)},e.prototype.clearIndexedDbPersistence=function(t){return function(r){var i=this;if(r._initialized&&!r._terminated)throw new O(S.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var o=new Jt;return r._queue.enqueueAndForgetEvenWhileRestricted(function(){return D(i,void 0,void 0,function(){var u;return k(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,function(l){return D(this,void 0,void 0,function(){var f;return k(this,function(p){switch(p.label){case 0:return Oi.yt()?(f=l+"main",[4,Oi.delete(f)]):[2,Promise.resolve()];case 1:return p.sent(),[2]}})})}(gd(r._databaseId,r._persistenceKey))];case 1:return c.sent(),o.resolve(),[3,3];case 2:return u=c.sent(),o.reject(u),[3,3];case 3:return[2]}})})}),o.promise}(t._delegate)},e}(),hI=function(){function e(t,r,i){var o=this;this._delegate=r,this.Zc=i,this.INTERNAL={delete:function(){return o.terminate()}},t instanceof ya||(this.tu=t)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){var r=this._delegate._getSettings();t.merge||r.host===t.host||Yo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},r),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,r,i){i===void 0&&(i={}),function(o,u,c,l){var f;l===void 0&&(l={});var p=(o=st(o,os))._getSettings();if(p.host!=="firestore.googleapis.com"&&p.host!==u&&Yo("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},p),{host:u+":"+c,ssl:!1})),l.mockUserToken){var g,y;if(typeof l.mockUserToken=="string")g=l.mockUserToken,y=Bt.MOCK_USER;else{g=PS(l.mockUserToken,(f=o._app)===null||f===void 0?void 0:f.options.projectId);var w=l.mockUserToken.sub||l.mockUserToken.user_id;if(!w)throw new O(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Bt(w)}o._credentials=new tC(new G0(g,y))}}(this._delegate,t,r,i)},e.prototype.enableNetwork=function(){return function(t){var r=this;return t.asyncQueue.enqueue(function(){return D(r,void 0,void 0,function(){var i,o;return k(this,function(u){switch(u.label){case 0:return[4,zy(t)];case 1:return i=u.sent(),[4,$y(t)];case 2:return o=u.sent(),[2,(i.setNetworkEnabled(!0),function(c){var l=M(c);return l.Or.delete(0),Ts(l)}(o))]}})})})}(Ut(st(this._delegate,St)))},e.prototype.disableNetwork=function(){return function(t){var r=this;return t.asyncQueue.enqueue(function(){return D(r,void 0,void 0,function(){var i,o;return k(this,function(u){switch(u.label){case 0:return[4,zy(t)];case 1:return i=u.sent(),[4,$y(t)];case 2:return o=u.sent(),[2,(i.setNetworkEnabled(!1),function(c){return D(this,void 0,void 0,function(){var l;return k(this,function(f){switch(f.label){case 0:return(l=M(c)).Or.add(0),[4,zi(l)];case 1:return f.sent(),l.Br.set("Offline"),[2]}})})}(o))]}})})})}(Ut(st(this._delegate,St)))},e.prototype.enablePersistence=function(t){var r=!1,i=!1;return t&&H0("synchronizeTabs",r=!!t.synchronizeTabs,"experimentalForceOwningTab",i=!!t.experimentalForceOwningTab),r?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,i)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var r=this,i=new Jt;return t.asyncQueue.enqueueAndForget(function(){return D(r,void 0,void 0,function(){var o;return k(this,function(u){switch(u.label){case 0:return o=MD,[4,Ld(t)];case 1:return[2,o.apply(void 0,[u.sent(),i])]}})})}),i.promise}(Ut(st(this._delegate,St)))},e.prototype.onSnapshotsInSync=function(t){return function(r,i){return function(o,u){var c=this,l=new Ha(u);return o.asyncQueue.enqueueAndForget(function(){return D(c,void 0,void 0,function(){var f;return k(this,function(p){switch(p.label){case 0:return f=function(g,y){M(g).Gr.add(y),y.next()},[4,Ui(o)];case 1:return[2,f.apply(void 0,[p.sent(),l])]}})})}),function(){l.Wo(),o.asyncQueue.enqueueAndForget(function(){return D(c,void 0,void 0,function(){var f;return k(this,function(p){switch(p.label){case 0:return f=function(g,y){M(g).Gr.delete(y)},[4,Ui(o)];case 1:return[2,f.apply(void 0,[p.sent(),l])]}})})})}}(Ut(r=st(r,St)),Vi(i)?i:{next:i})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new O(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ia(this,z0(this._delegate,t))}catch(r){throw ne(r,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Tr(this,Xu(this._delegate,t))}catch(r){throw ne(r,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new As(this,function(r,i){if(r=st(r,os),Pd("collectionGroup","collection id",i),i.indexOf("/")>=0)throw new O(S.INVALID_ARGUMENT,"Invalid collection ID '"+i+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ve(r,null,function(o){return new bn(ut.emptyPath(),o)}(i))}(this._delegate,t))}catch(r){throw ne(r,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var r=this;return function(i,o){return function(u,c){var l=this,f=new Jt;return u.asyncQueue.enqueueAndForget(function(){return D(l,void 0,void 0,function(){var p;return k(this,function(g){switch(g.label){case 0:return[4,function(y){return za(y).then(function(w){return w.datastore})}(u)];case 1:return p=g.sent(),new YD(u.asyncQueue,p,c,f).run(),[2]}})})}),f.promise}(Ut(i),function(u){return o(new IC(i,u))})}(this._delegate,function(i){return t(new lI(r,i))})},e.prototype.batch=function(){var t=this;return Ut(this._delegate),new fI(new bC(this._delegate,function(r){return Ss(t._delegate,r)}))},e.prototype.loadBundle=function(t){throw new O(S.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new O(S.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),Ya=function(e){function t(r){var i=this;return(i=e.call(this)||this).firestore=r,i}return z(t,e),t.prototype.convertBytes=function(r){return new cI(new Cr(r))},t.prototype.convertReference=function(r){var i=this.convertDocumentKey(r,this.firestore._databaseId);return Tr.eu(i,this.firestore,null)},t}(Bd);function TC(e){var t;t=e,Ge.setLogLevel(t)}var lI=function(){function e(t,r){this._firestore=t,this._delegate=r,this._userDataWriter=new Ya(t)}return e.prototype.get=function(t){var r=this,i=br(t);return this._delegate.get(i).then(function(o){return new us(r._firestore,new mn(r._firestore._delegate,r._userDataWriter,o._key,o._document,o.metadata,i.converter))})},e.prototype.set=function(t,r,i){var o=br(t);return i?(Md("Transaction.set",i),this._delegate.set(o,r,i)):this._delegate.set(o,r),this},e.prototype.update=function(t,r,i){for(var o,u=[],c=3;c<arguments.length;c++)u[c-3]=arguments[c];var l=br(t);return arguments.length===2?this._delegate.update(l,r):(o=this._delegate).update.apply(o,It([l,r,i],u)),this},e.prototype.delete=function(t){var r=br(t);return this._delegate.delete(r),this},e}(),fI=function(){function e(t){this._delegate=t}return e.prototype.set=function(t,r,i){var o=br(t);return i?(Md("WriteBatch.set",i),this._delegate.set(o,r,i)):this._delegate.set(o,r),this},e.prototype.update=function(t,r,i){for(var o,u=[],c=3;c<arguments.length;c++)u[c-3]=arguments[c];var l=br(t);return arguments.length===2?this._delegate.update(l,r):(o=this._delegate).update.apply(o,It([l,r,i],u)),this},e.prototype.delete=function(t){var r=br(t);return this._delegate.delete(r),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),Ja=function(){function e(t,r,i){this._firestore=t,this._userDataWriter=r,this._delegate=i}return e.prototype.fromFirestore=function(t,r){var i=new Ko(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new as(this._firestore,i),r??{})},e.prototype.toFirestore=function(t,r){return r?this._delegate.toFirestore(t,r):this._delegate.toFirestore(t)},e.nu=function(t,r){var i=e.su,o=i.get(t);o||(o=new WeakMap,i.set(t,o));var u=o.get(r);return u||(u=new e(t,new Ya(t),r),o.set(r,u)),u},e}();Ja.su=new WeakMap;var Tr=function(){function e(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new Ya(t)}return e.iu=function(t,r,i){if(t.length%2!=0)throw new O(S.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(r,new yt(r._delegate,i,new K(t)))},e.eu=function(t,r,i){return new e(r,new yt(r._delegate,i,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ia(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ia(this.firestore,z0(this._delegate,t))}catch(r){throw ne(r,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return(t=Ct(t))instanceof yt&&$0(this._delegate,t)},e.prototype.set=function(t,r){r=Md("DocumentReference.set",r);try{return r?cw(this._delegate,t,r):cw(this._delegate,t)}catch(i){throw ne(i,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];try{return arguments.length===1?hw(this._delegate,t):hw.apply(void 0,It([this._delegate,t,r],i))}catch(u){throw ne(u,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Ss(st((t=this._delegate).firestore,St),[new Is(t._key,Xt.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=dI(r),u=pI(r,function(c){return new us(t.firestore,new mn(t.firestore._delegate,t._userDataWriter,c._key,c._document,c.metadata,t._delegate.converter))});return aI(this._delegate,o,u)},e.prototype.get=function(t){var r=this;return((t==null?void 0:t.source)==="cache"?function(i){i=st(i,yt);var o=st(i.firestore,St),u=Ut(o),c=new Er(o);return function(l,f){var p=this,g=new Jt;return l.asyncQueue.enqueueAndForget(function(){return D(p,void 0,void 0,function(){var y;return k(this,function(w){switch(w.label){case 0:return y=function(I,E,_){return D(this,void 0,void 0,function(){var A,x;return k(this,function(U){switch(U.label){case 0:return U.trys.push([0,2,,3]),[4,function(C,W){var F=M(C);return F.persistence.runTransaction("read document","readonly",function(rt){return F.Mn.mn(rt,W)})}(I,E)];case 1:return(x=U.sent()).isFoundDocument()?_.resolve(x):x.isNoDocument()?_.resolve(null):_.reject(new O(S.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return A=U.sent(),x=Qi(A,"Failed to get document '"+E+" from cache"),_.reject(x),[3,3];case 3:return[2]}})})},[4,xd(l)];case 1:return[2,y.apply(void 0,[w.sent(),f,g])]}})})}),g.promise}(u,i._key).then(function(l){return new mn(o,c,i._key,l,new wr(l!==null&&l.hasLocalMutations,!0),i.converter)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(i){i=st(i,yt);var o=st(i.firestore,St);return Wy(Ut(o),i._key,{source:"server"}).then(function(u){return Ef(o,i,u)})}(this._delegate):function(i){i=st(i,yt);var o=st(i.firestore,St);return Wy(Ut(o),i._key).then(function(u){return Ef(o,i,u)})}(this._delegate)).then(function(i){return new us(r.firestore,new mn(r.firestore._delegate,r._userDataWriter,i._key,i._document,i.metadata,r._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Ja.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function ne(e,t,r){return e.message=e.message.replace(t,r),e}function dI(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(typeof i=="object"&&!Vi(i))return i}return{}}function pI(e,t){var r,i,o;return{next:function(u){o.next&&o.next(t(u))},error:(r=(o=Vi(e[0])?e[0]:Vi(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||r===void 0?void 0:r.bind(o),complete:(i=o.complete)===null||i===void 0?void 0:i.bind(o)}}var us=function(){function e(t,r){this._firestore=t,this._delegate=r}return Object.defineProperty(e.prototype,"ref",{get:function(){return new Tr(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,r){return this._delegate.get(t,r)},e.prototype.isEqual=function(t){return iI(this._delegate,t._delegate)},e}(),as=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return z(t,e),t.prototype.data=function(r){return this._delegate.data(r)},t}(us),As=function(){function e(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new Ya(t)}return e.prototype.where=function(t,r,i){try{return new e(this.firestore,xn(this._delegate,function(o,u,c){var l=u,f=ba("where",o);return new mC(f,l,c)}(t,r,i)))}catch(o){throw ne(o,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,r){try{return new e(this.firestore,xn(this._delegate,function(i,o){o===void 0&&(o="asc");var u=o,c=ba("orderBy",i);return new yC(c,u)}(t,r)))}catch(i){throw ne(i,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,xn(this._delegate,function(r){return tw("limit",r),new iw("limit",r,"F")}(t)))}catch(r){throw ne(r,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,xn(this._delegate,function(r){return tw("limitToLast",r),new iw("limitToLast",r,"L")}(t)))}catch(r){throw ne(r,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return new e(this.firestore,xn(this._delegate,(function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new ow("startAt",i,!0)}).apply(void 0,t)))}catch(i){throw ne(i,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return new e(this.firestore,xn(this._delegate,(function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new ow("startAfter",i,!1)}).apply(void 0,t)))}catch(i){throw ne(i,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return new e(this.firestore,xn(this._delegate,(function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new sw("endBefore",i,!0)}).apply(void 0,t)))}catch(i){throw ne(i,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return new e(this.firestore,xn(this._delegate,(function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new sw("endAt",i,!1)}).apply(void 0,t)))}catch(i){throw ne(i,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return W0(this._delegate,t._delegate)},e.prototype.get=function(t){var r=this;return((t==null?void 0:t.source)==="cache"?function(i){i=st(i,ve);var o=st(i.firestore,St),u=Ut(o),c=new Er(o);return function(l,f){var p=this,g=new Jt;return l.asyncQueue.enqueueAndForget(function(){return D(p,void 0,void 0,function(){var y;return k(this,function(w){switch(w.label){case 0:return y=function(I,E,_){return D(this,void 0,void 0,function(){var A,x,U,C,W;return k(this,function(F){switch(F.label){case 0:return F.trys.push([0,2,,3]),[4,va(I,E,!0)];case 1:return W=F.sent(),A=new M0(E,W.Bn),x=A._o(W.documents),U=A.applyChanges(x,!1),_.resolve(U.snapshot),[3,3];case 2:return C=F.sent(),W=Qi(C,"Failed to execute query '"+E+" against cache"),_.reject(W),[3,3];case 3:return[2]}})})},[4,xd(l)];case 1:return[2,y.apply(void 0,[w.sent(),f,g])]}})})}),g.promise}(u,i._query).then(function(l){return new Fn(o,c,i,l)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(i){i=st(i,ve);var o=st(i.firestore,St),u=Ut(o),c=new Er(o);return Qy(u,i._query,{source:"server"}).then(function(l){return new Fn(o,c,i,l)})}(this._delegate):function(i){i=st(i,ve);var o=st(i.firestore,St),u=Ut(o),c=new Er(o);return oI(i._query),Qy(u,i._query).then(function(l){return new Fn(o,c,i,l)})}(this._delegate)).then(function(i){return new Tf(r.firestore,new Fn(r.firestore._delegate,r._userDataWriter,r._delegate,i._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=dI(r),u=pI(r,function(c){return new Tf(t.firestore,new Fn(t.firestore._delegate,t._userDataWriter,t._delegate,c._snapshot))});return aI(this._delegate,o,u)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Ja.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),_C=function(){function e(t,r){this._firestore=t,this._delegate=r}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new as(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),Tf=function(){function e(t,r){this._firestore=t,this._delegate=r}return Object.defineProperty(e.prototype,"query",{get:function(){return new As(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(r){return new as(t._firestore,r)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var r=this;return this._delegate.docChanges(t).map(function(i){return new _C(r._firestore,i)})},e.prototype.forEach=function(t,r){var i=this;this._delegate.forEach(function(o){t.call(r,new as(i._firestore,o))})},e.prototype.isEqual=function(t){return iI(this._delegate,t._delegate)},e}(),Ia=function(e){function t(r,i){var o=this;return(o=e.call(this,r,i)||this).firestore=r,o._delegate=i,o}return z(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var r=this._delegate.parent;return r?new Tr(this.firestore,r):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(r){try{return new Tr(this.firestore,r===void 0?Xu(this._delegate):Xu(this._delegate,r))}catch(i){throw ne(i,"doc()","CollectionReference.doc()")}},t.prototype.add=function(r){var i=this;return function(o,u){var c=st(o.firestore,St),l=Xu(o),f=Xa(o.converter,u);return Ss(c,[Qa(Fr(o.firestore),"addDoc",l._key,f,o.converter!==null,{}).toMutation(l._key,Xt.exists(!1))]).then(function(){return l})}(this._delegate,r).then(function(o){return new Tr(i.firestore,o)})},t.prototype.isEqual=function(r){return $0(this._delegate,r._delegate)},t.prototype.withConverter=function(r){return new t(this.firestore,r?this._delegate.withConverter(Ja.nu(this.firestore,r)):this._delegate.withConverter(null))},t}(As);function br(e){return st(e,yt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SC=function(){function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._delegate=new(on.bind.apply(on,It([void 0],t)))}return e.documentId=function(){return new e(ze.keyField().canonicalString())},e.prototype.isEqual=function(t){return(t=Ct(t))instanceof on&&this._delegate._internalPath.isEqual(t._internalPath)},e}(),AC=function(){function e(t){this._delegate=t}return e.serverTimestamp=function(){var t=new hC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Fd("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=(function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new lC("arrayUnion",o)}).apply(void 0,t);return i._methodName="FieldValue.arrayUnion",new e(i)},e.arrayRemove=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=(function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new fC("arrayRemove",o)}).apply(void 0,t);return i._methodName="FieldValue.arrayRemove",new e(i)},e.increment=function(t){var r=function(i){return new dC("increment",i)}(t);return r._methodName="FieldValue.increment",new e(r)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(e){return function(t,r){var i=Ut(t=st(t,St)),o=new oC;return function(u,c,l,f){var p=this,g=function(y,w){return function(I,E){return new QD(I,E)}(function(I,E){if(I instanceof Uint8Array)return Hy(I,E);if(I instanceof ArrayBuffer)return Hy(new Uint8Array(I),E);if(I instanceof ReadableStream)return I.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(typeof y=="string"?new TextEncoder().encode(y):y),w)}(l,Es(c));u.asyncQueue.enqueueAndForget(function(){return D(p,void 0,void 0,function(){var y;return k(this,function(w){switch(w.label){case 0:return y=$D,[4,Ld(u)];case 1:return y.apply(void 0,[w.sent(),g,f]),[2]}})})})}(i,t._databaseId,r,o),o}(this._delegate,e)}function SR(e){var t,r,i=this;return(t=this._delegate,r=e,function(o,u){var c=this;return o.asyncQueue.enqueue(function(){return D(c,void 0,void 0,function(){var l;return k(this,function(f){switch(f.label){case 0:return l=function(p,g){var y=M(p);return y.persistence.runTransaction("Get named query","readonly",function(w){return y.Ke.getNamedQuery(w,g)})},[4,xd(o)];case 1:return[2,l.apply(void 0,[f.sent(),u])]}})})})}(Ut(t=st(t,St)),r).then(function(o){return o?new ve(t,null,o.query):null})).then(function(o){return o?new As(i,o):null})}var NC={Firestore:hI,GeoPoint:Wa,Timestamp:pe,Blob:cI,Transaction:lI,WriteBatch:fI,DocumentReference:Tr,DocumentSnapshot:us,Query:As,QueryDocumentSnapshot:as,QuerySnapshot:Tf,CollectionReference:Ia,FieldPath:SC,FieldValue:AC,setLogLevel:TC,CACHE_SIZE_UNLIMITED:sC};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(e){(function(t,r){t.INTERNAL.registerComponent(new Ta("firestore",function(i){var o=i.getProvider("app").getImmediate();return r(o,i.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},NC)))})(e,function(t,r){return new hI(t,new St(t,r),new EC)}),e.registerVersion("@firebase/firestore","2.4.1")}kC(H);(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(n,s,a){n!=Array.prototype&&n!=Object.prototype&&(n[s]=a.value)};function r(n){n=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,n];for(var s=0;s<n.length;++s){var a=n[s];if(a&&a.Math==Math)return a}return globalThis}var i=r(this);function o(n,s){if(s){var a=i;n=n.split(".");for(var h=0;h<n.length-1;h++){var d=n[h];d in a||(a[d]={}),a=a[d]}n=n[n.length-1],h=a[n],s=s(h),s!=h&&s!=null&&t(a,n,{configurable:!0,writable:!0,value:s})}}function u(n){var s=0;return function(){return s<n.length?{done:!1,value:n[s++]}:{done:!0}}}function c(n){var s=typeof Symbol<"u"&&Symbol.iterator&&n[Symbol.iterator];return s?s.call(n):{next:u(n)}}o("Promise",function(n){function s(m){this.b=0,this.c=void 0,this.a=[];var b=this.f();try{m(b.resolve,b.reject)}catch(N){b.reject(N)}}function a(){this.a=null}function h(m){return m instanceof s?m:new s(function(b){b(m)})}if(n)return n;a.prototype.b=function(m){if(this.a==null){this.a=[];var b=this;this.c(function(){b.g()})}this.a.push(m)};var d=i.setTimeout;a.prototype.c=function(m){d(m,0)},a.prototype.g=function(){for(;this.a&&this.a.length;){var m=this.a;this.a=[];for(var b=0;b<m.length;++b){var N=m[b];m[b]=null;try{N()}catch(R){this.f(R)}}}this.a=null},a.prototype.f=function(m){this.c(function(){throw m})},s.prototype.f=function(){function m(R){return function(Q){N||(N=!0,R.call(b,Q))}}var b=this,N=!1;return{resolve:m(this.m),reject:m(this.g)}},s.prototype.m=function(m){if(m===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(m instanceof s)this.s(m);else{t:switch(typeof m){case"object":var b=m!=null;break t;case"function":b=!0;break t;default:b=!1}b?this.v(m):this.h(m)}},s.prototype.v=function(m){var b=void 0;try{b=m.then}catch(N){this.g(N);return}typeof b=="function"?this.u(b,m):this.h(m)},s.prototype.g=function(m){this.i(2,m)},s.prototype.h=function(m){this.i(1,m)},s.prototype.i=function(m,b){if(this.b!=0)throw Error("Cannot settle("+m+", "+b+"): Promise already settled in state"+this.b);this.b=m,this.c=b,this.l()},s.prototype.l=function(){if(this.a!=null){for(var m=0;m<this.a.length;++m)v.b(this.a[m]);this.a=null}};var v=new a;return s.prototype.s=function(m){var b=this.f();m.Ra(b.resolve,b.reject)},s.prototype.u=function(m,b){var N=this.f();try{m.call(b,N.resolve,N.reject)}catch(R){N.reject(R)}},s.prototype.then=function(m,b){function N(it,Mt){return typeof it=="function"?function(dn){try{R(it(dn))}catch(xl){Q(xl)}}:Mt}var R,Q,at=new s(function(it,Mt){R=it,Q=Mt});return this.Ra(N(m,R),N(b,Q)),at},s.prototype.catch=function(m){return this.then(void 0,m)},s.prototype.Ra=function(m,b){function N(){switch(R.b){case 1:m(R.c);break;case 2:b(R.c);break;default:throw Error("Unexpected state: "+R.b)}}var R=this;this.a==null?v.b(N):this.a.push(N)},s.resolve=h,s.reject=function(m){return new s(function(b,N){N(m)})},s.race=function(m){return new s(function(b,N){for(var R=c(m),Q=R.next();!Q.done;Q=R.next())h(Q.value).Ra(b,N)})},s.all=function(m){var b=c(m),N=b.next();return N.done?h([]):new s(function(R,Q){function at(dn){return function(xl){it[dn]=xl,Mt--,Mt==0&&R(it)}}var it=[],Mt=0;do it.push(void 0),Mt++,h(N.value).Ra(at(it.length-1),Q),N=b.next();while(!N.done)})},s});var l=l||{},f=this||self,p=/^[\w+/_-]+[=]{0,2}$/,g=null;function y(n){return(n=n.querySelector&&n.querySelector("script[nonce]"))&&(n=n.nonce||n.getAttribute("nonce"))&&p.test(n)?n:""}function w(){}function I(n){var s=typeof n;return s!="object"?s:n?Array.isArray(n)?"array":s:"null"}function E(n){var s=I(n);return s=="array"||s=="object"&&typeof n.length=="number"}function _(n){return I(n)=="function"}function A(n){var s=typeof n;return s=="object"&&n!=null||s=="function"}function x(n,s,a){return n.call.apply(n.bind,arguments)}function U(n,s,a){if(!n)throw Error();if(2<arguments.length){var h=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,h),n.apply(s,d)}}return function(){return n.apply(s,arguments)}}function C(n,s,a){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?C=x:C=U,C.apply(null,arguments)}function W(n,s){var a=Array.prototype.slice.call(arguments,1);return function(){var h=a.slice();return h.push.apply(h,arguments),n.apply(this,h)}}function F(n,s){function a(){}a.prototype=s.prototype,n.bb=s.prototype,n.prototype=new a,n.prototype.constructor=n}function rt(n){return n}function T(n,s,a){this.code=Pe+n,this.message=s||Rs[n]||"",this.a=a||null}F(T,Error),T.prototype.w=function(){var n={code:this.code,message:this.message};return this.a&&(n.serverResponse=this.a),n},T.prototype.toJSON=function(){return this.w()};function jr(n){var s=n&&n.code;return s?new T(s.substring(Pe.length),n.message,n.serverResponse):null}var Pe="auth/",Rs={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},qr={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function Xi(n){for(var s in qr)if(qr[s].id===n)return n=qr[s],{firebaseEndpoint:n.Ua,secureTokenEndpoint:n.$a,identityPlatformEndpoint:n.Xa};return null}var Yi;Yi=Xi("__EID__")?"__EID__":void 0;function $d(n){if(!n)return!1;try{return!!n.$goog_Thenable}catch{return!1}}function me(n){if(Error.captureStackTrace)Error.captureStackTrace(this,me);else{var s=Error().stack;s&&(this.stack=s)}n&&(this.message=String(n))}F(me,Error),me.prototype.name="CustomError";function ec(n,s){n=n.split("%s");for(var a="",h=n.length-1,d=0;d<h;d++)a+=n[d]+(d<s.length?s[d]:"%s");me.call(this,a+n[h])}F(ec,me),ec.prototype.name="AssertionError";function Br(n,s){throw new ec("Failure"+(n?": "+n:""),Array.prototype.slice.call(arguments,1))}function nc(n,s){this.c=n,this.f=s,this.b=0,this.a=null}nc.prototype.get=function(){if(0<this.b){this.b--;var n=this.a;this.a=n.next,n.next=null}else n=this.c();return n};function Wd(n,s){n.f(s),100>n.b&&(n.b++,s.next=n.a,n.a=s)}function Qd(){this.b=this.a=null}var Xd=new nc(function(){return new rc},function(n){n.reset()});Qd.prototype.add=function(n,s){var a=Xd.get();a.set(n,s),this.b?this.b.next=a:this.a=a,this.b=a};function _I(){var n=Tp,s=null;return n.a&&(s=n.a,n.a=n.a.next,n.a||(n.b=null),s.next=null),s}function rc(){this.next=this.b=this.a=null}rc.prototype.set=function(n,s){this.a=n,this.b=s,this.next=null},rc.prototype.reset=function(){this.next=this.b=this.a=null};var Yd=Array.prototype.indexOf?function(n,s){return Array.prototype.indexOf.call(n,s,void 0)}:function(n,s){if(typeof n=="string")return typeof s!="string"||s.length!=1?-1:n.indexOf(s,0);for(var a=0;a<n.length;a++)if(a in n&&n[a]===s)return a;return-1},gt=Array.prototype.forEach?function(n,s,a){Array.prototype.forEach.call(n,s,a)}:function(n,s,a){for(var h=n.length,d=typeof n=="string"?n.split(""):n,v=0;v<h;v++)v in d&&s.call(a,d[v],v,n)};function SI(n,s){for(var a=typeof n=="string"?n.split(""):n,h=n.length-1;0<=h;--h)h in a&&s.call(void 0,a[h],h,n)}var AI=Array.prototype.filter?function(n,s){return Array.prototype.filter.call(n,s,void 0)}:function(n,s){for(var a=n.length,h=[],d=0,v=typeof n=="string"?n.split(""):n,m=0;m<a;m++)if(m in v){var b=v[m];s.call(void 0,b,m,n)&&(h[d++]=b)}return h},Os=Array.prototype.map?function(n,s){return Array.prototype.map.call(n,s,void 0)}:function(n,s){for(var a=n.length,h=Array(a),d=typeof n=="string"?n.split(""):n,v=0;v<a;v++)v in d&&(h[v]=s.call(void 0,d[v],v,n));return h},NI=Array.prototype.some?function(n,s){return Array.prototype.some.call(n,s,void 0)}:function(n,s){for(var a=n.length,h=typeof n=="string"?n.split(""):n,d=0;d<a;d++)if(d in h&&s.call(void 0,h[d],d,n))return!0;return!1};function kI(n){t:{for(var s=uT,a=n.length,h=typeof n=="string"?n.split(""):n,d=0;d<a;d++)if(d in h&&s.call(void 0,h[d],d,n)){s=d;break t}s=-1}return 0>s?null:typeof n=="string"?n.charAt(s):n[s]}function an(n,s){return 0<=Yd(n,s)}function xs(n,s){s=Yd(n,s);var a;return(a=0<=s)&&Array.prototype.splice.call(n,s,1),a}function Me(n,s){var a=0;SI(n,function(h,d){s.call(void 0,h,d,n)&&Array.prototype.splice.call(n,d,1).length==1&&a++})}function ic(n){return Array.prototype.concat.apply([],arguments)}function $n(n){var s=n.length;if(0<s){for(var a=Array(s),h=0;h<s;h++)a[h]=n[h];return a}return[]}var Jd=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]},DI=/&/g,CI=/</g,RI=/>/g,OI=/"/g,xI=/'/g,LI=/\x00/g,PI=/[\x00&<>"']/;function lt(n,s){return n.indexOf(s)!=-1}function oc(n,s){return n<s?-1:n>s?1:0}var Kr;t:{var Zd=f.navigator;if(Zd){var tp=Zd.userAgent;if(tp){Kr=tp;break t}}Kr=""}function xt(n){return lt(Kr,n)}function ep(n,s){for(var a in n)s.call(void 0,n[a],a,n)}function Wn(n){for(var s in n)return!1;return!0}function En(n){var s={},a;for(a in n)s[a]=n[a];return s}var np="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(n,s){for(var a,h,d=1;d<arguments.length;d++){h=arguments[d];for(a in h)n[a]=h[a];for(var v=0;v<np.length;v++)a=np[v],Object.prototype.hasOwnProperty.call(h,a)&&(n[a]=h[a])}}function rp(n,s){t:{try{var a=n&&n.ownerDocument,h=a&&(a.defaultView||a.parentWindow);if(h=h||f,h.Element&&h.Location){var d=h;break t}}catch{}d=null}if(d&&typeof d[s]<"u"&&(!n||!(n instanceof d[s])&&(n instanceof d.Location||n instanceof d.Element))){if(A(n))try{var v=n.constructor.displayName||n.constructor.name||Object.prototype.toString.call(n)}catch{v="<object could not be stringified>"}else v=n===void 0?"undefined":n===null?"null":typeof n;Br("Argument is not a %s (or a non-Element, non-Location mock); got: %s",s,v)}}function $e(n,s){this.a=n===Ls&&s||"",this.b=ip}$e.prototype.ta=!0,$e.prototype.sa=function(){return this.a},$e.prototype.toString=function(){return"Const{"+this.a+"}"};function sc(n){return n instanceof $e&&n.constructor===$e&&n.b===ip?n.a:(Br("expected object of type Const, got '"+n+"'"),"type_error:Const")}var ip={},Ls={},Ps;function op(){if(Ps===void 0){var n=null,s=f.trustedTypes;if(s&&s.createPolicy){try{n=s.createPolicy("goog#html",{createHTML:rt,createScript:rt,createScriptURL:rt})}catch(a){f.console&&f.console.error(a.message)}Ps=n}else Ps=n}return Ps}function Gr(n,s){this.a=s===up?n:""}Gr.prototype.ta=!0,Gr.prototype.sa=function(){return this.a.toString()},Gr.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function sp(n){return n instanceof Gr&&n.constructor===Gr?n.a:(Br("expected object of type TrustedResourceUrl, got '"+n+"' of type "+I(n)),"type_error:TrustedResourceUrl")}function uc(n,s){var a=sc(n);if(!FI.test(a))throw Error("Invalid TrustedResourceUrl format: "+a);return n=a.replace(MI,function(h,d){if(!Object.prototype.hasOwnProperty.call(s,d))throw Error('Found marker, "'+d+'", in format string, "'+a+'", but no valid label mapping found in args: '+JSON.stringify(s));return h=s[d],h instanceof $e?sc(h):encodeURIComponent(String(h))}),UI(n)}var MI=/%{(\w+)}/g,FI=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,up={};function UI(n){var s=op();return n=s?s.createScriptURL(n):n,new Gr(n,up)}function ce(n,s){this.a=s===Ji?n:""}ce.prototype.ta=!0,ce.prototype.sa=function(){return this.a.toString()},ce.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Ms(n){return n instanceof ce&&n.constructor===ce?n.a:(Br("expected object of type SafeUrl, got '"+n+"' of type "+I(n)),"type_error:SafeUrl")}var VI=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,jI=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,ap=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function cp(n){if(n instanceof ce)return n;if(n=typeof n=="object"&&n.ta?n.sa():String(n),ap.test(n))n=new ce(n,Ji);else{n=String(n),n=n.replace(/(%0A|%0D)/g,"");var s=n.match(jI);n=s&&VI.test(s[1])?new ce(n,Ji):null}return n}function hp(n){return n instanceof ce?n:(n=typeof n=="object"&&n.ta?n.sa():String(n),ap.test(n)||(n="about:invalid#zClosurez"),new ce(n,Ji))}var Ji={},lp=new ce("about:invalid#zClosurez",Ji);function Hr(n,s,a){this.a=a===fp?n:""}Hr.prototype.ta=!0,Hr.prototype.sa=function(){return this.a.toString()},Hr.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function qI(n){return n instanceof Hr&&n.constructor===Hr?n.a:(Br("expected object of type SafeHtml, got '"+n+"' of type "+I(n)),"type_error:SafeHtml")}var fp={};function BI(n,s){rp(n,"HTMLScriptElement"),n.src=sp(s),(s=n.ownerDocument&&n.ownerDocument.defaultView)&&s!=f?s=y(s.document):(g===null&&(g=y(f.document)),s=g),s&&n.setAttribute("nonce",s)}function dp(n,s,a,h){return n=n instanceof ce?n:hp(n),s=s||f,a=a instanceof $e?sc(a):a||"",s.open(Ms(n),a,h,void 0)}function pp(n,s){for(var a=n.split("%s"),h="",d=Array.prototype.slice.call(arguments,1);d.length&&1<a.length;)h+=a.shift()+d.shift();return h+a.join("%s")}function ac(n){return PI.test(n)&&(n.indexOf("&")!=-1&&(n=n.replace(DI,"&amp;")),n.indexOf("<")!=-1&&(n=n.replace(CI,"&lt;")),n.indexOf(">")!=-1&&(n=n.replace(RI,"&gt;")),n.indexOf('"')!=-1&&(n=n.replace(OI,"&quot;")),n.indexOf("'")!=-1&&(n=n.replace(xI,"&#39;")),n.indexOf("\0")!=-1&&(n=n.replace(LI,"&#0;"))),n}function cc(n){return cc[" "](n),n}cc[" "]=w;function KI(n,s){var a=$I;return Object.prototype.hasOwnProperty.call(a,n)?a[n]:a[n]=s(n)}var GI=xt("Opera"),Fe=xt("Trident")||xt("MSIE"),vp=xt("Edge"),HI=vp||Fe,gp=xt("Gecko")&&!(lt(Kr.toLowerCase(),"webkit")&&!xt("Edge"))&&!(xt("Trident")||xt("MSIE"))&&!xt("Edge"),zI=lt(Kr.toLowerCase(),"webkit")&&!xt("Edge");function mp(){var n=f.document;return n?n.documentMode:void 0}var Fs;t:{var hc="",lc=function(){var n=Kr;if(gp)return/rv:([^\);]+)(\)|;)/.exec(n);if(vp)return/Edge\/([\d\.]+)/.exec(n);if(Fe)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(zI)return/WebKit\/(\S+)/.exec(n);if(GI)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(lc&&(hc=lc?lc[1]:""),Fe){var fc=mp();if(fc!=null&&fc>parseFloat(hc)){Fs=String(fc);break t}}Fs=hc}var $I={};function yp(n){return KI(n,function(){for(var s=0,a=Jd(String(Fs)).split("."),h=Jd(String(n)).split("."),d=Math.max(a.length,h.length),v=0;s==0&&v<d;v++){var m=a[v]||"",b=h[v]||"";do{if(m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],b=/(\d*)(\D*)(.*)/.exec(b)||["","","",""],m[0].length==0&&b[0].length==0)break;s=oc(m[1].length==0?0:parseInt(m[1],10),b[1].length==0?0:parseInt(b[1],10))||oc(m[2].length==0,b[2].length==0)||oc(m[2],b[2]),m=m[3],b=b[3]}while(s==0)}return 0<=s})}var dc;if(f.document&&Fe){var wp=mp();dc=wp||parseInt(Fs,10)||void 0}else dc=void 0;var Tn=dc;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var WI=!Fe||9<=Number(Tn);function Zi(n){var s=document;return typeof n=="string"?s.getElementById(n):n}function bp(n,s){ep(s,function(a,h){a&&typeof a=="object"&&a.ta&&(a=a.sa()),h=="style"?n.style.cssText=a:h=="class"?n.className=a:h=="for"?n.htmlFor=a:Ip.hasOwnProperty(h)?n.setAttribute(Ip[h],a):h.lastIndexOf("aria-",0)==0||h.lastIndexOf("data-",0)==0?n.setAttribute(h,a):n[h]=a})}var Ip={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function QI(n,s,a){var h=arguments,d=document,v=String(h[0]),m=h[1];if(!WI&&m&&(m.name||m.type)){if(v=["<",v],m.name&&v.push(' name="',ac(m.name),'"'),m.type){v.push(' type="',ac(m.type),'"');var b={};ae(b,m),delete b.type,m=b}v.push(">"),v=v.join("")}return v=Us(d,v),m&&(typeof m=="string"?v.className=m:Array.isArray(m)?v.className=m.join(" "):bp(v,m)),2<h.length&&XI(d,v,h),v}function XI(n,s,a){function h(b){b&&s.appendChild(typeof b=="string"?n.createTextNode(b):b)}for(var d=2;d<a.length;d++){var v=a[d];if(!E(v)||A(v)&&0<v.nodeType)h(v);else{t:{if(v&&typeof v.length=="number"){if(A(v)){var m=typeof v.item=="function"||typeof v.item=="string";break t}if(_(v)){m=typeof v.item=="function";break t}}m=!1}gt(m?$n(v):v,h)}}}function Us(n,s){return s=String(s),n.contentType==="application/xhtml+xml"&&(s=s.toLowerCase()),n.createElement(s)}function Ep(n){f.setTimeout(function(){throw n},0)}var pc;function YI(){var n=f.MessageChannel;if(typeof n>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!xt("Presto")&&(n=function(){var d=Us(document,"IFRAME");d.style.display="none",document.documentElement.appendChild(d);var v=d.contentWindow;d=v.document,d.open(),d.close();var m="callImmediate"+Math.random(),b=v.location.protocol=="file:"?"*":v.location.protocol+"//"+v.location.host;d=C(function(N){(b=="*"||N.origin==b)&&N.data==m&&this.port1.onmessage()},this),v.addEventListener("message",d,!1),this.port1={},this.port2={postMessage:function(){v.postMessage(m,b)}}}),typeof n<"u"&&!xt("Trident")&&!xt("MSIE")){var s=new n,a={},h=a;return s.port1.onmessage=function(){if(a.next!==void 0){a=a.next;var d=a.Hb;a.Hb=null,d()}},function(d){h.next={Hb:d},h=h.next,s.port2.postMessage(0)}}return function(d){f.setTimeout(d,0)}}function Vs(n,s){js||JI(),vc||(js(),vc=!0),Tp.add(n,s)}var js;function JI(){if(f.Promise&&f.Promise.resolve){var n=f.Promise.resolve(void 0);js=function(){n.then(_p)}}else js=function(){var s=_p;!_(f.setImmediate)||f.Window&&f.Window.prototype&&!xt("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(pc||(pc=YI()),pc(s)):f.setImmediate(s)}}var vc=!1,Tp=new Qd;function _p(){for(var n;n=_I();){try{n.a.call(n.b)}catch(s){Ep(s)}Wd(Xd,n)}vc=!1}function Z(n,s){if(this.a=Qn,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,n!=w)try{var a=this;n.call(s,function(h){Xn(a,to,h)},function(h){if(!(h instanceof zr))try{throw h instanceof Error?h:Error("Promise rejected.")}catch{}Xn(a,cn,h)})}catch(h){Xn(this,cn,h)}}var Qn=0,to=2,cn=3;function Sp(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Sp.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ap=new nc(function(){return new Sp},function(n){n.reset()});function gc(n,s,a){var h=Ap.get();return h.g=n,h.b=s,h.f=a,h}function G(n){if(n instanceof Z)return n;var s=new Z(w);return Xn(s,to,n),s}function dt(n){return new Z(function(s,a){a(n)})}function Np(n,s,a){Rp(n,s,a,null)||Vs(W(s,n))}function ZI(n){return new Z(function(s,a){var h=n.length,d=[];if(h)for(var v=function(R,Q){h--,d[R]=Q,h==0&&s(d)},m=function(R){a(R)},b=0,N;b<n.length;b++)N=n[b],Np(N,W(v,b),m);else s(d)})}function kp(n){return new Z(function(s){var a=n.length,h=[];if(a)for(var d=function(b,N,R){a--,h[b]=N?{Qb:!0,value:R}:{Qb:!1,reason:R},a==0&&s(h)},v=0,m;v<n.length;v++)m=n[v],Np(m,W(d,v,!0),W(d,v,!1));else s(h)})}Z.prototype.then=function(n,s,a){return Cp(this,_(n)?n:null,_(s)?s:null,a)},Z.prototype.$goog_Thenable=!0,e=Z.prototype,e.oa=function(n,s){return n=gc(n,n,s),n.c=!0,mc(this,n),this},e.o=function(n,s){return Cp(this,null,n,s)},e.cancel=function(n){if(this.a==Qn){var s=new zr(n);Vs(function(){Dp(this,s)},this)}};function Dp(n,s){if(n.a==Qn)if(n.c){var a=n.c;if(a.b){for(var h=0,d=null,v=null,m=a.b;m&&(m.c||(h++,m.a==n&&(d=m),!(d&&1<h)));m=m.next)d||(v=m);d&&(a.a==Qn&&h==1?Dp(a,s):(v?(h=v,h.next==a.f&&(a.f=h),h.next=h.next.next):xp(a),Lp(a,d,cn,s)))}n.c=null}else Xn(n,cn,s)}function mc(n,s){n.b||n.a!=to&&n.a!=cn||Op(n),n.f?n.f.next=s:n.b=s,n.f=s}function Cp(n,s,a,h){var d=gc(null,null,null);return d.a=new Z(function(v,m){d.g=s?function(b){try{var N=s.call(h,b);v(N)}catch(R){m(R)}}:v,d.b=a?function(b){try{var N=a.call(h,b);N===void 0&&b instanceof zr?m(b):v(N)}catch(R){m(R)}}:m}),d.a.c=n,mc(n,d),d.a}e.$c=function(n){this.a=Qn,Xn(this,to,n)},e.ad=function(n){this.a=Qn,Xn(this,cn,n)};function Xn(n,s,a){n.a==Qn&&(n===a&&(s=cn,a=new TypeError("Promise cannot resolve to itself")),n.a=1,Rp(a,n.$c,n.ad,n)||(n.i=a,n.a=s,n.c=null,Op(n),s!=cn||a instanceof zr||eE(n,a)))}function Rp(n,s,a,h){if(n instanceof Z)return mc(n,gc(s||w,a||null,h)),!0;if($d(n))return n.then(s,a,h),!0;if(A(n))try{var d=n.then;if(_(d))return tE(n,d,s,a,h),!0}catch(v){return a.call(h,v),!0}return!1}function tE(n,s,a,h,d){function v(N){b||(b=!0,h.call(d,N))}function m(N){b||(b=!0,a.call(d,N))}var b=!1;try{s.call(n,m,v)}catch(N){v(N)}}function Op(n){n.h||(n.h=!0,Vs(n.gc,n))}function xp(n){var s=null;return n.b&&(s=n.b,n.b=s.next,s.next=null),n.b||(n.f=null),s}e.gc=function(){for(var n;n=xp(this);)Lp(this,n,this.a,this.i);this.h=!1};function Lp(n,s,a,h){if(a==cn&&s.b&&!s.c)for(;n&&n.g;n=n.c)n.g=!1;if(s.a)s.a.c=null,Pp(s,a,h);else try{s.c?s.g.call(s.f):Pp(s,a,h)}catch(d){Mp.call(null,d)}Wd(Ap,s)}function Pp(n,s,a){s==to?n.g.call(n.f,a):n.b&&n.b.call(n.f,a)}function eE(n,s){n.g=!0,Vs(function(){n.g&&Mp.call(null,s)})}var Mp=Ep;function zr(n){me.call(this,n)}F(zr,me),zr.prototype.name="cancel";function qs(){this.ya=this.ya,this.pa=this.pa}var nE=0;qs.prototype.ya=!1;function Fp(n){!n.ya&&(n.ya=!0,n.Da(),nE!=0)}qs.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var rE=Object.freeze||function(n){return n},Up=!Fe||9<=Number(Tn),iE=Fe&&!yp("9"),oE=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var n=!1,s=Object.defineProperty({},"passive",{get:function(){n=!0}});try{f.addEventListener("test",w,s),f.removeEventListener("test",w,s)}catch{}return n}();function he(n,s){this.type=n,this.b=this.target=s,this.defaultPrevented=!1}he.prototype.preventDefault=function(){this.defaultPrevented=!0};function Yn(n,s){if(he.call(this,n?n.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,n){var a=this.type=n.type,h=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.b=s,s=n.relatedTarget){if(gp){t:{try{cc(s.nodeName);var d=!0;break t}catch{}d=!1}d||(s=null)}}else a=="mouseover"?s=n.fromElement:a=="mouseout"&&(s=n.toElement);this.relatedTarget=s,h?(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:sE[n.pointerType]||"",this.a=n,n.defaultPrevented&&this.preventDefault()}}F(Yn,he);var sE=rE({2:"touch",3:"pen",4:"mouse"});Yn.prototype.preventDefault=function(){Yn.bb.preventDefault.call(this);var n=this.a;if(n.preventDefault)n.preventDefault();else if(n.returnValue=!1,iE)try{(n.ctrlKey||112<=n.keyCode&&123>=n.keyCode)&&(n.keyCode=-1)}catch{}},Yn.prototype.g=function(){return this.a};var eo="closure_listenable_"+(1e6*Math.random()|0),uE=0;function aE(n,s,a,h,d){this.listener=n,this.proxy=null,this.src=s,this.type=a,this.capture=!!h,this.Wa=d,this.key=++uE,this.wa=this.Qa=!1}function Bs(n){n.wa=!0,n.listener=null,n.proxy=null,n.src=null,n.Wa=null}function Ks(n){this.src=n,this.a={},this.b=0}Ks.prototype.add=function(n,s,a,h,d){var v=n.toString();n=this.a[v],n||(n=this.a[v]=[],this.b++);var m=wc(n,s,h,d);return-1<m?(s=n[m],a||(s.Qa=!1)):(s=new aE(s,this.src,v,!!h,d),s.Qa=a,n.push(s)),s};function yc(n,s){var a=s.type;a in n.a&&xs(n.a[a],s)&&(Bs(s),n.a[a].length==0&&(delete n.a[a],n.b--))}function wc(n,s,a,h){for(var d=0;d<n.length;++d){var v=n[d];if(!v.wa&&v.listener==s&&v.capture==!!a&&v.Wa==h)return d}return-1}var bc="closure_lm_"+(1e6*Math.random()|0),Ic={};function Ne(n,s,a,h,d){if(h&&h.once)Ec(n,s,a,h,d);else if(Array.isArray(s))for(var v=0;v<s.length;v++)Ne(n,s[v],a,h,d);else a=_c(a),n&&n[eo]?Gp(n,s,a,A(h)?!!h.capture:!!h,d):Vp(n,s,a,!1,h,d)}function Vp(n,s,a,h,d,v){if(!s)throw Error("Invalid event type");var m=A(d)?!!d.capture:!!d,b=Gs(n);if(b||(n[bc]=b=new Ks(n)),a=b.add(s,a,h,m,v),!a.proxy)if(h=cE(),a.proxy=h,h.src=n,h.listener=a,n.addEventListener)oE||(d=m),d===void 0&&(d=!1),n.addEventListener(s.toString(),h,d);else if(n.attachEvent)n.attachEvent(qp(s.toString()),h);else if(n.addListener&&n.removeListener)n.addListener(h);else throw Error("addEventListener and attachEvent are unavailable.")}function cE(){var n=hE,s=Up?function(a){return n.call(s.src,s.listener,a)}:function(a){if(a=n.call(s.src,s.listener,a),!a)return a};return s}function Ec(n,s,a,h,d){if(Array.isArray(s))for(var v=0;v<s.length;v++)Ec(n,s[v],a,h,d);else a=_c(a),n&&n[eo]?Sc(n,s,a,A(h)?!!h.capture:!!h,d):Vp(n,s,a,!0,h,d)}function ye(n,s,a,h,d){if(Array.isArray(s))for(var v=0;v<s.length;v++)ye(n,s[v],a,h,d);else h=A(h)?!!h.capture:!!h,a=_c(a),n&&n[eo]?(n=n.v,s=String(s).toString(),s in n.a&&(v=n.a[s],a=wc(v,a,h,d),-1<a&&(Bs(v[a]),Array.prototype.splice.call(v,a,1),v.length==0&&(delete n.a[s],n.b--)))):n&&(n=Gs(n))&&(s=n.a[s.toString()],n=-1,s&&(n=wc(s,a,h,d)),(a=-1<n?s[n]:null)&&jp(a))}function jp(n){if(typeof n!="number"&&n&&!n.wa){var s=n.src;if(s&&s[eo])yc(s.v,n);else{var a=n.type,h=n.proxy;s.removeEventListener?s.removeEventListener(a,h,n.capture):s.detachEvent?s.detachEvent(qp(a),h):s.addListener&&s.removeListener&&s.removeListener(h),(a=Gs(s))?(yc(a,n),a.b==0&&(a.src=null,s[bc]=null)):Bs(n)}}}function qp(n){return n in Ic?Ic[n]:Ic[n]="on"+n}function Bp(n,s,a,h){var d=!0;if((n=Gs(n))&&(s=n.a[s.toString()]))for(s=s.concat(),n=0;n<s.length;n++){var v=s[n];v&&v.capture==a&&!v.wa&&(v=Kp(v,h),d=d&&v!==!1)}return d}function Kp(n,s){var a=n.listener,h=n.Wa||n.src;return n.Qa&&jp(n),a.call(h,s)}function hE(n,s){if(n.wa)return!0;if(!Up){if(!s)t:{s=["window","event"];for(var a=f,h=0;h<s.length;h++)if(a=a[s[h]],a==null){s=null;break t}s=a}if(h=s,s=new Yn(h,this),a=!0,!(0>h.keyCode||h.returnValue!=null)){t:{var d=!1;if(h.keyCode==0)try{h.keyCode=-1;break t}catch{d=!0}(d||h.returnValue==null)&&(h.returnValue=!0)}for(h=[],d=s.b;d;d=d.parentNode)h.push(d);for(n=n.type,d=h.length-1;0<=d;d--){s.b=h[d];var v=Bp(h[d],n,!0,s);a=a&&v}for(d=0;d<h.length;d++)s.b=h[d],v=Bp(h[d],n,!1,s),a=a&&v}return a}return Kp(n,new Yn(s,this))}function Gs(n){return n=n[bc],n instanceof Ks?n:null}var Tc="__closure_events_fn_"+(1e9*Math.random()>>>0);function _c(n){return _(n)?n:(n[Tc]||(n[Tc]=function(s){return n.handleEvent(s)}),n[Tc])}function te(){qs.call(this),this.v=new Ks(this),this.bc=this,this.hb=null}F(te,qs),te.prototype[eo]=!0,te.prototype.addEventListener=function(n,s,a,h){Ne(this,n,s,a,h)},te.prototype.removeEventListener=function(n,s,a,h){ye(this,n,s,a,h)},te.prototype.dispatchEvent=function(n){var s,a=this.hb;if(a)for(s=[];a;a=a.hb)s.push(a);a=this.bc;var h=n.type||n;if(typeof n=="string")n=new he(n,a);else if(n instanceof he)n.target=n.target||a;else{var d=n;n=new he(h,a),ae(n,d)}if(d=!0,s)for(var v=s.length-1;0<=v;v--){var m=n.b=s[v];d=Hs(m,h,!0,n)&&d}if(m=n.b=a,d=Hs(m,h,!0,n)&&d,d=Hs(m,h,!1,n)&&d,s)for(v=0;v<s.length;v++)m=n.b=s[v],d=Hs(m,h,!1,n)&&d;return d},te.prototype.Da=function(){if(te.bb.Da.call(this),this.v){var n=this.v,s;for(s in n.a){for(var a=n.a[s],h=0;h<a.length;h++)Bs(a[h]);delete n.a[s],n.b--}}this.hb=null};function Gp(n,s,a,h,d){n.v.add(String(s),a,!1,h,d)}function Sc(n,s,a,h,d){n.v.add(String(s),a,!0,h,d)}function Hs(n,s,a,h){if(s=n.v.a[String(s)],!s)return!0;s=s.concat();for(var d=!0,v=0;v<s.length;++v){var m=s[v];if(m&&!m.wa&&m.capture==a){var b=m.listener,N=m.Wa||m.src;m.Qa&&yc(n.v,m),d=b.call(N,h)!==!1&&d}}return d&&!h.defaultPrevented}function Ac(n,s,a){if(_(n))a&&(n=C(n,a));else if(n&&typeof n.handleEvent=="function")n=C(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(s)?-1:f.setTimeout(n,s||0)}function $r(n){var s=null;return new Z(function(a,h){s=Ac(function(){a(void 0)},n),s==-1&&h(Error("Failed to schedule timer."))}).o(function(a){throw f.clearTimeout(s),a})}function Hp(n){if(n.X&&typeof n.X=="function")return n.X();if(typeof n=="string")return n.split("");if(E(n)){for(var s=[],a=n.length,h=0;h<a;h++)s.push(n[h]);return s}s=[],a=0;for(h in n)s[a++]=n[h];return s}function zp(n){if(n.Y&&typeof n.Y=="function")return n.Y();if(!n.X||typeof n.X!="function"){if(E(n)||typeof n=="string"){var s=[];n=n.length;for(var a=0;a<n;a++)s.push(a);return s}s=[],a=0;for(var h in n)s[a++]=h;return s}}function lE(n,s){if(n.forEach&&typeof n.forEach=="function")n.forEach(s,void 0);else if(E(n)||typeof n=="string")gt(n,s,void 0);else for(var a=zp(n),h=Hp(n),d=h.length,v=0;v<d;v++)s.call(void 0,h[v],a&&a[v],n)}function Wr(n,s){this.b={},this.a=[],this.c=0;var a=arguments.length;if(1<a){if(a%2)throw Error("Uneven number of arguments");for(var h=0;h<a;h+=2)this.set(arguments[h],arguments[h+1])}else if(n)if(n instanceof Wr)for(a=n.Y(),h=0;h<a.length;h++)this.set(a[h],n.get(a[h]));else for(h in n)this.set(h,n[h])}e=Wr.prototype,e.X=function(){Nc(this);for(var n=[],s=0;s<this.a.length;s++)n.push(this.b[this.a[s]]);return n},e.Y=function(){return Nc(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0};function Nc(n){if(n.c!=n.a.length){for(var s=0,a=0;s<n.a.length;){var h=n.a[s];Jn(n.b,h)&&(n.a[a++]=h),s++}n.a.length=a}if(n.c!=n.a.length){var d={};for(a=s=0;s<n.a.length;)h=n.a[s],Jn(d,h)||(n.a[a++]=h,d[h]=1),s++;n.a.length=a}}e.get=function(n,s){return Jn(this.b,n)?this.b[n]:s},e.set=function(n,s){Jn(this.b,n)||(this.c++,this.a.push(n)),this.b[n]=s},e.forEach=function(n,s){for(var a=this.Y(),h=0;h<a.length;h++){var d=a[h],v=this.get(d);n.call(s,v,d,this)}};function Jn(n,s){return Object.prototype.hasOwnProperty.call(n,s)}var $p=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fE(n,s){if(n){n=n.split("&");for(var a=0;a<n.length;a++){var h=n[a].indexOf("="),d=null;if(0<=h){var v=n[a].substring(0,h);d=n[a].substring(h+1)}else v=n[a];s(v,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}function _n(n,s){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var a;n instanceof _n?(this.i=s!==void 0?s:n.i,no(this,n.c),this.l=n.l,this.a=n.a,ro(this,n.g),this.f=n.f,kc(this,Yp(n.b)),this.h=n.h):n&&(a=String(n).match($p))?(this.i=!!s,no(this,a[1]||"",!0),this.l=io(a[2]||""),this.a=io(a[3]||"",!0),ro(this,a[4]),this.f=io(a[5]||"",!0),kc(this,a[6]||"",!0),this.h=io(a[7]||"")):(this.i=!!s,this.b=new Zn(null,this.i))}_n.prototype.toString=function(){var n=[],s=this.c;s&&n.push(oo(s,Wp,!0),":");var a=this.a;return(a||s=="file")&&(n.push("//"),(s=this.l)&&n.push(oo(s,Wp,!0),"@"),n.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.g,a!=null&&n.push(":",String(a))),(a=this.f)&&(this.a&&a.charAt(0)!="/"&&n.push("/"),n.push(oo(a,a.charAt(0)=="/"?vE:pE,!0))),(a=this.b.toString())&&n.push("?",a),(a=this.h)&&n.push("#",oo(a,mE)),n.join("")},_n.prototype.resolve=function(n){var s=new _n(this),a=!!n.c;a?no(s,n.c):a=!!n.l,a?s.l=n.l:a=!!n.a,a?s.a=n.a:a=n.g!=null;var h=n.f;if(a)ro(s,n.g);else if(a=!!n.f){if(h.charAt(0)!="/")if(this.a&&!this.f)h="/"+h;else{var d=s.f.lastIndexOf("/");d!=-1&&(h=s.f.substr(0,d+1)+h)}if(d=h,d==".."||d==".")h="";else if(lt(d,"./")||lt(d,"/.")){h=d.lastIndexOf("/",0)==0,d=d.split("/");for(var v=[],m=0;m<d.length;){var b=d[m++];b=="."?h&&m==d.length&&v.push(""):b==".."?((1<v.length||v.length==1&&v[0]!="")&&v.pop(),h&&m==d.length&&v.push("")):(v.push(b),h=!0)}h=v.join("/")}else h=d}return a?s.f=h:a=n.b.toString()!=="",a?kc(s,Yp(n.b)):a=!!n.h,a&&(s.h=n.h),s};function no(n,s,a){n.c=a?io(s,!0):s,n.c&&(n.c=n.c.replace(/:$/,""))}function ro(n,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);n.g=s}else n.g=null}function kc(n,s,a){s instanceof Zn?(n.b=s,yE(n.b,n.i)):(a||(s=oo(s,gE)),n.b=new Zn(s,n.i))}function Et(n,s,a){n.b.set(s,a)}function ke(n,s){return n.b.get(s)}function le(n){return n instanceof _n?new _n(n):new _n(n,void 0)}function zs(n,s,a,h){var d=new _n(null,void 0);return n&&no(d,n),s&&(d.a=s),a&&ro(d,a),h&&(d.f=h),d}function io(n,s){return n?s?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function oo(n,s,a){return typeof n=="string"?(n=encodeURI(n).replace(s,dE),a&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function dE(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var Wp=/[#\/\?@]/g,pE=/[#\?:]/g,vE=/[#\?]/g,gE=/[#\?@]/g,mE=/#/g;function Zn(n,s){this.b=this.a=null,this.c=n||null,this.f=!!s}function Sn(n){n.a||(n.a=new Wr,n.b=0,n.c&&fE(n.c,function(s,a){n.add(decodeURIComponent(s.replace(/\+/g," ")),a)}))}function Qp(n){var s=zp(n);if(typeof s>"u")throw Error("Keys are undefined");var a=new Zn(null,void 0);n=Hp(n);for(var h=0;h<s.length;h++){var d=s[h],v=n[h];Array.isArray(v)?Xp(a,d,v):a.add(d,v)}return a}e=Zn.prototype,e.add=function(n,s){Sn(this),this.c=null,n=Qr(this,n);var a=this.a.get(n);return a||this.a.set(n,a=[]),a.push(s),this.b+=1,this};function We(n,s){Sn(n),s=Qr(n,s),Jn(n.a.b,s)&&(n.c=null,n.b-=n.a.get(s).length,n=n.a,Jn(n.b,s)&&(delete n.b[s],n.c--,n.a.length>2*n.c&&Nc(n)))}e.clear=function(){this.a=this.c=null,this.b=0};function Dc(n,s){return Sn(n),s=Qr(n,s),Jn(n.a.b,s)}e.forEach=function(n,s){Sn(this),this.a.forEach(function(a,h){gt(a,function(d){n.call(s,d,h,this)},this)},this)},e.Y=function(){Sn(this);for(var n=this.a.X(),s=this.a.Y(),a=[],h=0;h<s.length;h++)for(var d=n[h],v=0;v<d.length;v++)a.push(s[h]);return a},e.X=function(n){Sn(this);var s=[];if(typeof n=="string")Dc(this,n)&&(s=ic(s,this.a.get(Qr(this,n))));else{n=this.a.X();for(var a=0;a<n.length;a++)s=ic(s,n[a])}return s},e.set=function(n,s){return Sn(this),this.c=null,n=Qr(this,n),Dc(this,n)&&(this.b-=this.a.get(n).length),this.a.set(n,[s]),this.b+=1,this},e.get=function(n,s){return n?(n=this.X(n),0<n.length?String(n[0]):s):s};function Xp(n,s,a){We(n,s),0<a.length&&(n.c=null,n.a.set(Qr(n,s),$n(a)),n.b+=a.length)}e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var n=[],s=this.a.Y(),a=0;a<s.length;a++){var h=s[a],d=encodeURIComponent(String(h));h=this.X(h);for(var v=0;v<h.length;v++){var m=d;h[v]!==""&&(m+="="+encodeURIComponent(String(h[v]))),n.push(m)}}return this.c=n.join("&")};function Yp(n){var s=new Zn;return s.c=n.c,n.a&&(s.a=new Wr(n.a),s.b=n.b),s}function Qr(n,s){return s=String(s),n.f&&(s=s.toLowerCase()),s}function yE(n,s){s&&!n.f&&(Sn(n),n.c=null,n.a.forEach(function(a,h){var d=h.toLowerCase();h!=d&&(We(this,h),Xp(this,d,a))},n)),n.f=s}function Jp(n){var s=[];return Cc(new wE,n,s),s.join("")}function wE(){}function Cc(n,s,a){if(s==null)a.push("null");else{if(typeof s=="object"){if(Array.isArray(s)){var h=s;s=h.length,a.push("[");for(var d="",v=0;v<s;v++)a.push(d),Cc(n,h[v],a),d=",";a.push("]");return}if(s instanceof String||s instanceof Number||s instanceof Boolean)s=s.valueOf();else{a.push("{"),d="";for(h in s)Object.prototype.hasOwnProperty.call(s,h)&&(v=s[h],typeof v!="function"&&(a.push(d),tv(h,a),a.push(":"),Cc(n,v,a),d=","));a.push("}");return}}switch(typeof s){case"string":tv(s,a);break;case"number":a.push(isFinite(s)&&!isNaN(s)?String(s):"null");break;case"boolean":a.push(String(s));break;case"function":a.push("null");break;default:throw Error("Unknown type: "+typeof s)}}}var Zp={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},bE=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function tv(n,s){s.push('"',n.replace(bE,function(a){var h=Zp[a];return h||(h="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),Zp[a]=h),h}),'"')}function Rc(){var n=qt();return Fe&&!!Tn&&Tn==11||/Edge\/\d+/.test(n)}function so(){return f.window&&f.window.location.href||self&&self.location&&self.location.href||""}function ev(n,s){s=s||f.window;var a="about:blank";n&&(a=Ms(cp(n)||lp)),s.location.href=a}function nv(n,s){var a=[],h;for(h in n)h in s?typeof n[h]!=typeof s[h]?a.push(h):typeof n[h]=="object"&&n[h]!=null&&s[h]!=null?0<nv(n[h],s[h]).length&&a.push(h):n[h]!==s[h]&&a.push(h):a.push(h);for(h in s)h in n||a.push(h);return a}function IE(){var n=qt();return n=Xr(n)!=sv?null:(n=n.match(/\sChrome\/(\d+)/i))&&n.length==2?parseInt(n[1],10):null,n&&30>n?!1:!Fe||!Tn||9<Tn}function rv(n){return n=(n||qt()).toLowerCase(),!!(n.match(/android/)||n.match(/webos/)||n.match(/iphone|ipad|ipod/)||n.match(/blackberry/)||n.match(/windows phone/)||n.match(/iemobile/))}function tr(n){n=n||f.window;try{n.close()}catch{}}function iv(n,s,a){var h=Math.floor(1e9*Math.random()).toString();s=s||500,a=a||600;var d=(window.screen.availHeight-a)/2,v=(window.screen.availWidth-s)/2;s={width:s,height:a,top:0<d?d:0,left:0<v?v:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},a=qt().toLowerCase(),h&&(s.target=h,lt(a,"crios/")&&(s.target="_blank")),Xr(qt())==Lc&&(n=n||"http://localhost",s.scrollbars=!0),a=n||"",(n=s)||(n={}),h=window,s=a instanceof ce?a:cp(typeof a.href<"u"?a.href:String(a))||lp,a=n.target||a.target,d=[];for(m in n)switch(m){case"width":case"height":case"top":case"left":d.push(m+"="+n[m]);break;case"target":case"noopener":case"noreferrer":break;default:d.push(m+"="+(n[m]?1:0))}var m=d.join(",");if((xt("iPhone")&&!xt("iPod")&&!xt("iPad")||xt("iPad")||xt("iPod"))&&h.navigator&&h.navigator.standalone&&a&&a!="_self"?(m=Us(document,"A"),rp(m,"HTMLAnchorElement"),s=s instanceof ce?s:hp(s),m.href=Ms(s),m.setAttribute("target",a),n.noreferrer&&m.setAttribute("rel","noreferrer"),n=document.createEvent("MouseEvent"),n.initMouseEvent("click",!0,!0,h,1),m.dispatchEvent(n),m={}):n.noreferrer?(m=dp("",h,a,m),n=Ms(s),m&&(HI&&lt(n,";")&&(n="'"+n.replace(/'/g,"%27")+"'"),m.opener=null,n='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+ac(n)+'">',n=(h=op())?h.createHTML(n):n,n=new Hr(n,null,fp),h=m.document)&&(h.write(qI(n)),h.close())):(m=dp(s,h,a,m))&&n.noopener&&(m.opener=null),m)try{m.focus()}catch{}return m}function EE(n){return new Z(function(s){function a(){$r(2e3).then(function(){if(!n||n.closed)s();else return a()})}return a()})}var TE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_E=/^[^@]+@[^@]+$/;function $s(){var n=null;return new Z(function(s){f.document.readyState=="complete"?s():(n=function(){s()},Ec(window,"load",n))}).o(function(s){throw ye(window,"load",n),s})}function SE(){return Oc(void 0)?$s().then(function(){return new Z(function(n,s){var a=f.document,h=setTimeout(function(){s(Error("Cordova framework is not ready."))},1e3);a.addEventListener("deviceready",function(){clearTimeout(h),n()},!1)})}):dt(Error("Cordova must run in an Android or iOS file scheme."))}function Oc(n){return n=n||qt(),!(Jr()!=="file:"&&Jr()!=="ionic:"||!n.toLowerCase().match(/iphone|ipad|ipod|android/))}function xc(){var n=f.window;try{return!(!n||n==n.top)}catch{return!1}}function Ue(){return typeof f.WorkerGlobalScope<"u"&&typeof f.importScripts=="function"}function Qe(){return H.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":H.INTERNAL.hasOwnProperty("node")?"Node":Ue()?"Worker":"Browser"}function ov(){var n=Qe();return n==="ReactNative"||n==="Node"}function AE(){for(var n=50,s=[];0<n;)s.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),n--;return s.join("")}var Lc="Firefox",sv="Chrome";function Xr(n){var s=n.toLowerCase();if(lt(s,"opera/")||lt(s,"opr/")||lt(s,"opios/"))return"Opera";if(lt(s,"iemobile"))return"IEMobile";if(lt(s,"msie")||lt(s,"trident/"))return"IE";if(lt(s,"edge/"))return"Edge";if(lt(s,"firefox/"))return Lc;if(lt(s,"silk/"))return"Silk";if(lt(s,"blackberry"))return"Blackberry";if(lt(s,"webos"))return"Webos";if(!lt(s,"safari/")||lt(s,"chrome/")||lt(s,"crios/")||lt(s,"android"))if(!lt(s,"chrome/")&&!lt(s,"crios/")||lt(s,"edge/")){if(lt(s,"android"))return"Android";if((n=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&n.length==2)return n[1]}else return sv;else return"Safari";return"Other"}var uv={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Yr(n,s){s=s||[];var a=[],h={},d;for(d in uv)h[uv[d]]=!0;for(d=0;d<s.length;d++)typeof h[s[d]]<"u"&&(delete h[s[d]],a.push(s[d]));return a.sort(),s=a,s.length||(s=["FirebaseCore-web"]),a=Qe(),a==="Browser"?(h=qt(),a=Xr(h)):a==="Worker"&&(h=qt(),a=Xr(h)+"-"+a),a+"/JsCore/"+n+"/"+s.join(",")}function qt(){return f.navigator&&f.navigator.userAgent||""}function pt(n,s){n=n.split("."),s=s||f;for(var a=0;a<n.length&&typeof s=="object"&&s!=null;a++)s=s[n[a]];return a!=n.length&&(s=void 0),s}function Pc(){try{var n=f.localStorage,s=nr();if(n)return n.setItem(s,"1"),n.removeItem(s),Rc()?!!f.indexedDB:!0}catch{return Ue()&&!!f.indexedDB}return!1}function er(){return(Ws()||Jr()==="chrome-extension:"||Oc())&&!ov()&&Pc()&&!Ue()}function Ws(){return Jr()==="http:"||Jr()==="https:"}function Jr(){return f.location&&f.location.protocol||null}function uo(n){return n=n||qt(),!(rv(n)||Xr(n)==Lc)}function ao(n){return typeof n>"u"?null:Jp(n)}function av(n){var s={},a;for(a in n)n.hasOwnProperty(a)&&n[a]!==null&&n[a]!==void 0&&(s[a]=n[a]);return s}function Zr(n){if(n!==null)return JSON.parse(n)}function nr(n){return n||Math.floor(1e9*Math.random()).toString()}function cv(n){return n=n||qt(),!(Xr(n)=="Safari"||n.toLowerCase().match(/iphone|ipad|ipod/))}function hv(){var n=f.___jsl;if(n&&n.H){for(var s in n.H)if(n.H[s].r=n.H[s].r||[],n.H[s].L=n.H[s].L||[],n.H[s].r=n.H[s].L.concat(),n.CP)for(var a=0;a<n.CP.length;a++)n.CP[a]=null}}function An(n,s){if(n>s)throw Error("Short delay should be less than long delay!");this.a=n,this.c=s,n=qt(),s=Qe(),this.b=rv(n)||s==="ReactNative"}An.prototype.get=function(){var n=f.navigator;return!(n&&typeof n.onLine=="boolean"&&(Ws()||Jr()==="chrome-extension:"||typeof n.connection<"u"))||n.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function Mc(){var n=f.document;return n&&typeof n.visibilityState<"u"?n.visibilityState=="visible":!0}function NE(){var n=f.document,s=null;return Mc()||!n?G():new Z(function(a){s=function(){Mc()&&(n.removeEventListener("visibilitychange",s,!1),a())},n.addEventListener("visibilitychange",s,!1)}).o(function(a){throw n.removeEventListener("visibilitychange",s,!1),a})}function co(n){try{var s=new Date(parseInt(n,10));if(!isNaN(s.getTime())&&!/[^0-9]/.test(n))return s.toUTCString()}catch{}return null}function lv(){return!(!pt("fireauth.oauthhelper",f)&&!pt("fireauth.iframe",f))}function kE(){var n=f.navigator;return n&&n.serviceWorker&&n.serviceWorker.controller||null}function DE(){var n=f.navigator;return n&&n.serviceWorker?G().then(function(){return n.serviceWorker.ready}).then(function(s){return s.active||null}).o(function(){return null}):G(null)}var fv={};function Fc(n){fv[n]||(fv[n]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(n))}var Uc;try{var Vc={};Object.defineProperty(Vc,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Vc,"abcd",{configurable:!0,enumerable:!0,value:2}),Uc=Vc.abcd==2}catch{Uc=!1}function q(n,s,a){Uc?Object.defineProperty(n,s,{configurable:!0,enumerable:!0,value:a}):n[s]=a}function ee(n,s){if(s)for(var a in s)s.hasOwnProperty(a)&&q(n,a,s[a])}function Xe(n){var s={};return ee(s,n),s}function CE(n){var s={},a;for(a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);return s}function RE(n,s){if(!s||!s.length)return!0;if(!n)return!1;for(var a=0;a<s.length;a++){var h=n[s[a]];if(h==null||h==="")return!1}return!0}function jc(n){var s=n;if(typeof n=="object"&&n!=null){s="length"in n?[]:{};for(var a in n)q(s,a,jc(n[a]))}return s}function qc(n){var s=n&&(n[Hc]?"phone":null);if(s&&n&&n[Gc]){q(this,"uid",n[Gc]),q(this,"displayName",n[dv]||null);var a=null;n[Kc]&&(a=new Date(n[Kc]).toUTCString()),q(this,"enrollmentTime",a),q(this,"factorId",s)}else throw new T("internal-error","Internal assert: invalid MultiFactorInfo object")}qc.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function Bc(n){try{var s=new ho(n)}catch{s=null}return s}var dv="displayName",Kc="enrolledAt",Gc="mfaEnrollmentId",Hc="phoneInfo";function ho(n){qc.call(this,n),q(this,"phoneNumber",n[Hc])}F(ho,qc),ho.prototype.w=function(){var n=ho.bb.w.call(this);return n.phoneNumber=this.phoneNumber,n};function OE(n){var s={},a=n[xE],h=n[PE],d=n[ME];if(n=Bc(n[LE]),!d||d!=Qs&&d!=lo&&!a||d==lo&&!h||d==zc&&!n)throw Error("Invalid checkActionCode response!");d==lo?(s[vv]=a||null,s[gv]=a||null,s[pv]=h):(s[vv]=h||null,s[gv]=h||null,s[pv]=a||null),s[FE]=n||null,q(this,VE,d),q(this,UE,jc(s))}var zc="REVERT_SECOND_FACTOR_ADDITION",Qs="EMAIL_SIGNIN",lo="VERIFY_AND_CHANGE_EMAIL",xE="email",LE="mfaInfo",PE="newEmail",ME="requestType",pv="email",vv="fromEmail",FE="multiFactorInfo",gv="previousEmail",UE="data",VE="operation";function $c(n){n=le(n);var s=ke(n,mv)||null,a=ke(n,yv)||null,h=ke(n,wv)||null;if(h=h&&KE[h]||null,!s||!a||!h)throw new T("argument-error",mv+", "+yv+"and "+wv+" are required in a valid action code URL.");ee(this,{apiKey:s,operation:h,code:a,continueUrl:ke(n,jE)||null,languageCode:ke(n,qE)||null,tenantId:ke(n,BE)||null})}var mv="apiKey",yv="oobCode",jE="continueUrl",qE="languageCode",wv="mode",BE="tenantId",KE={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:zc,signIn:Qs,verifyAndChangeEmail:lo,verifyEmail:"VERIFY_EMAIL"};function bv(n){try{return new $c(n)}catch{return null}}function Xs(n){var s=n[GE];if(typeof s>"u")throw new T("missing-continue-uri");if(typeof s!="string"||typeof s=="string"&&!s.length)throw new T("invalid-continue-uri");this.h=s,this.b=this.a=null,this.g=!1;var a=n[Iv];if(a&&typeof a=="object"){s=a[Av];var h=a[_v];if(a=a[Sv],typeof s=="string"&&s.length){if(this.a=s,typeof h<"u"&&typeof h!="boolean")throw new T("argument-error",_v+" property must be a boolean when specified.");if(this.g=!!h,typeof a<"u"&&(typeof a!="string"||typeof a=="string"&&!a.length))throw new T("argument-error",Sv+" property must be a non empty string when specified.");this.b=a||null}else{if(typeof s<"u")throw new T("argument-error",Av+" property must be a non empty string when specified.");if(typeof h<"u"||typeof a<"u")throw new T("missing-android-pkg-name")}}else if(typeof a<"u")throw new T("argument-error",Iv+" property must be a non null object when specified.");if(this.f=null,(s=n[Tv])&&typeof s=="object"){if(s=s[Nv],typeof s=="string"&&s.length)this.f=s;else if(typeof s<"u")throw new T("argument-error",Nv+" property must be a non empty string when specified.")}else if(typeof s<"u")throw new T("argument-error",Tv+" property must be a non null object when specified.");if(s=n[Wc],typeof s<"u"&&typeof s!="boolean")throw new T("argument-error",Wc+" property must be a boolean when specified.");if(this.c=!!s,n=n[Ev],typeof n<"u"&&(typeof n!="string"||typeof n=="string"&&!n.length))throw new T("argument-error",Ev+" property must be a non empty string when specified.");this.i=n||null}var Iv="android",Ev="dynamicLinkDomain",Wc="handleCodeInApp",Tv="iOS",GE="url",_v="installApp",Sv="minimumVersion",Av="packageName",Nv="bundleId";function Ys(n){var s={};s.continueUrl=n.h,s.canHandleCodeInApp=n.c,(s.androidPackageName=n.a)&&(s.androidMinimumVersion=n.b,s.androidInstallApp=n.g),s.iOSBundleId=n.f,s.dynamicLinkDomain=n.i;for(var a in s)s[a]===null&&delete s[a];return s}function HE(n){return Os(n,function(s){return s=s.toString(16),1<s.length?s:"0"+s}).join("")}var fo=null;function zE(n){var s=[];return $E(n,function(a){s.push(a)}),s}function $E(n,s){function a(N){for(;h<n.length;){var R=n.charAt(h++),Q=fo[R];if(Q!=null)return Q;if(!/^[\s\xa0]*$/.test(R))throw Error("Unknown base64 encoding at char: "+R)}return N}WE();for(var h=0;;){var d=a(-1),v=a(0),m=a(64),b=a(64);if(b===64&&d===-1)break;s(d<<2|v>>4),m!=64&&(s(v<<4&240|m>>2),b!=64&&s(m<<6&192|b))}}function WE(){if(!fo){fo={};for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),s=["+/=","+/","-_=","-_.","-_"],a=0;5>a;a++)for(var h=n.concat(s[a].split("")),d=0;d<h.length;d++){var v=h[d];fo[v]===void 0&&(fo[v]=d)}}}function Js(n){var s=kv(n);if(!(s&&s.sub&&s.iss&&s.aud&&s.exp))throw Error("Invalid JWT");this.h=n,this.a=s.exp,this.i=s.sub,n=Date.now()/1e3,this.g=s.iat||(n>this.a?this.a:n),this.b=s.provider_id||s.firebase&&s.firebase.sign_in_provider||null,this.f=s.firebase&&s.firebase.tenant||null,this.c=!!s.is_anonymous||this.b=="anonymous"}Js.prototype.T=function(){return this.f},Js.prototype.l=function(){return this.c},Js.prototype.toString=function(){return this.h};function Zs(n){try{return new Js(n)}catch{return null}}function kv(n){if(!n||(n=n.split("."),n.length!=3))return null;n=n[1];for(var s=(4-n.length%4)%4,a=0;a<s;a++)n+=".";try{var h=zE(n);for(n=[],a=s=0;s<h.length;){var d=h[s++];if(128>d)n[a++]=String.fromCharCode(d);else if(191<d&&224>d){var v=h[s++];n[a++]=String.fromCharCode((d&31)<<6|v&63)}else if(239<d&&365>d){v=h[s++];var m=h[s++],b=h[s++],N=((d&7)<<18|(v&63)<<12|(m&63)<<6|b&63)-65536;n[a++]=String.fromCharCode(55296+(N>>10)),n[a++]=String.fromCharCode(56320+(N&1023))}else v=h[s++],m=h[s++],n[a++]=String.fromCharCode((d&15)<<12|(v&63)<<6|m&63)}return JSON.parse(n.join(""))}catch{}return null}var Dv="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),tu=["client_id","response_type","scope","redirect_uri","state"],Qc={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:tu},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:tu},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:tu},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Dv},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Xc(n){for(var s in Qc)if(Qc[s].fa==n)return Qc[s];return null}function Cv(n){var s={};s["facebook.com"]=Ov,s["google.com"]=Lv,s["github.com"]=xv,s["twitter.com"]=Pv;var a=n&&n[Rv];try{if(a)return s[a]?new s[a](n):new Ye(n);if(typeof n[Yc]<"u")return new Jc(n)}catch{}return null}var Yc="idToken",Rv="providerId";function Jc(n){var s=n[Rv];if(!s&&n[Yc]){var a=Zs(n[Yc]);a&&a.b&&(s=a.b)}if(!s)throw Error("Invalid additional user info!");(s=="anonymous"||s=="custom")&&(s=null),a=!1,typeof n.isNewUser<"u"?a=!!n.isNewUser:n.kind==="identitytoolkit#SignupNewUserResponse"&&(a=!0),q(this,"providerId",s),q(this,"isNewUser",a)}function Ye(n){Jc.call(this,n),n=Zr(n.rawUserInfo||"{}"),q(this,"profile",jc(n||{}))}F(Ye,Jc);function Ov(n){if(Ye.call(this,n),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}F(Ov,Ye);function xv(n){if(Ye.call(this,n),this.providerId!="github.com")throw Error("Invalid provider ID!");q(this,"username",this.profile&&this.profile.login||null)}F(xv,Ye);function Lv(n){if(Ye.call(this,n),this.providerId!="google.com")throw Error("Invalid provider ID!")}F(Lv,Ye);function Pv(n){if(Ye.call(this,n),this.providerId!="twitter.com")throw Error("Invalid provider ID!");q(this,"username",n.screenName||null)}F(Pv,Ye);function Mv(n){var s=le(n),a=ke(s,"link"),h=ke(le(a),"link");return s=ke(s,"deep_link_id"),ke(le(s),"link")||s||h||a||n}function eu(n,s){if(!n&&!s)throw new T("internal-error","Internal assert: no raw session string available");if(n&&s)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=n||null,this.b=s||null,this.type=this.a?po:nu}var po="enroll",nu="signin";eu.prototype.Ha=function(){return this.a?G(this.a):G(this.b)},eu.prototype.w=function(){return this.type==po?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function ti(){}ti.prototype.ka=function(){},ti.prototype.b=function(){},ti.prototype.c=function(){},ti.prototype.w=function(){};function ei(n,s){return n.then(function(a){if(a[qe]){var h=Zs(a[qe]);if(!h||s!=h.i)throw new T("user-mismatch");return a}throw new T("user-mismatch")}).o(function(a){throw a&&a.code&&a.code==Pe+"user-not-found"?new T("user-mismatch"):a})}function rr(n,s){if(s)this.a=s;else throw new T("internal-error","failed to construct a credential");q(this,"providerId",n),q(this,"signInMethod",n)}rr.prototype.ka=function(n){return Eh(n,Zc(this))},rr.prototype.b=function(n,s){var a=Zc(this);return a.idToken=s,Th(n,a)},rr.prototype.c=function(n,s){return ei(_h(n,Zc(this)),s)};function Zc(n){return{pendingToken:n.a,requestUri:"http://localhost"}}rr.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function QE(n){if(n&&n.providerId&&n.signInMethod&&n.providerId.indexOf("saml.")==0&&n.pendingToken)try{return new rr(n.providerId,n.pendingToken)}catch{}return null}function hn(n,s,a){if(this.a=null,s.idToken||s.accessToken)s.idToken&&q(this,"idToken",s.idToken),s.accessToken&&q(this,"accessToken",s.accessToken),s.nonce&&!s.pendingToken&&q(this,"nonce",s.nonce),s.pendingToken&&(this.a=s.pendingToken);else if(s.oauthToken&&s.oauthTokenSecret)q(this,"accessToken",s.oauthToken),q(this,"secret",s.oauthTokenSecret);else throw new T("internal-error","failed to construct a credential");q(this,"providerId",n),q(this,"signInMethod",a)}hn.prototype.ka=function(n){return Eh(n,th(this))},hn.prototype.b=function(n,s){var a=th(this);return a.idToken=s,Th(n,a)},hn.prototype.c=function(n,s){var a=th(this);return ei(_h(n,a),s)};function th(n){var s={};return n.idToken&&(s.id_token=n.idToken),n.accessToken&&(s.access_token=n.accessToken),n.secret&&(s.oauth_token_secret=n.secret),s.providerId=n.providerId,n.nonce&&!n.a&&(s.nonce=n.nonce),s={postBody:Qp(s).toString(),requestUri:"http://localhost"},n.a&&(delete s.postBody,s.pendingToken=n.a),s}hn.prototype.w=function(){var n={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(n.oauthIdToken=this.idToken),this.accessToken&&(n.oauthAccessToken=this.accessToken),this.secret&&(n.oauthTokenSecret=this.secret),this.nonce&&(n.nonce=this.nonce),this.a&&(n.pendingToken=this.a),n};function XE(n){if(n&&n.providerId&&n.signInMethod){var s={idToken:n.oauthIdToken,accessToken:n.oauthTokenSecret?null:n.oauthAccessToken,oauthTokenSecret:n.oauthTokenSecret,oauthToken:n.oauthTokenSecret&&n.oauthAccessToken,nonce:n.nonce,pendingToken:n.pendingToken};try{return new hn(n.providerId,s,n.signInMethod)}catch{}}return null}function ir(n,s){this.Qc=s||[],ee(this,{providerId:n,isOAuthProvider:!0}),this.Jb={},this.qb=(Xc(n)||{}).Ja||null,this.pb=null}ir.prototype.Ka=function(n){return this.Jb=En(n),this};function Fv(n){if(typeof n!="string"||n.indexOf("saml.")!=0)throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');ir.call(this,n,[])}F(Fv,ir);function we(n){ir.call(this,n,tu),this.a=[]}F(we,ir),we.prototype.Ca=function(n){return an(this.a,n)||this.a.push(n),this},we.prototype.Rb=function(){return $n(this.a)},we.prototype.credential=function(n,s){var a;if(A(n)?a={idToken:n.idToken||null,accessToken:n.accessToken||null,nonce:n.rawNonce||null}:a={idToken:n||null,accessToken:s||null},!a.idToken&&!a.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new hn(this.providerId,a,this.providerId)};function or(){we.call(this,"facebook.com")}F(or,we),q(or,"PROVIDER_ID","facebook.com"),q(or,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function Uv(n){if(!n)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var s=n;return A(n)&&(s=n.accessToken),new or().credential({accessToken:s})}function sr(){we.call(this,"github.com")}F(sr,we),q(sr,"PROVIDER_ID","github.com"),q(sr,"GITHUB_SIGN_IN_METHOD","github.com");function Vv(n){if(!n)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var s=n;return A(n)&&(s=n.accessToken),new sr().credential({accessToken:s})}function ur(){we.call(this,"google.com"),this.Ca("profile")}F(ur,we),q(ur,"PROVIDER_ID","google.com"),q(ur,"GOOGLE_SIGN_IN_METHOD","google.com");function jv(n,s){var a=n;return A(n)&&(a=n.idToken,s=n.accessToken),new ur().credential({idToken:a,accessToken:s})}function ni(){ir.call(this,"twitter.com",Dv)}F(ni,ir),q(ni,"PROVIDER_ID","twitter.com"),q(ni,"TWITTER_SIGN_IN_METHOD","twitter.com");function qv(n,s){var a=n;if(A(a)||(a={oauthToken:n,oauthTokenSecret:s}),!a.oauthToken||!a.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new hn("twitter.com",a,"twitter.com")}function Nn(n,s,a){this.a=n,this.f=s,q(this,"providerId","password"),q(this,"signInMethod",a===De.EMAIL_LINK_SIGN_IN_METHOD?De.EMAIL_LINK_SIGN_IN_METHOD:De.EMAIL_PASSWORD_SIGN_IN_METHOD)}Nn.prototype.ka=function(n){return this.signInMethod==De.EMAIL_LINK_SIGN_IN_METHOD?tt(n,LT,{email:this.a,oobCode:this.f}):tt(n,vg,{email:this.a,password:this.f})},Nn.prototype.b=function(n,s){return this.signInMethod==De.EMAIL_LINK_SIGN_IN_METHOD?tt(n,PT,{idToken:s,email:this.a,oobCode:this.f}):tt(n,pg,{idToken:s,email:this.a,password:this.f})},Nn.prototype.c=function(n,s){return ei(this.ka(n),s)},Nn.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function YE(n){return n&&n.email&&n.password?new Nn(n.email,n.password,n.signInMethod):null}function De(){ee(this,{providerId:"password",isOAuthProvider:!1})}function Bv(n,s){if(s=eh(s),!s)throw new T("argument-error","Invalid email link!");return new Nn(n,s.code,De.EMAIL_LINK_SIGN_IN_METHOD)}function eh(n){return n=Mv(n),(n=bv(n))&&n.operation===Qs?n:null}ee(De,{PROVIDER_ID:"password"}),ee(De,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ee(De,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function kn(n){if(!(n.fb&&n.eb||n.La&&n.ea))throw new T("internal-error");this.a=n,q(this,"providerId","phone"),this.fa="phone",q(this,"signInMethod","phone")}kn.prototype.ka=function(n){return n.gb(vo(this))},kn.prototype.b=function(n,s){var a=vo(this);return a.idToken=s,tt(n,e_,a)},kn.prototype.c=function(n,s){var a=vo(this);return a.operation="REAUTH",n=tt(n,n_,a),ei(n,s)},kn.prototype.w=function(){var n={providerId:"phone"};return this.a.fb&&(n.verificationId=this.a.fb),this.a.eb&&(n.verificationCode=this.a.eb),this.a.La&&(n.temporaryProof=this.a.La),this.a.ea&&(n.phoneNumber=this.a.ea),n};function JE(n){if(n&&n.providerId==="phone"&&(n.verificationId&&n.verificationCode||n.temporaryProof&&n.phoneNumber)){var s={};return gt(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(a){n[a]&&(s[a]=n[a])}),new kn(s)}return null}function vo(n){return n.a.La&&n.a.ea?{temporaryProof:n.a.La,phoneNumber:n.a.ea}:{sessionInfo:n.a.fb,code:n.a.eb}}function ln(n){try{this.a=n||H.auth()}catch{throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ee(this,{providerId:"phone",isOAuthProvider:!1})}ln.prototype.gb=function(n,s){var a=this.a.a;return G(s.verify()).then(function(h){if(typeof h!="string")throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(s.type){case"recaptcha":var d=A(n)?n.session:null,v=A(n)?n.phoneNumber:n,m;return d&&d.type==po?m=d.Ha().then(function(b){return ST(a,{idToken:b,phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:h}})}):d&&d.type==nu?m=d.Ha().then(function(b){return AT(a,{mfaPendingCredential:b,mfaEnrollmentId:n.multiFactorHint&&n.multiFactorHint.uid||n.multiFactorUid,phoneSignInInfo:{recaptchaToken:h}})}):m=_T(a,{phoneNumber:v,recaptchaToken:h}),m.then(function(b){return typeof s.reset=="function"&&s.reset(),b},function(b){throw typeof s.reset=="function"&&s.reset(),b});default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function Kv(n,s){if(!n)throw new T("missing-verification-id");if(!s)throw new T("missing-verification-code");return new kn({fb:n,eb:s})}ee(ln,{PROVIDER_ID:"phone"}),ee(ln,{PHONE_SIGN_IN_METHOD:"phone"});function nh(n){if(n.temporaryProof&&n.phoneNumber)return new kn({La:n.temporaryProof,ea:n.phoneNumber});var s=n&&n.providerId;if(!s||s==="password")return null;var a=n&&n.oauthAccessToken,h=n&&n.oauthTokenSecret,d=n&&n.nonce,v=n&&n.oauthIdToken,m=n&&n.pendingToken;try{switch(s){case"google.com":return jv(v,a);case"facebook.com":return Uv(a);case"github.com":return Vv(a);case"twitter.com":return qv(a,h);default:return a||h||v||m?m?s.indexOf("saml.")==0?new rr(s,m):new hn(s,{pendingToken:m,idToken:n.oauthIdToken,accessToken:n.oauthAccessToken},s):new we(s).credential({idToken:v,accessToken:a,rawNonce:d}):null}}catch{return null}}function rh(n){if(!n.isOAuthProvider)throw new T("invalid-oauth-provider")}function Ve(n,s,a,h,d,v,m){if(this.c=n,this.b=s||null,this.g=a||null,this.f=h||null,this.i=v||null,this.h=m||null,this.a=d||null,this.g||this.a){if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}else throw new T("invalid-auth-event")}Ve.prototype.getUid=function(){var n=[];return n.push(this.c),this.b&&n.push(this.b),this.f&&n.push(this.f),this.h&&n.push(this.h),n.join("-")},Ve.prototype.T=function(){return this.h},Ve.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function Gv(n){return n=n||{},n.type?new Ve(n.type,n.eventId,n.urlResponse,n.sessionId,n.error&&jr(n.error),n.postBody,n.tenantId):null}function ZE(){this.b=null,this.a=[]}var ih=null;function tT(n){var s=ih;s.a.push(n),s.b||(s.b=function(a){for(var h=0;h<s.a.length;h++)s.a[h](a)},n=pt("universalLinks.subscribe",f),typeof n=="function"&&n(null,s.b))}function oh(n){var s="unauthorized-domain",a=void 0,h=le(n);n=h.a,h=h.c,h=="chrome-extension"?a=pp("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",n):h=="http"||h=="https"?a=pp("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",n):s="operation-not-supported-in-this-environment",T.call(this,s,a)}F(oh,T);function go(n,s,a){T.call(this,n,a),n=s||{},n.Kb&&q(this,"email",n.Kb),n.ea&&q(this,"phoneNumber",n.ea),n.credential&&q(this,"credential",n.credential),n.$b&&q(this,"tenantId",n.$b)}F(go,T),go.prototype.w=function(){var n={code:this.code,message:this.message};this.email&&(n.email=this.email),this.phoneNumber&&(n.phoneNumber=this.phoneNumber),this.tenantId&&(n.tenantId=this.tenantId);var s=this.credential&&this.credential.w();return s&&ae(n,s),n},go.prototype.toJSON=function(){return this.w()};function ru(n){if(n.code){var s=n.code||"";s.indexOf(Pe)==0&&(s=s.substring(Pe.length));var a={credential:nh(n),$b:n.tenantId};if(n.email)a.Kb=n.email;else if(n.phoneNumber)a.ea=n.phoneNumber;else if(!a.credential)return new T(s,n.message||void 0);return new go(s,a,n.message)}return null}function mo(){}mo.prototype.c=null;function Hv(n){return n.c||(n.c=n.b())}var sh;function iu(){}F(iu,mo),iu.prototype.a=function(){var n=zv(this);return n?new ActiveXObject(n):new XMLHttpRequest},iu.prototype.b=function(){var n={};return zv(this)&&(n[0]=!0,n[1]=!0),n};function zv(n){if(!n.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var s=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],a=0;a<s.length;a++){var h=s[a];try{return new ActiveXObject(h),n.f=h}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return n.f}sh=new iu;function ou(){}F(ou,mo),ou.prototype.a=function(){var n=new XMLHttpRequest;if("withCredentials"in n)return n;if(typeof XDomainRequest<"u")return new $v;throw Error("Unsupported browser")},ou.prototype.b=function(){return{}};function $v(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=C(this.qc,this),this.a.onerror=C(this.Tb,this),this.a.onprogress=C(this.rc,this),this.a.ontimeout=C(this.vc,this)}e=$v.prototype,e.open=function(n,s,a){if(a!=null&&!a)throw Error("Only async requests are supported.");this.a.open(n,s)},e.send=function(n){if(n)if(typeof n=="string")this.a.send(n);else throw Error("Only string data is supported");else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(n){return n.toLowerCase()=="content-type"?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,uh(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",uh(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,uh(this,1)};function uh(n,s){n.readyState=s,n.onreadystatechange&&n.onreadystatechange()}e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function ah(n,s,a){this.reset(n,s,a,void 0,void 0)}ah.prototype.a=null,ah.prototype.reset=function(n,s,a,h,d){delete this.a};function ch(n){this.f=n,this.b=this.c=this.a=null}function yo(n,s){this.name=n,this.value=s}yo.prototype.toString=function(){return this.name};var Wv=new yo("SEVERE",1e3),hh=new yo("WARNING",900),eT=new yo("CONFIG",700),nT=new yo("FINE",500);function Qv(n){return n.c?n.c:n.a?Qv(n.a):(Br("Root logger has no level set."),null)}ch.prototype.log=function(n,s,a){if(n.value>=Qv(this).value)for(_(s)&&(s=s()),n=new ah(n,String(s),this.f),a&&(n.a=a),a=this;a;)a=a.a};var lh={},su=null;function fh(n){su||(su=new ch(""),lh[""]=su,su.c=eT);var s;if(!(s=lh[n])){s=new ch(n);var a=n.lastIndexOf("."),h=n.substr(a+1);a=fh(n.substr(0,a)),a.b||(a.b={}),a.b[h]=s,s.a=a,lh[n]=s}return s}function Ce(n,s){n&&n.log(nT,s,void 0)}function uu(n){this.f=n}F(uu,mo),uu.prototype.a=function(){return new au(this.f)},uu.prototype.b=function(n){return function(){return n}}({});function au(n){te.call(this),this.u=n,this.h=void 0,this.readyState=dh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=fh("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}F(au,te);var dh=0;e=au.prototype,e.open=function(n,s){if(this.readyState!=dh)throw this.abort(),Error("Error reopening a connection");this.s=n,this.f=s,this.readyState=1,bo(this)},e.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var s={headers:this.l,method:this.s,credentials:this.h,cache:void 0};n&&(s.body=n),this.u.fetch(new Request(this.f,s)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,wo(this)),this.readyState=dh},e.uc=function(n){this.a&&(this.g=n,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=n.headers,this.readyState=2,bo(this)),this.a&&(this.readyState=3,bo(this),this.a&&(this.responseType==="arraybuffer"?n.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof f.ReadableStream<"u"&&"body"in n?(this.response=this.responseText="",this.c=n.body.getReader(),this.m=new TextDecoder,Xv(this)):n.text().then(this.tc.bind(this),this.Va.bind(this)))))};function Xv(n){n.c.read().then(n.pc.bind(n)).catch(n.Va.bind(n))}e.pc=function(n){if(this.a){var s=this.m.decode(n.value?n.value:new Uint8Array(0),{stream:!n.done});s&&(this.response=this.responseText+=s),n.done?wo(this):bo(this),this.readyState==3&&Xv(this)}},e.tc=function(n){this.a&&(this.response=this.responseText=n,wo(this))},e.sc=function(n){this.a&&(this.response=n,wo(this))},e.Va=function(n){var s=this.i;s&&s.log(hh,"Failed to fetch url "+this.f,n instanceof Error?n:Error(n)),this.a&&wo(this)};function wo(n){n.readyState=4,n.g=null,n.c=null,n.m=null,bo(n)}e.setRequestHeader=function(n,s){this.l.append(n,s)},e.getResponseHeader=function(n){return this.b?this.b.get(n.toLowerCase())||"":((n=this.i)&&n.log(hh,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var n=this.i;return n&&n.log(hh,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}n=[];for(var s=this.b.entries(),a=s.next();!a.done;)a=a.value,n.push(a[0]+": "+a[1]),a=s.next();return n.join(`\r
`)};function bo(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(au.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(n){this.h=n?"include":"same-origin"}});function Io(n){te.call(this),this.headers=new Wr,this.D=n||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Yv,this.u=this.S=!1}F(Io,te);var Yv="";Io.prototype.b=fh("goog.net.XhrIo");var rT=/^https?$/i,iT=["POST","PUT"];function oT(n,s,a,h,d){if(n.a)throw Error("[goog.net.XhrIo] Object is active with another request="+n.l+"; newUri="+s);a=a?a.toUpperCase():"GET",n.l=s,n.h="",n.P=a,n.J=!1,n.c=!0,n.a=n.D?n.D.a():sh.a(),n.C=n.D?Hv(n.D):Hv(sh),n.a.onreadystatechange=C(n.Wb,n);try{Ce(n.b,fn(n,"Opening Xhr")),n.N=!0,n.a.open(a,String(s),!0),n.N=!1}catch(m){Ce(n.b,fn(n,"Error opening Xhr: "+m.message)),Jv(n,m);return}s=h||"";var v=new Wr(n.headers);d&&lE(d,function(m,b){v.set(b,m)}),d=kI(v.Y()),h=f.FormData&&s instanceof f.FormData,!an(iT,a)||d||h||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),v.forEach(function(m,b){this.a.setRequestHeader(b,m)},n),n.m&&(n.a.responseType=n.m),"withCredentials"in n.a&&n.a.withCredentials!==n.S&&(n.a.withCredentials=n.S);try{eg(n),0<n.g&&(n.u=sT(n.a),Ce(n.b,fn(n,"Will abort after "+n.g+"ms if incomplete, xhr2 "+n.u)),n.u?(n.a.timeout=n.g,n.a.ontimeout=C(n.Ma,n)):n.s=Ac(n.Ma,n.g,n)),Ce(n.b,fn(n,"Sending request")),n.i=!0,n.a.send(s),n.i=!1}catch(m){Ce(n.b,fn(n,"Send error: "+m.message)),Jv(n,m)}}function sT(n){return Fe&&yp(9)&&typeof n.timeout=="number"&&n.ontimeout!==void 0}function uT(n){return n.toLowerCase()=="content-type"}e=Io.prototype,e.Ma=function(){typeof l<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ce(this.b,fn(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function Jv(n,s){n.c=!1,n.a&&(n.f=!0,n.a.abort(),n.f=!1),n.h=s,Zv(n),cu(n)}function Zv(n){n.J||(n.J=!0,n.dispatchEvent("complete"),n.dispatchEvent("error"))}e.abort=function(){this.a&&this.c&&(Ce(this.b,fn(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),cu(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),cu(this,!0)),Io.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?tg(this):this.Jc())},e.Jc=function(){tg(this)};function tg(n){if(n.c&&typeof l<"u"){if(n.C[1]&&Eo(n)==4&&hu(n)==2)Ce(n.b,fn(n,"Local request error detected and ignored"));else if(n.i&&Eo(n)==4)Ac(n.Wb,0,n);else if(n.dispatchEvent("readystatechange"),Eo(n)==4){Ce(n.b,fn(n,"Request complete")),n.c=!1;try{var s=hu(n);t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break t;default:a=!1}var h;if(!(h=a)){var d;if(d=s===0){var v=String(n.l).match($p)[1]||null;if(!v&&f.self&&f.self.location){var m=f.self.location.protocol;v=m.substr(0,m.length-1)}d=!rT.test(v?v.toLowerCase():"")}h=d}if(h)n.dispatchEvent("complete"),n.dispatchEvent("success");else{try{var b=2<Eo(n)?n.a.statusText:""}catch(N){Ce(n.b,"Can not get status: "+N.message),b=""}n.h=b+" ["+hu(n)+"]",Zv(n)}}finally{cu(n)}}}}function cu(n,s){if(n.a){eg(n);var a=n.a,h=n.C[0]?w:null;n.a=null,n.C=null,s||n.dispatchEvent("ready");try{a.onreadystatechange=h}catch(d){(n=n.b)&&n.log(Wv,"Problem encountered resetting onreadystatechange: "+d.message,void 0)}}}function eg(n){n.a&&n.u&&(n.a.ontimeout=null),n.s&&(f.clearTimeout(n.s),n.s=null)}function Eo(n){return n.a?n.a.readyState:0}function hu(n){try{return 2<Eo(n)?n.a.status:-1}catch{return-1}}function aT(n){try{return n.a?n.a.responseText:""}catch(s){return Ce(n.b,"Can not get responseText: "+s.message),""}}e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Yv:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var n=this.b;return n&&n.log(Wv,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(s){return Ce(this.b,"Can not get response: "+s.message),null}};function fn(n,s){return s+" ["+n.P+" "+n.l+" "+hu(n)+"]"}function ar(n){var s=lT;this.g=[],this.u=s,this.s=n||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}ar.prototype.cancel=function(n){if(this.a)this.c instanceof ar&&this.c.cancel();else{if(this.b){var s=this.b;delete this.b,n?s.cancel(n):(s.l--,0>=s.l&&s.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(n=new _o,lu(this),To(this,!1,n))}},ar.prototype.m=function(n,s){this.i=!1,To(this,n,s)};function To(n,s,a){n.a=!0,n.c=a,n.f=!s,rg(n)}function lu(n){if(n.a){if(!n.v)throw new fu;n.v=!1}}function cT(n,s){ph(n,null,s,void 0)}function ph(n,s,a,h){n.g.push([s,a,h]),n.a&&rg(n)}ar.prototype.then=function(n,s,a){var h,d,v=new Z(function(m,b){h=m,d=b});return ph(this,h,function(m){m instanceof _o?v.cancel():d(m)}),v.then(n,s,a)},ar.prototype.$goog_Thenable=!0;function ng(n){return NI(n.g,function(s){return _(s[1])})}function rg(n){if(n.h&&n.a&&ng(n)){var s=n.h,a=du[s];a&&(f.clearTimeout(a.a),delete du[s]),n.h=0}n.b&&(n.b.l--,delete n.b),s=n.c;for(var h=a=!1;n.g.length&&!n.i;){var d=n.g.shift(),v=d[0],m=d[1];if(d=d[2],v=n.f?m:v)try{var b=v.call(d||n.s,s);b!==void 0&&(n.f=n.f&&(b==s||b instanceof Error),n.c=s=b),($d(s)||typeof f.Promise=="function"&&s instanceof f.Promise)&&(h=!0,n.i=!0)}catch(N){s=N,n.f=!0,ng(n)||(a=!0)}}n.c=s,h&&(b=C(n.m,n,!0),h=C(n.m,n,!1),s instanceof ar?(ph(s,b,h),s.C=!0):s.then(b,h)),a&&(s=new ig(s),du[s.a]=s,n.h=s.a)}function fu(){me.call(this)}F(fu,me),fu.prototype.message="Deferred has already fired",fu.prototype.name="AlreadyCalledError";function _o(){me.call(this)}F(_o,me),_o.prototype.message="Deferred was canceled",_o.prototype.name="CanceledError";function ig(n){this.a=f.setTimeout(C(this.c,this),0),this.b=n}ig.prototype.c=function(){throw delete du[this.a],this.b};var du={};function vh(n){var s={},a=s.document||document,h=sp(n).toString(),d=Us(document,"SCRIPT"),v={Xb:d,Ma:void 0},m=new ar(v),b=null,N=s.timeout!=null?s.timeout:5e3;return 0<N&&(b=window.setTimeout(function(){pu(d,!0);var R=new gh(dT,"Timeout reached for loading script "+h);lu(m),To(m,!1,R)},N),v.Ma=b),d.onload=d.onreadystatechange=function(){d.readyState&&d.readyState!="loaded"&&d.readyState!="complete"||(pu(d,s.xd||!1,b),lu(m),To(m,!0,null))},d.onerror=function(){pu(d,!0,b);var R=new gh(fT,"Error while loading script "+h);lu(m),To(m,!1,R)},v=s.attributes||{},ae(v,{type:"text/javascript",charset:"UTF-8"}),bp(d,v),BI(d,n),hT(a).appendChild(d),m}function hT(n){var s;return(s=(n||document).getElementsByTagName("HEAD"))&&s.length!=0?s[0]:n.documentElement}function lT(){if(this&&this.Xb){var n=this.Xb;n&&n.tagName=="SCRIPT"&&pu(n,!0,this.Ma)}}function pu(n,s,a){a!=null&&f.clearTimeout(a),n.onload=w,n.onerror=w,n.onreadystatechange=w,s&&window.setTimeout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)},0)}var fT=0,dT=1;function gh(n,s){var a="Jsloader error (code #"+n+")";s&&(a+=": "+s),me.call(this,a),this.code=n}F(gh,me);function vu(n){this.f=n}F(vu,mo),vu.prototype.a=function(){return new this.f},vu.prototype.b=function(){return{}};function je(n,s,a){if(this.c=n,n=s||{},this.l=n.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=n.secureTokenTimeout||pT,this.g=En(n.secureTokenHeaders||vT),this.h=n.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=n.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=n.firebaseTimeout||gT,this.a=En(n.firebaseHeaders||mT),a&&(this.a["X-Client-Version"]=a,this.g["X-Client-Version"]=a),a=Qe()=="Node",a=f.XMLHttpRequest||a&&H.INTERNAL.node&&H.INTERNAL.node.XMLHttpRequest,!a&&!Ue())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Ue()?this.f=new uu(self):ov()?this.f=new vu(a):this.f=new ou,this.b=null}var mh,qe="idToken",pT=new An(3e4,6e4),vT={"Content-Type":"application/x-www-form-urlencoded"},gT=new An(3e4,6e4),mT={"Content-Type":"application/json"};function og(n,s){s?n.a["X-Firebase-Locale"]=s:delete n.a["X-Firebase-Locale"]}function gu(n,s){s&&(n.l=yh("https://securetoken.googleapis.com/v1/token",s),n.h=yh("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",s),n.i=yh("https://identitytoolkit.googleapis.com/v2/",s))}function yh(n,s){return n=le(n),s=le(s.url),n.f=n.a+n.f,no(n,s.c),n.a=s.a,ro(n,s.g),n.toString()}function sg(n,s){s?(n.a["X-Client-Version"]=s,n.g["X-Client-Version"]=s):(delete n.a["X-Client-Version"],delete n.g["X-Client-Version"])}je.prototype.T=function(){return this.b};function ug(n,s,a,h,d,v,m){IE()||Ue()?n=C(n.u,n):(mh||(mh=new Z(function(b,N){wT(b,N)})),n=C(n.s,n)),n(s,a,h,d,v,m)}je.prototype.u=function(n,s,a,h,d,v){if(Ue()&&(typeof f.fetch>"u"||typeof f.Headers>"u"||typeof f.Request>"u"))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var m=new Io(this.f);if(v){m.g=Math.max(0,v);var b=setTimeout(function(){m.dispatchEvent("timeout")},v)}Gp(m,"complete",function(){b&&clearTimeout(b);var N=null;try{N=JSON.parse(aT(this))||null}catch{N=null}s&&s(N)}),Sc(m,"ready",function(){b&&clearTimeout(b),Fp(this)}),Sc(m,"timeout",function(){b&&clearTimeout(b),Fp(this),s&&s(null)}),oT(m,n,a,h,d)};var yT=new $e(Ls,"https://apis.google.com/js/client.js?onload=%{onload}"),ag="__fcb"+Math.floor(1e6*Math.random()).toString();function wT(n,s){if(((window.gapi||{}).client||{}).request)n();else{f[ag]=function(){((window.gapi||{}).client||{}).request?n():s(Error("CORS_UNSUPPORTED"))};var a=uc(yT,{onload:ag});cT(vh(a),function(){s(Error("CORS_UNSUPPORTED"))})}}je.prototype.s=function(n,s,a,h,d){var v=this;mh.then(function(){window.gapi.client.setApiKey(v.c);var m=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:n,method:a,body:h,headers:d,authType:"none",callback:function(b){window.gapi.auth.setToken(m),s&&s(b)}})}).o(function(m){s&&s({error:{message:m&&m.message||"CORS_UNSUPPORTED"}})})};function bT(n,s){return new Z(function(a,h){s.grant_type=="refresh_token"&&s.refresh_token||s.grant_type=="authorization_code"&&s.code?ug(n,n.l+"?key="+encodeURIComponent(n.c),function(d){d?d.error?h(Ah(d)):d.access_token&&d.refresh_token?a(d):h(new T("internal-error")):h(new T("network-request-failed"))},"POST",Qp(s).toString(),n.g,n.m.get()):h(new T("internal-error"))})}function cg(n,s,a,h,d,v,m){var b=le(s+a);Et(b,"key",n.c),m&&Et(b,"cb",Date.now().toString());var N=h=="GET";if(N)for(var R in d)d.hasOwnProperty(R)&&Et(b,R,d[R]);return new Z(function(Q,at){ug(n,b.toString(),function(it){it?it.error?at(Ah(it,v||{})):Q(it):at(new T("network-request-failed"))},h,N?void 0:Jp(av(d)),n.a,n.v.get())})}function cr(n){if(n=n.email,typeof n!="string"||!_E.test(n))throw new T("invalid-email")}function hg(n){"email"in n&&cr(n)}function IT(n,s){return tt(n,RT,{identifier:s,continueUri:Ws()?so():"http://localhost"}).then(function(a){return a.signinMethods||[]})}function ET(n){return tt(n,KT,{}).then(function(s){return s.authorizedDomains||[]})}function fe(n){if(!n[qe])throw n.mfaPendingCredential?new T("multi-factor-auth-required",null,En(n)):new T("internal-error")}function wh(n){if(n.phoneNumber||n.temporaryProof){if(!n.phoneNumber||!n.temporaryProof)throw new T("internal-error")}else{if(!n.sessionInfo)throw new T("missing-verification-id");if(!n.code)throw new T("missing-verification-code")}}je.prototype.Ab=function(){return tt(this,$T,{})},je.prototype.Cb=function(n,s){return tt(this,dg,{idToken:n,email:s})},je.prototype.Db=function(n,s){return tt(this,pg,{idToken:n,password:s})};var TT={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};e=je.prototype,e.Eb=function(n,s){var a={idToken:n},h=[];return ep(TT,function(d,v){var m=s[v];m===null?h.push(d):v in s&&(a[v]=m)}),h.length&&(a.deleteAttribute=h),tt(this,dg,a)},e.wb=function(n,s){return n={requestType:"PASSWORD_RESET",email:n},ae(n,s),tt(this,BT,n)},e.xb=function(n,s){return n={requestType:"EMAIL_SIGNIN",email:n},ae(n,s),tt(this,VT,n)},e.vb=function(n,s){return n={requestType:"VERIFY_EMAIL",idToken:n},ae(n,s),tt(this,jT,n)},e.Fb=function(n,s,a){return n={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:n,newEmail:s},ae(n,a),tt(this,qT,n)};function _T(n,s){return tt(n,zT,s)}e.gb=function(n){return tt(this,t_,n)};function ST(n,s){return tt(n,WT,s).then(function(a){return a.phoneSessionInfo.sessionInfo})}function lg(n){if(!n.phoneVerificationInfo)throw new T("internal-error");if(!n.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!n.phoneVerificationInfo.code)throw new T("missing-verification-code")}function AT(n,s){return tt(n,QT,s).then(function(a){return a.phoneResponseInfo.sessionInfo})}function NT(n,s,a){return tt(n,xT,{idToken:s,deleteProvider:a})}function bh(n){if(!n.requestUri||!n.sessionId&&!n.postBody&&!n.pendingToken)throw new T("internal-error")}function Ih(n,s){return s.oauthIdToken&&s.providerId&&s.providerId.indexOf("oidc.")==0&&!s.pendingToken&&(n.sessionId?s.nonce=n.sessionId:n.postBody&&(n=new Zn(n.postBody),Dc(n,"nonce")&&(s.nonce=n.get("nonce")))),s}function fg(n){var s=null;if(n.needConfirmation?(n.code="account-exists-with-different-credential",s=ru(n)):n.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(n.code="credential-already-in-use",s=ru(n)):n.errorMessage=="EMAIL_EXISTS"?(n.code="email-already-in-use",s=ru(n)):n.errorMessage&&(s=gg(n.errorMessage)),s)throw s;fe(n)}function Eh(n,s){return s.returnIdpCredential=!0,tt(n,XT,s)}function Th(n,s){return s.returnIdpCredential=!0,tt(n,JT,s)}function _h(n,s){return s.returnIdpCredential=!0,s.autoCreate=!1,tt(n,YT,s)}function Sh(n){if(!n.oobCode)throw new T("invalid-action-code")}e.ob=function(n,s){return tt(this,HT,{oobCode:n,newPassword:s})},e.Sa=function(n){return tt(this,DT,{oobCode:n})},e.kb=function(n){return tt(this,kT,{oobCode:n})};var kT={endpoint:"setAccountInfo",A:Sh,Z:"email",B:!0},DT={endpoint:"resetPassword",A:Sh,G:function(n){var s=n.requestType;if(!s||!n.email&&s!="EMAIL_SIGNIN"&&s!="VERIFY_AND_CHANGE_EMAIL")throw new T("internal-error")},B:!0},CT={endpoint:"signupNewUser",A:function(n){if(cr(n),!n.password)throw new T("weak-password")},G:fe,V:!0,B:!0},RT={endpoint:"createAuthUri",B:!0},OT={endpoint:"deleteAccount",O:["idToken"]},xT={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(n){if(!Array.isArray(n.deleteProvider))throw new T("internal-error")}},LT={endpoint:"emailLinkSignin",O:["email","oobCode"],A:cr,G:fe,V:!0,B:!0},PT={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:cr,G:fe,V:!0},MT={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:lg,G:fe,B:!0,Na:!0},FT={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:lg,G:fe,B:!0,Na:!0},UT={endpoint:"getAccountInfo"},VT={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(n){if(n.requestType!="EMAIL_SIGNIN")throw new T("internal-error");cr(n)},Z:"email",B:!0},jT={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(n){if(n.requestType!="VERIFY_EMAIL")throw new T("internal-error")},Z:"email",B:!0},qT={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(n){if(n.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new T("internal-error")},Z:"email",B:!0},BT={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(n){if(n.requestType!="PASSWORD_RESET")throw new T("internal-error");cr(n)},Z:"email",B:!0},KT={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},GT={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(n){if(!n.recaptchaSiteKey)throw new T("internal-error")}},HT={endpoint:"resetPassword",A:Sh,Z:"email",B:!0},zT={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},dg={endpoint:"setAccountInfo",O:["idToken"],A:hg,V:!0},pg={endpoint:"setAccountInfo",O:["idToken"],A:function(n){if(hg(n),!n.password)throw new T("weak-password")},G:fe,V:!0},$T={endpoint:"signupNewUser",G:fe,V:!0,B:!0},WT={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(n){if(!n.phoneEnrollmentInfo)throw new T("internal-error");if(!n.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!n.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(n){if(!n.phoneSessionInfo||!n.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},QT={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(n){if(!n.phoneSignInInfo||!n.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(n){if(!n.phoneResponseInfo||!n.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},XT={endpoint:"verifyAssertion",A:bh,Za:Ih,G:fg,V:!0,B:!0},YT={endpoint:"verifyAssertion",A:bh,Za:Ih,G:function(n){if(n.errorMessage&&n.errorMessage=="USER_NOT_FOUND")throw new T("user-not-found");if(n.errorMessage)throw gg(n.errorMessage);fe(n)},V:!0,B:!0},JT={endpoint:"verifyAssertion",A:function(n){if(bh(n),!n.idToken)throw new T("internal-error")},Za:Ih,G:fg,V:!0},ZT={endpoint:"verifyCustomToken",A:function(n){if(!n.token)throw new T("invalid-custom-token")},G:fe,V:!0,B:!0},vg={endpoint:"verifyPassword",A:function(n){if(cr(n),!n.password)throw new T("wrong-password")},G:fe,V:!0,B:!0},t_={endpoint:"verifyPhoneNumber",A:wh,G:fe,B:!0},e_={endpoint:"verifyPhoneNumber",A:function(n){if(!n.idToken)throw new T("internal-error");wh(n)},G:function(n){if(n.temporaryProof)throw n.code="credential-already-in-use",ru(n);fe(n)}},n_={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:wh,G:fe,B:!0},r_={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(n){if(!!n[qe]^!!n.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function tt(n,s,a){if(!RE(a,s.O))return dt(new T("internal-error"));var h=!!s.Na,d=s.Vb||"POST",v;return G(a).then(s.A).then(function(){return s.V&&(a.returnSecureToken=!0),s.B&&n.b&&typeof a.tenantId>"u"&&(a.tenantId=n.b),h?cg(n,n.i,s.endpoint,d,a,s.Ib,s.mb||!1):cg(n,n.h,s.endpoint,d,a,s.Ib,s.mb||!1)}).then(function(m){return v=m,s.Za?s.Za(a,v):v}).then(s.G).then(function(){if(!s.Z)return v;if(!(s.Z in v))throw new T("internal-error");return v[s.Z]})}function gg(n){return Ah({error:{errors:[{message:n}],code:400,message:n}})}function Ah(n,s){var a=(n.error&&n.error.errors&&n.error.errors[0]||{}).reason||"",h={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(a=h[a]?new T(h[a]):null)return a;a=n.error&&n.error.message||"",h={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},ae(h,s||{}),s=(s=a.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<s.length?s[1]:void 0;for(var d in h)if(a.indexOf(d)===0)return new T(h[d],s);return!s&&n&&(s=ao(n)),new T("internal-error",s)}function i_(n){this.b=n,this.a=null,this.sb=o_(this)}function o_(n){return l_().then(function(){return new Z(function(s,a){pt("gapi.iframes.getContext")().open({where:document.body,url:n.b,messageHandlersFilter:pt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(h){function d(){clearTimeout(v),s()}n.a=h,n.a.restyle({setHideOnLeave:!1});var v=setTimeout(function(){a(Error("Network Error"))},h_.get());h.ping(d).then(d,function(){a(Error("Network Error"))})})})})}function s_(n,s){return n.sb.then(function(){return new Z(function(a){n.a.send(s.type,s,a,pt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function u_(n,s){n.sb.then(function(){n.a.register("authEvent",s,pt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var a_=new $e(Ls,"https://apis.google.com/js/api.js?onload=%{onload}"),c_=new An(3e4,6e4),h_=new An(5e3,15e3),mu=null;function l_(){return mu||(mu=new Z(function(n,s){function a(){hv(),pt("gapi.load")("gapi.iframes",{callback:n,ontimeout:function(){hv(),s(Error("Network Error"))},timeout:c_.get()})}if(pt("gapi.iframes.Iframe"))n();else if(pt("gapi.load"))a();else{var h="__iframefcb"+Math.floor(1e6*Math.random()).toString();f[h]=function(){pt("gapi.load")?a():s(Error("Network Error"))},h=uc(a_,{onload:h}),G(vh(h)).o(function(){s(Error("Network Error"))})}}).o(function(n){throw mu=null,n}))}function mg(n,s,a,h){this.l=n,this.h=s,this.i=a,this.g=h,this.f=null,this.g?(n=le(this.g.url),n=zs(n.c,n.a,n.g,"/emulator/auth/iframe")):n=zs("https",this.l,null,"/__/auth/iframe"),this.a=n,Et(this.a,"apiKey",this.h),Et(this.a,"appName",this.i),this.b=null,this.c=[]}mg.prototype.toString=function(){return this.f?Et(this.a,"v",this.f):We(this.a.b,"v"),this.b?Et(this.a,"eid",this.b):We(this.a.b,"eid"),this.c.length?Et(this.a,"fw",this.c.join(",")):We(this.a.b,"fw"),this.a.toString()};function Nh(n,s,a,h,d,v){this.u=n,this.s=s,this.c=a,this.m=h,this.v=v,this.i=this.g=this.l=null,this.a=d,this.h=this.f=null}Nh.prototype.zb=function(n){return this.h=n,this},Nh.prototype.toString=function(){if(this.v){var n=le(this.v.url);n=zs(n.c,n.a,n.g,"/emulator/auth/handler")}else n=zs("https",this.u,null,"/__/auth/handler");if(Et(n,"apiKey",this.s),Et(n,"appName",this.c),Et(n,"authType",this.m),this.a.isOAuthProvider){var s=this.a;try{var a=H.app(this.c).auth().la()}catch{a=null}s.pb=a,Et(n,"providerId",this.a.providerId),a=this.a,s=av(a.Jb);for(var h in s)s[h]=s[h].toString();h=a.Qc,s=En(s);for(var d=0;d<h.length;d++){var v=h[d];v in s&&delete s[v]}a.qb&&a.pb&&!s[a.qb]&&(s[a.qb]=a.pb),Wn(s)||Et(n,"customParameters",ao(s))}if(typeof this.a.Rb=="function"&&(a=this.a.Rb(),a.length&&Et(n,"scopes",a.join(","))),this.l?Et(n,"redirectUrl",this.l):We(n.b,"redirectUrl"),this.g?Et(n,"eventId",this.g):We(n.b,"eventId"),this.i?Et(n,"v",this.i):We(n.b,"v"),this.b)for(var m in this.b)this.b.hasOwnProperty(m)&&!ke(n,m)&&Et(n,m,this.b[m]);return this.h?Et(n,"tid",this.h):We(n.b,"tid"),this.f?Et(n,"eid",this.f):We(n.b,"eid"),m=kh(this.c),m.length&&Et(n,"fw",m.join(",")),n.toString()};function kh(n){try{return H.app(n).auth().Ga()}catch{return[]}}function yg(n,s,a,h,d,v){this.s=n,this.g=s,this.b=a,this.f=v,this.c=h||null,this.i=d||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function wg(n){var s=so();return ET(n).then(function(a){t:{var h=le(s),d=h.c;h=h.a;for(var v=0;v<a.length;v++){var m=a[v],b=h,N=d;if(m.indexOf("chrome-extension://")==0?b=le(m).a==b&&N=="chrome-extension":N!="http"&&N!="https"?b=!1:TE.test(m)?b=b==m:(m=m.split(".").join("\\."),b=new RegExp("^(.+\\."+m+"|"+m+")$","i").test(b)),b){a=!0;break t}}a=!1}if(!a)throw new oh(so())})}function bg(n){return n.m||(n.m=$s().then(function(){if(!n.u){var s=n.c,a=n.i,h=kh(n.b),d=new mg(n.s,n.g,n.b,n.f);d.f=s,d.b=a,d.c=$n(h||[]),n.u=d.toString()}n.v=new i_(n.u),f_(n)})),n.m}e=yg.prototype,e.Pb=function(n,s,a){var h=new T("popup-closed-by-user"),d=new T("web-storage-unsupported"),v=this,m=!1;return this.ma().then(function(){d_(v).then(function(b){b||(n&&tr(n),s(d),m=!0)})}).o(function(){}).then(function(){if(!m)return EE(n)}).then(function(){if(!m)return $r(a).then(function(){s(h)})})},e.Yb=function(){var n=qt();return!uo(n)&&!cv(n)},e.Ub=function(){return!1},e.Nb=function(n,s,a,h,d,v,m,b){if(!n)return dt(new T("popup-blocked"));if(m&&!uo())return this.ma().o(function(R){tr(n),d(R)}),h(),G();this.a||(this.a=wg(Ig(this)));var N=this;return this.a.then(function(){var R=N.ma().o(function(Q){throw tr(n),d(Q),Q});return h(),R}).then(function(){if(rh(a),!m){var R=So(N.s,N.g,N.b,s,a,null,v,N.c,void 0,N.i,b,N.f);ev(R,n)}}).o(function(R){throw R.code=="auth/network-request-failed"&&(N.a=null),R})};function Ig(n){return n.l||(n.C=n.c?Yr(n.c,kh(n.b)):null,n.l=new je(n.g,Xi(n.i),n.C),n.f&&gu(n.l,n.f)),n.l}e.Ob=function(n,s,a,h){this.a||(this.a=wg(Ig(this)));var d=this;return this.a.then(function(){rh(s);var v=So(d.s,d.g,d.b,n,s,so(),a,d.c,void 0,d.i,h,d.f);ev(v)}).o(function(v){throw v.code=="auth/network-request-failed"&&(d.a=null),v})},e.ma=function(){var n=this;return bg(this).then(function(){return n.v.sb}).o(function(){throw n.a=null,new T("network-request-failed")})},e.ac=function(){return!0};function So(n,s,a,h,d,v,m,b,N,R,Q,at){return n=new Nh(n,s,a,h,d,at),n.l=v,n.g=m,n.i=b,n.b=En(N||null),n.f=R,n.zb(Q).toString()}function f_(n){if(!n.v)throw Error("IfcHandler must be initialized!");u_(n.v,function(s){var a={};if(s&&s.authEvent){var h=!1;for(s=Gv(s.authEvent),a=0;a<n.h.length;a++)h=n.h[a](s)||h;return a={},a.status=h?"ACK":"ERROR",G(a)}return a.status="ERROR",G(a)})}function d_(n){var s={type:"webStorageSupport"};return bg(n).then(function(){return s_(n.v,s)}).then(function(a){if(a&&a.length&&typeof a[0].webStorageSupport<"u")return a[0].webStorageSupport;throw Error()})}e.Ea=function(n){this.h.push(n)},e.Ta=function(n){Me(this.h,function(s){return s==n})};function Eg(n){if(this.a=n||H.INTERNAL.reactNative&&H.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}e=Eg.prototype,e.get=function(n){return G(this.a.getItem(n)).then(function(s){return s&&Zr(s)})},e.set=function(n,s){return G(this.a.setItem(n,ao(s)))},e.U=function(n){return G(this.a.removeItem(n))},e.ca=function(){},e.ia=function(){};function Tg(n){this.b=n,this.a={},this.f=C(this.c,this)}var _g=[];function p_(){var n=Ue()?self:null;if(gt(_g,function(a){a.b==n&&(s=a)}),!s){var s=new Tg(n);_g.push(s)}return s}Tg.prototype.c=function(n){var s=n.data.eventType,a=n.data.eventId,h=this.a[s];if(h&&0<h.length){n.ports[0].postMessage({status:"ack",eventId:a,eventType:s,response:null});var d=[];gt(h,function(v){d.push(G().then(function(){return v(n.origin,n.data.data)}))}),kp(d).then(function(v){var m=[];gt(v,function(b){m.push({fulfilled:b.Qb,value:b.value,reason:b.reason?b.reason.message:void 0})}),gt(m,function(b){for(var N in b)typeof b[N]>"u"&&delete b[N]}),n.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:m})})}};function Sg(n,s,a){Wn(n.a)&&n.b.addEventListener("message",n.f),typeof n.a[s]>"u"&&(n.a[s]=[]),n.a[s].push(a)}function Ag(n){this.a=n}Ag.prototype.postMessage=function(n,s){this.a.postMessage(n,s)};function Ng(n){this.c=n,this.b=!1,this.a=[]}function kg(n,s,a,h){var d,v=a||{},m,b,N,R=null;if(n.b)return dt(Error("connection_unavailable"));var Q=h?800:50,at=typeof MessageChannel<"u"?new MessageChannel:null;return new Z(function(it,Mt){at?(d=Math.floor(Math.random()*Math.pow(10,20)).toString(),at.port1.start(),b=setTimeout(function(){Mt(Error("unsupported_event"))},Q),m=function(dn){dn.data.eventId===d&&(dn.data.status==="ack"?(clearTimeout(b),N=setTimeout(function(){Mt(Error("timeout"))},3e3)):dn.data.status==="done"?(clearTimeout(N),typeof dn.data.response<"u"?it(dn.data.response):Mt(Error("unknown_error"))):(clearTimeout(b),clearTimeout(N),Mt(Error("invalid_response"))))},R={messageChannel:at,onMessage:m},n.a.push(R),at.port1.addEventListener("message",m),n.c.postMessage({eventType:s,eventId:d,data:v},[at.port2])):Mt(Error("connection_unavailable"))}).then(function(it){return Dh(n,R),it}).o(function(it){throw Dh(n,R),it})}function Dh(n,s){if(s){var a=s.messageChannel,h=s.onMessage;a&&(a.port1.removeEventListener("message",h),a.port1.close()),Me(n.a,function(d){return d==s})}}Ng.prototype.close=function(){for(;0<this.a.length;)Dh(this,this.a[0]);this.b=!0};function Dg(){if(!Oh())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=f.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var n=this;Ue()&&self?(this.v=p_(),Sg(this.v,"keyChanged",function(s,a){return Og(n).then(function(h){return 0<h.length&&gt(n.a,function(d){d(h)}),{keyProcessed:an(h,a.key)}})}),Sg(this.v,"ping",function(){return G(["keyChanged"])})):DE().then(function(s){(n.h=s)&&(n.g=new Ng(new Ag(s)),kg(n.g,"ping",null,!0).then(function(a){a[0].fulfilled&&an(a[0].value,"keyChanged")&&(n.s=!0)}).o(function(){}))})}var Ch;function v_(n){return new Z(function(s,a){var h=n.m.deleteDatabase("firebaseLocalStorageDb");h.onsuccess=function(){s()},h.onerror=function(d){a(Error(d.target.error))}})}function Cg(n){return new Z(function(s,a){var h=n.m.open("firebaseLocalStorageDb",1);h.onerror=function(d){try{d.preventDefault()}catch{}a(Error(d.target.error))},h.onupgradeneeded=function(d){d=d.target.result;try{d.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(v){a(v)}},h.onsuccess=function(d){d=d.target.result,d.objectStoreNames.contains("firebaseLocalStorage")?s(d):v_(n).then(function(){return Cg(n)}).then(function(v){s(v)}).o(function(v){a(v)})}})}function Rh(n){return n.i||(n.i=Cg(n)),n.i}function yu(n,s){function a(d,v){Rh(n).then(s).then(d).o(function(m){if(3<++h)v(m);else return Rh(n).then(function(b){return b.close(),n.i=void 0,a(d,v)}).o(function(b){v(b)})})}var h=0;return new Z(a)}function Oh(){try{return!!f.indexedDB}catch{return!1}}function Ao(n){return n.objectStore("firebaseLocalStorage")}function No(n,s){return n.transaction(["firebaseLocalStorage"],s?"readwrite":"readonly")}function ri(n){return new Z(function(s,a){n.onsuccess=function(h){h&&h.target?s(h.target.result):s()},n.onerror=function(h){a(h.target.error)}})}e=Dg.prototype,e.set=function(n,s){var a=this,h=!1;return yu(this,function(d){return d=Ao(No(d,!0)),ri(d.get(n))}).then(function(d){return yu(a,function(v){if(v=Ao(No(v,!0)),d)return d.value=s,ri(v.put(d));a.b++,h=!0;var m={};return m.fbase_key=n,m.value=s,ri(v.add(m))})}).then(function(){return a.c[n]=s,Rg(a,n)}).oa(function(){h&&a.b--})};function Rg(n,s){return n.g&&n.h&&kE()===n.h?kg(n.g,"keyChanged",{key:s},n.s).then(function(){}).o(function(){}):G()}e.get=function(n){return yu(this,function(s){return ri(Ao(No(s,!1)).get(n))}).then(function(s){return s&&s.value})},e.U=function(n){var s=this,a=!1;return yu(this,function(h){return a=!0,s.b++,ri(Ao(No(h,!0)).delete(n))}).then(function(){return delete s.c[n],Rg(s,n)}).oa(function(){a&&s.b--})};function Og(n){return Rh(n).then(function(s){var a=Ao(No(s,!1));return a.getAll?ri(a.getAll()):new Z(function(h,d){var v=[],m=a.openCursor();m.onsuccess=function(b){(b=b.target.result)?(v.push(b.value),b.continue()):h(v)},m.onerror=function(b){d(b.target.error)}})}).then(function(s){var a={},h=[];if(n.b==0){for(h=0;h<s.length;h++)a[s[h].fbase_key]=s[h].value;h=nv(n.c,a),n.c=a}return h})}e.ca=function(n){this.a.length==0&&g_(this),this.a.push(n)},e.ia=function(n){Me(this.a,function(s){return s==n}),this.a.length==0&&xg(this)};function g_(n){function s(){n.f=setTimeout(function(){n.l=Og(n).then(function(a){0<a.length&&gt(n.a,function(h){h(a)})}).then(function(){s()}).o(function(a){a.message!="STOP_EVENT"&&s()})},800)}xg(n),s()}function xg(n){n.l&&n.l.cancel("STOP_EVENT"),n.f&&(clearTimeout(n.f),n.f=null)}function Lg(n){var s=this,a=null;this.a=[],this.type="indexedDB",this.c=n,this.b=G().then(function(){if(Oh()){var h=nr(),d="__sak"+h;return Ch||(Ch=new Dg),a=Ch,a.set(d,h).then(function(){return a.get(d)}).then(function(v){if(v!==h)throw Error("indexedDB not supported!");return a.U(d)}).then(function(){return a}).o(function(){return s.c})}return s.c}).then(function(h){return s.type=h.type,h.ca(function(d){gt(s.a,function(v){v(d)})}),h})}e=Lg.prototype,e.get=function(n){return this.b.then(function(s){return s.get(n)})},e.set=function(n,s){return this.b.then(function(a){return a.set(n,s)})},e.U=function(n){return this.b.then(function(s){return s.U(n)})},e.ca=function(n){this.a.push(n)},e.ia=function(n){Me(this.a,function(s){return s==n})};function ko(){this.a={},this.type="inMemory"}e=ko.prototype,e.get=function(n){return G(this.a[n])},e.set=function(n,s){return this.a[n]=s,G()},e.U=function(n){return delete this.a[n],G()},e.ca=function(){},e.ia=function(){};function wu(){if(!m_())throw Qe()=="Node"?new T("internal-error","The LocalStorage compatibility library was not found."):new T("web-storage-unsupported");this.a=Pg()||H.INTERNAL.node.localStorage,this.type="localStorage"}function Pg(){try{var n=f.localStorage,s=nr();return n&&(n.setItem(s,"1"),n.removeItem(s)),n}catch{return null}}function m_(){var n=Qe()=="Node";if(n=Pg()||n&&H.INTERNAL.node&&H.INTERNAL.node.localStorage,!n)return!1;try{return n.setItem("__sak","1"),n.removeItem("__sak"),!0}catch{return!1}}e=wu.prototype,e.get=function(n){var s=this;return G().then(function(){var a=s.a.getItem(n);return Zr(a)})},e.set=function(n,s){var a=this;return G().then(function(){var h=ao(s);h===null?a.U(n):a.a.setItem(n,h)})},e.U=function(n){var s=this;return G().then(function(){s.a.removeItem(n)})},e.ca=function(n){f.window&&Ne(f.window,"storage",n)},e.ia=function(n){f.window&&ye(f.window,"storage",n)};function xh(){this.type="nullStorage"}e=xh.prototype,e.get=function(){return G(null)},e.set=function(){return G()},e.U=function(){return G()},e.ca=function(){},e.ia=function(){};function Lh(){if(!y_())throw Qe()=="Node"?new T("internal-error","The SessionStorage compatibility library was not found."):new T("web-storage-unsupported");this.a=Mg()||H.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Mg(){try{var n=f.sessionStorage,s=nr();return n&&(n.setItem(s,"1"),n.removeItem(s)),n}catch{return null}}function y_(){var n=Qe()=="Node";if(n=Mg()||n&&H.INTERNAL.node&&H.INTERNAL.node.sessionStorage,!n)return!1;try{return n.setItem("__sak","1"),n.removeItem("__sak"),!0}catch{return!1}}e=Lh.prototype,e.get=function(n){var s=this;return G().then(function(){var a=s.a.getItem(n);return Zr(a)})},e.set=function(n,s){var a=this;return G().then(function(){var h=ao(s);h===null?a.U(n):a.a.setItem(n,h)})},e.U=function(n){var s=this;return G().then(function(){s.a.removeItem(n)})},e.ca=function(){},e.ia=function(){};function w_(){var n={};n.Browser=b_,n.Node=I_,n.ReactNative=E_,n.Worker=T_,this.a=n[Qe()]}var Ph,b_={F:wu,cb:Lh},I_={F:wu,cb:Lh},E_={F:Eg,cb:xh},T_={F:wu,cb:xh},ii={rd:"local",NONE:"none",td:"session"};function __(n){var s=new T("invalid-persistence-type"),a=new T("unsupported-persistence-type");t:{for(h in ii)if(ii[h]==n){var h=!0;break t}h=!1}if(!h||typeof n!="string")throw s;switch(Qe()){case"ReactNative":if(n==="session")throw a;break;case"Node":if(n!=="none")throw a;break;case"Worker":if(n==="session"||!Oh()&&n!=="none")throw a;break;default:if(!Pc()&&n!=="none")throw a}}function Fg(){var n=!!(!cv(qt())&&xc()),s=uo(),a=Pc();this.m=n,this.h=s,this.l=a,this.a={},Ph||(Ph=new w_),n=Ph;try{this.g=!Rc()&&lv()||!f.indexedDB?new n.a.F:new Lg(Ue()?new ko:new n.a.F)}catch{this.g=new ko,this.h=!0}try{this.i=new n.a.cb}catch{this.i=new ko}this.v=new ko,this.f=C(this.Zb,this),this.b={}}var Mh;function Do(){return Mh||(Mh=new Fg),Mh}function hr(n,s){switch(s){case"session":return n.i;case"none":return n.v;default:return n.g}}function oi(n,s){return"firebase:"+n.name+(s?":"+s:"")}function S_(n,s,a){var h=oi(s,a),d=hr(n,s.F);return n.get(s,a).then(function(v){var m=null;try{m=Zr(f.localStorage.getItem(h))}catch{}if(m&&!v)return f.localStorage.removeItem(h),n.set(s,m,a);m&&v&&d.type!="localStorage"&&f.localStorage.removeItem(h)})}e=Fg.prototype,e.get=function(n,s){return hr(this,n.F).get(oi(n,s))};function si(n,s,a){return a=oi(s,a),s.F=="local"&&(n.b[a]=null),hr(n,s.F).U(a)}e.set=function(n,s,a){var h=oi(n,a),d=this,v=hr(this,n.F);return v.set(h,s).then(function(){return v.get(h)}).then(function(m){n.F=="local"&&(d.b[h]=m)})},e.addListener=function(n,s,a){n=oi(n,s),this.l&&(this.b[n]=f.localStorage.getItem(n)),Wn(this.a)&&(hr(this,"local").ca(this.f),this.h||(Rc()||!lv())&&f.indexedDB||!this.l||A_(this)),this.a[n]||(this.a[n]=[]),this.a[n].push(a)},e.removeListener=function(n,s,a){n=oi(n,s),this.a[n]&&(Me(this.a[n],function(h){return h==a}),this.a[n].length==0&&delete this.a[n]),Wn(this.a)&&(hr(this,"local").ia(this.f),Fh(this))};function A_(n){Fh(n),n.c=setInterval(function(){for(var s in n.a){var a=f.localStorage.getItem(s),h=n.b[s];a!=h&&(n.b[s]=a,a=new Yn({type:"storage",key:s,target:window,oldValue:h,newValue:a,a:!0}),n.Zb(a))}},1e3)}function Fh(n){n.c&&(clearInterval(n.c),n.c=null)}e.Zb=function(n){if(n&&n.g){var s=n.a.key;if(s==null)for(var a in this.a){var h=this.b[a];typeof h>"u"&&(h=null);var d=f.localStorage.getItem(a);d!==h&&(this.b[a]=d,this.nb(a))}else if(s.indexOf("firebase:")==0&&this.a[s]){if(typeof n.a.a<"u"?hr(this,"local").ia(this.f):Fh(this),this.m){if(a=f.localStorage.getItem(s),h=n.a.newValue,h!==a)h!==null?f.localStorage.setItem(s,h):f.localStorage.removeItem(s);else if(this.b[s]===h&&typeof n.a.a>"u")return}var v=this;a=function(){(typeof n.a.a<"u"||v.b[s]!==f.localStorage.getItem(s))&&(v.b[s]=f.localStorage.getItem(s),v.nb(s))},Fe&&Tn&&Tn==10&&f.localStorage.getItem(s)!==n.a.newValue&&n.a.newValue!==n.a.oldValue?setTimeout(a,10):a()}}else gt(n,C(this.nb,this))},e.nb=function(n){this.a[n]&&gt(this.a[n],function(s){s()})};function N_(n){this.a=n,this.b=Do()}var Uh={name:"authEvent",F:"local"};function k_(n){return n.b.get(Uh,n.a).then(function(s){return Gv(s)})}function D_(){this.a=Do()}function C_(){this.b=-1}function bu(n,s){this.b=Ug,this.f=f.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=n,this.h=s,this.l=f.Int32Array?new Int32Array(64):Array(64),Iu===void 0&&(f.Int32Array?Iu=new Int32Array(qg):Iu=qg),this.reset()}var Iu;F(bu,C_);for(var Ug=64,R_=Ug-1,Vg=[],Vh=0;Vh<R_;Vh++)Vg[Vh]=0;var jg=ic(128,Vg);bu.prototype.reset=function(){this.g=this.c=0,this.a=f.Int32Array?new Int32Array(this.h):$n(this.h)};function jh(n){for(var s=n.f,a=n.l,h=0,d=0;d<s.length;)a[h++]=s[d]<<24|s[d+1]<<16|s[d+2]<<8|s[d+3],d=4*h;for(s=16;64>s;s++){d=a[s-15]|0,h=a[s-2]|0;var v=(a[s-16]|0)+((d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3)|0,m=(a[s-7]|0)+((h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10)|0;a[s]=v+m|0}h=n.a[0]|0,d=n.a[1]|0;var b=n.a[2]|0,N=n.a[3]|0,R=n.a[4]|0,Q=n.a[5]|0,at=n.a[6]|0;for(v=n.a[7]|0,s=0;64>s;s++){var it=((h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+(h&d^h&b^d&b)|0;m=R&Q^~R&at,v=v+((R>>>6|R<<26)^(R>>>11|R<<21)^(R>>>25|R<<7))|0,m=m+(Iu[s]|0)|0,m=v+(m+(a[s]|0)|0)|0,v=at,at=Q,Q=R,R=N+m|0,N=b,b=d,d=h,h=m+it|0}n.a[0]=n.a[0]+h|0,n.a[1]=n.a[1]+d|0,n.a[2]=n.a[2]+b|0,n.a[3]=n.a[3]+N|0,n.a[4]=n.a[4]+R|0,n.a[5]=n.a[5]+Q|0,n.a[6]=n.a[6]+at|0,n.a[7]=n.a[7]+v|0}function qh(n,s,a){a===void 0&&(a=s.length);var h=0,d=n.c;if(typeof s=="string")for(;h<a;)n.f[d++]=s.charCodeAt(h++),d==n.b&&(jh(n),d=0);else if(E(s))for(;h<a;){var v=s[h++];if(!(typeof v=="number"&&0<=v&&255>=v&&v==(v|0)))throw Error("message must be a byte array");n.f[d++]=v,d==n.b&&(jh(n),d=0)}else throw Error("message must be string or array");n.c=d,n.g+=a}var qg=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Bg(){bu.call(this,8,O_)}F(Bg,bu);var O_=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Kg(n,s,a,h,d,v){this.v=n,this.i=s,this.l=a,this.m=h||null,this.u=d||null,this.s=v,this.h=s+":"+a,this.C=new D_,this.g=new N_(this.h),this.f=null,this.b=[],this.a=this.c=null}function Eu(n){return new T("invalid-cordova-configuration",n)}e=Kg.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=SE().then(function(){if(typeof pt("universalLinks.subscribe",f)!="function")throw Eu("cordova-universal-links-plugin-fix is not installed");if(typeof pt("BuildInfo.packageName",f)>"u")throw Eu("cordova-plugin-buildinfo is not installed");if(typeof pt("cordova.plugins.browsertab.openUrl",f)!="function")throw Eu("cordova-plugin-browsertab is not installed");if(typeof pt("cordova.InAppBrowser.open",f)!="function")throw Eu("cordova-plugin-inappbrowser is not installed")},function(){throw new T("cordova-not-ready")})};function x_(){for(var n=20,s=[];0<n;)s.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),n--;return s.join("")}function L_(n){var s=new Bg;qh(s,n),n=[];var a=8*s.g;56>s.c?qh(s,jg,56-s.c):qh(s,jg,s.b-(s.c-56));for(var h=63;56<=h;h--)s.f[h]=a&255,a/=256;for(jh(s),h=a=0;h<s.i;h++)for(var d=24;0<=d;d-=8)n[a++]=s.a[h]>>d&255;return HE(n)}e.Pb=function(n,s){return s(new T("operation-not-supported-in-this-environment")),G()},e.Nb=function(){return dt(new T("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(n,s,a,h){if(this.c)return dt(new T("redirect-operation-pending"));var d=this,v=f.document,m=null,b=null,N=null,R=null;return this.c=G().then(function(){return rh(s),Hg(d)}).then(function(){return P_(d,n,s,a,h)}).then(function(){return new Z(function(Q,at){b=function(){var it=pt("cordova.plugins.browsertab.close",f);return Q(),typeof it=="function"&&it(),d.a&&typeof d.a.close=="function"&&(d.a.close(),d.a=null),!1},d.Ea(b),N=function(){m||(m=$r(2e3).then(function(){at(new T("redirect-cancelled-by-user"))}))},R=function(){Mc()&&N()},v.addEventListener("resume",N,!1),qt().toLowerCase().match(/android/)||v.addEventListener("visibilitychange",R,!1)}).o(function(Q){return Bh(d).then(function(){throw Q})})}).oa(function(){N&&v.removeEventListener("resume",N,!1),R&&v.removeEventListener("visibilitychange",R,!1),m&&m.cancel(),b&&d.Ta(b),d.c=null})};function P_(n,s,a,h,d){var v=x_(),m=new Ve(s,h,null,v,new T("no-auth-event"),null,d),b=pt("BuildInfo.packageName",f);if(typeof b!="string")throw new T("invalid-cordova-configuration");var N=pt("BuildInfo.displayName",f),R={};if(qt().toLowerCase().match(/iphone|ipad|ipod/))R.ibi=b;else if(qt().toLowerCase().match(/android/))R.apn=b;else return dt(new T("operation-not-supported-in-this-environment"));N&&(R.appDisplayName=N),v=L_(v),R.sessionId=v;var Q=So(n.v,n.i,n.l,s,a,null,h,n.m,R,n.u,d,n.s);return n.ma().then(function(){var at=n.h;return n.C.a.set(Uh,m.w(),at)}).then(function(){var at=pt("cordova.plugins.browsertab.isAvailable",f);if(typeof at!="function")throw new T("invalid-cordova-configuration");var it=null;at(function(Mt){if(Mt){if(it=pt("cordova.plugins.browsertab.openUrl",f),typeof it!="function")throw new T("invalid-cordova-configuration");it(Q)}else{if(it=pt("cordova.InAppBrowser.open",f),typeof it!="function")throw new T("invalid-cordova-configuration");Mt=qt(),n.a=it(Q,Mt.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Mt.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function Gg(n,s){for(var a=0;a<n.b.length;a++)try{n.b[a](s)}catch{}}function Hg(n){return n.f||(n.f=n.ma().then(function(){return new Z(function(s){function a(h){return s(h),n.Ta(a),!1}n.Ea(a),M_(n)})})),n.f}function Bh(n){var s=null;return k_(n.g).then(function(a){return s=a,a=n.g,si(a.b,Uh,a.a)}).then(function(){return s})}function M_(n){function s(m){h=!0,d&&d.cancel(),Bh(n).then(function(b){var N=a;if(b&&m&&m.url){var R=null;N=Mv(m.url),N.indexOf("/__/auth/callback")!=-1&&(R=le(N),R=Zr(ke(R,"firebaseError")||null),R=(R=typeof R=="object"?jr(R):null)?new Ve(b.c,b.b,null,null,R,null,b.T()):new Ve(b.c,b.b,N,b.f,null,null,b.T())),N=R||a}Gg(n,N)})}var a=new Ve("unknown",null,null,null,new T("no-auth-event")),h=!1,d=$r(500).then(function(){return Bh(n).then(function(){h||Gg(n,a)})}),v=f.handleOpenURL;f.handleOpenURL=function(m){if(m.toLowerCase().indexOf(pt("BuildInfo.packageName",f).toLowerCase()+"://")==0&&s({url:m}),typeof v=="function")try{v(m)}catch(b){console.error(b)}},ih||(ih=new ZE),tT(s)}e.Ea=function(n){this.b.push(n),Hg(this).o(function(s){s.code==="auth/invalid-cordova-configuration"&&(s=new Ve("unknown",null,null,null,new T("no-auth-event")),n(s))})},e.Ta=function(n){Me(this.b,function(s){return s==n})};function F_(n){this.a=n,this.b=Do()}var Kh={name:"pendingRedirect",F:"session"};function U_(n){return n.b.set(Kh,"pending",n.a)}function Gh(n){return si(n.b,Kh,n.a)}function V_(n){return n.b.get(Kh,n.a).then(function(s){return s=="pending"})}function Tu(n,s,a,h){this.i={},this.u=0,this.D=n,this.v=s,this.m=a,this.J=h,this.h=[],this.f=!1,this.l=C(this.s,this),this.b=new Su,this.C=new em,this.g=new F_(Jg(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=zg(this.D,this.v,this.m,Yi,this.J)}function zg(n,s,a,h,d){var v=H.SDK_VERSION||null;return Oc()?new Kg(n,s,a,v,h,d):new yg(n,s,a,v,h,d)}Tu.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=zg(this.D,this.v,this.m,null,this.J),this.i={}};function $g(n){n.f||(n.f=!0,n.a.Ea(n.l));var s=n.a;return n.a.ma().o(function(a){throw n.a==s&&n.reset(),a})}function Wg(n){n.a.Yb()&&$g(n).o(function(s){var a=new Ve("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));zh(s)&&n.s(a)}),n.a.Ub()||Zg(n.b)}function _u(n,s){an(n.h,s)||n.h.push(s),n.f||V_(n.g).then(function(a){a?Gh(n.g).then(function(){$g(n).o(function(h){var d=new Ve("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));zh(h)&&n.s(d)})}):Wg(n)}).o(function(){Wg(n)})}function Hh(n,s){Me(n.h,function(a){return a==s})}Tu.prototype.s=function(n){if(!n)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),n&&n.getUid()&&this.i.hasOwnProperty(n.getUid()))return!1;for(var s=!1,a=0;a<this.h.length;a++){var h=this.h[a];if(h.Gb(n.c,n.b)){(s=this.c[n.c])&&(s.h(n,h),n&&(n.f||n.b)&&(this.i[n.getUid()]=!0,this.u=Date.now())),s=!0;break}}return Zg(this.b),s};var j_=new An(2e3,1e4),q_=new An(3e4,6e4);Tu.prototype.ra=function(){return this.b.ra()};function Qg(n,s,a,h,d,v,m){return n.a.Nb(s,a,h,function(){n.f||(n.f=!0,n.a.Ea(n.l))},function(){n.reset()},d,v,m)}function zh(n){return!!(n&&n.code=="auth/cordova-not-ready")}function Xg(n,s,a,h,d){var v;return U_(n.g).then(function(){return n.a.Ob(s,a,h,d).o(function(m){if(zh(m))throw new T("operation-not-supported-in-this-environment");return v=m,Gh(n.g).then(function(){throw v})}).then(function(){return n.a.ac()?new Z(function(){}):Gh(n.g).then(function(){return n.ra()}).then(function(){}).o(function(){})})})}function Yg(n,s,a,h,d){return n.a.Pb(h,function(v){s.na(a,null,v,d)},j_.get())}var $h={};function Jg(n,s,a){return n=n+":"+s,a&&(n=n+":"+a.url),n}function Wh(n,s,a,h){var d=Jg(s,a,h);return $h[d]||($h[d]=new Tu(n,s,a,h)),$h[d]}function Su(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}Su.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Su.prototype.h=function(n,s){if(n){this.reset(),this.g=!0;var a=n.c,h=n.b,d=n.a&&n.a.code=="auth/web-storage-unsupported",v=n.a&&n.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!d&&!v),a!="unknown"||d||v?n.a?(lr(this,!0,null,n.a),G()):s.Fa(a,h)?B_(this,n,s):dt(new T("invalid-auth-event")):(lr(this,!1,null,null),G())}else dt(new T("invalid-auth-event"))};function Zg(n){n.g||(n.g=!0,lr(n,!1,null,null))}function Au(n){n.g&&!n.i&&lr(n,!1,null,null)}function B_(n,s,a){a=a.Fa(s.c,s.b);var h=s.g,d=s.f,v=s.i,m=s.T(),b=!!s.c.match(/Redirect$/);a(h,d,m,v).then(function(N){lr(n,b,N,null)}).o(function(N){lr(n,b,null,N)})}function K_(n,s){if(n.b=function(){return dt(s)},n.c.length)for(var a=0;a<n.c.length;a++)n.c[a](s)}function tm(n,s){if(n.b=function(){return G(s)},n.f.length)for(var a=0;a<n.f.length;a++)n.f[a](s)}function lr(n,s,a,h){s?h?K_(n,h):tm(n,a):tm(n,{user:null}),n.f=[],n.c=[]}Su.prototype.ra=function(){var n=this;return new Z(function(s,a){n.b?n.b().then(s,a):(n.f.push(s),n.c.push(a),G_(n))})};function G_(n){var s=new T("timeout");n.a&&n.a.cancel(),n.a=$r(q_.get()).then(function(){n.b||(n.g=!0,lr(n,!0,null,s))})}function em(){}em.prototype.h=function(n,s){if(n){var a=n.c,h=n.b;n.a?(s.na(n.c,null,n.a,n.b),G()):s.Fa(a,h)?H_(n,s):dt(new T("invalid-auth-event"))}else dt(new T("invalid-auth-event"))};function H_(n,s){var a=n.b,h=n.c;s.Fa(h,a)(n.g,n.f,n.T(),n.i).then(function(d){s.na(h,d,null,a)}).o(function(d){s.na(h,null,d,a)})}function nm(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(n){this.jb=n},enumerable:!1})}function Qh(n,s){this.a=s,q(this,"verificationId",n)}Qh.prototype.confirm=function(n){return n=Kv(this.verificationId,n),this.a(n)};function Xh(n,s,a,h){return new ln(n).gb(s,a).then(function(d){return new Qh(d,h)})}function z_(n){var s=kv(n);if(!(s&&s.exp&&s.auth_time&&s.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ee(this,{token:n,expirationTime:co(1e3*s.exp),authTime:co(1e3*s.auth_time),issuedAtTime:co(1e3*s.iat),signInProvider:s.firebase&&s.firebase.sign_in_provider?s.firebase.sign_in_provider:null,signInSecondFactor:s.firebase&&s.firebase.sign_in_second_factor?s.firebase.sign_in_second_factor:null,claims:s})}function Yh(n,s,a){var h=s&&s[im];if(!h)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=n,this.f=En(s),this.g=a,this.c=new eu(null,h),this.b=[];var d=this;gt(s[rm]||[],function(v){(v=Bc(v))&&d.b.push(v)}),q(this,"auth",this.a),q(this,"session",this.c),q(this,"hints",this.b)}var rm="mfaInfo",im="mfaPendingCredential";Yh.prototype.Rc=function(n){var s=this;return n.tb(this.a.a,this.c).then(function(a){var h=En(s.f);return delete h[rm],delete h[im],ae(h,a),s.g(h)})};function Jh(n,s,a,h){T.call(this,"multi-factor-auth-required",h,s),this.b=new Yh(n,s,a),q(this,"resolver",this.b)}F(Jh,T);function om(n,s,a){if(n&&A(n.serverResponse)&&n.code==="auth/multi-factor-auth-required")try{return new Jh(s,n.serverResponse,a,n.message)}catch{}return null}function sm(){}sm.prototype.tb=function(n,s,a){return s.type==po?$_(this,n,s,a):W_(this,n,s)};function $_(n,s,a,h){return a.Ha().then(function(d){return d={idToken:d},typeof h<"u"&&(d.displayName=h),ae(d,{phoneVerificationInfo:vo(n.a)}),tt(s,MT,d)})}function W_(n,s,a){return a.Ha().then(function(h){return h={mfaPendingCredential:h},ae(h,{phoneVerificationInfo:vo(n.a)}),tt(s,FT,h)})}function Zh(n){q(this,"factorId",n.fa),this.a=n}F(Zh,sm);function um(n){if(Zh.call(this,n),this.a.fa!=ln.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}F(um,Zh);function ui(n,s){he.call(this,n);for(var a in s)this[a]=s[a]}F(ui,he);function tl(n,s){this.a=n,this.b=[],this.c=C(this.yc,this),Ne(this.a,"userReloaded",this.c);var a=[];s&&s.multiFactor&&s.multiFactor.enrolledFactors&&gt(s.multiFactor.enrolledFactors,function(h){var d=null,v={};if(h){h.uid&&(v[Gc]=h.uid),h.displayName&&(v[dv]=h.displayName),h.enrollmentTime&&(v[Kc]=new Date(h.enrollmentTime).toISOString()),h.phoneNumber&&(v[Hc]=h.phoneNumber);try{d=new ho(v)}catch{}h=d}else h=null;h&&a.push(h)}),Nu(this,a)}function Q_(n){var s=[];return gt(n.mfaInfo||[],function(a){(a=Bc(a))&&s.push(a)}),s}e=tl.prototype,e.yc=function(n){Nu(this,Q_(n.hd))};function Nu(n,s){n.b=s,q(n,"enrolledFactors",s)}e.Sb=function(){return this.a.I().then(function(n){return new eu(n,null)})},e.fc=function(n,s){var a=this,h=this.a.a;return this.Sb().then(function(d){return n.tb(h,d,s)}).then(function(d){return Je(a.a,d),a.a.reload()})},e.bd=function(n){var s=this,a=typeof n=="string"?n:n.uid,h=this.a.a;return this.a.I().then(function(d){return tt(h,r_,{idToken:d,mfaEnrollmentId:a})}).then(function(d){var v=AI(s.b,function(m){return m.uid!=a});return Nu(s,v),Je(s.a,d),s.a.reload().o(function(m){if(m.code!="auth/user-token-expired")throw m})})},e.w=function(){return{multiFactor:{enrolledFactors:Os(this.b,function(n){return n.w()})}}};function el(n,s,a){if(this.h=n,this.i=s,this.g=a,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}el.prototype.start=function(){this.a=this.c,nl(this,!0)};function X_(n,s){return s?(n.a=n.c,n.g()):(s=n.a,n.a*=2,n.a>n.f&&(n.a=n.f),s)}function nl(n,s){n.stop(),n.b=$r(X_(n,s)).then(function(){return NE()}).then(function(){return n.h()}).then(function(){nl(n,!0)}).o(function(a){n.i(a)&&nl(n,!1)})}el.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function rl(n){this.f=n,this.b=this.a=null,this.c=Date.now()}rl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function am(n,s){typeof s>"u"&&(n.b?(s=n.b,s=s.a-s.g):s=0),n.c=Date.now()+1e3*s}function cm(n,s){n.b=Zs(s[qe]||""),n.a=s.refreshToken,s=s.expiresIn,am(n,typeof s<"u"?Number(s):void 0)}function Y_(n,s){n.b=s.b,n.a=s.a,n.c=s.c}function J_(n,s){return bT(n.f,s).then(function(a){return n.b=Zs(a.access_token),n.a=a.refresh_token,am(n,a.expires_in),{accessToken:n.b.toString(),refreshToken:n.a}}).o(function(a){throw a.code=="auth/user-token-expired"&&(n.a=null),a})}rl.prototype.getToken=function(n){return n=!!n,this.b&&!this.a?dt(new T("user-token-expired")):n||!this.b||Date.now()>this.c-3e4?this.a?J_(this,{grant_type:"refresh_token",refresh_token:this.a}):G(null):G({accessToken:this.b.toString(),refreshToken:this.a})};function ku(n,s){this.a=n||null,this.b=s||null,ee(this,{lastSignInTime:co(s||null),creationTime:co(n||null)})}function Z_(n){return new ku(n.a,n.b)}ku.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function tS(n,s,a,h,d,v){ee(this,{uid:n,displayName:h||null,photoURL:d||null,email:a||null,phoneNumber:v||null,providerId:s})}function be(n,s,a){this.N=[],this.l=n.apiKey,this.m=n.appName,this.s=n.authDomain||null;var h=H.SDK_VERSION?Yr(H.SDK_VERSION):null;this.a=new je(this.l,Xi(Yi),h),(this.u=n.emulatorConfig||null)&&gu(this.a,this.u),this.h=new rl(this.a),hl(this,s[qe]),cm(this.h,s),q(this,"refreshToken",this.h.a),lm(this,a||{}),te.call(this),this.P=!1,this.s&&er()&&(this.b=Wh(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=eS(this),this.ba=C(this.ib,this);var d=this;this.za=null,this.Pa=function(v){d.xa(v.h)},this.qa=null,this.Ba=function(v){il(d,v.c)},this.$=null,this.aa=[],this.Oa=function(v){Co(d,v.f)},this.ja=null,this.S=new tl(this,a),q(this,"multiFactor",this.S)}F(be,te),be.prototype.xa=function(n){this.za=n,og(this.a,n)};function il(n,s){n.u=s,gu(n.a,s),n.b&&(s=n.b,n.b=Wh(n.s,n.l,n.m,n.u),n.P&&(Hh(s,n),_u(n.b,n)))}be.prototype.la=function(){return this.za};function ol(n,s){n.qa&&ye(n.qa,"languageCodeChanged",n.Pa),(n.qa=s)&&Ne(s,"languageCodeChanged",n.Pa)}function sl(n,s){n.$&&ye(n.$,"emulatorConfigChanged",n.Ba),(n.$=s)&&Ne(s,"emulatorConfigChanged",n.Ba)}function Co(n,s){n.aa=s,sg(n.a,H.SDK_VERSION?Yr(H.SDK_VERSION,n.aa):null)}be.prototype.Ga=function(){return $n(this.aa)};function ul(n,s){n.ja&&ye(n.ja,"frameworkChanged",n.Oa),(n.ja=s)&&Ne(s,"frameworkChanged",n.Oa)}be.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function al(n){try{return H.app(n.m).auth()}catch{throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+n.m+"'!")}}function eS(n){return new el(function(){return n.I(!0)},function(s){return!!(s&&s.code=="auth/network-request-failed")},function(){var s=n.h.c-Date.now()-3e5;return 0<s?s:0})}function hm(n){n.J||n.D.b||(n.D.start(),ye(n,"tokenChanged",n.ba),Ne(n,"tokenChanged",n.ba))}function cl(n){ye(n,"tokenChanged",n.ba),n.D.stop()}function hl(n,s){n.Aa=s,q(n,"_lat",s)}function nS(n,s){Me(n.W,function(a){return a==s})}function fr(n){for(var s=[],a=0;a<n.W.length;a++)s.push(n.W[a](n));return kp(s).then(function(){return n})}function Ro(n){n.b&&!n.P&&(n.P=!0,_u(n.b,n))}function lm(n,s){ee(n,{uid:s.uid,displayName:s.displayName||null,photoURL:s.photoURL||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,isAnonymous:s.isAnonymous||!1,tenantId:s.tenantId||null,metadata:new ku(s.createdAt,s.lastLoginAt),providerData:[]}),n.a.b=n.tenantId}q(be.prototype,"providerId","firebase");function fm(){}function ll(n){return G().then(function(){if(n.J)throw new T("app-deleted")})}function fl(n){return Os(n.providerData,function(s){return s.providerId})}function dl(n,s){s&&(dm(n,s.providerId),n.providerData.push(s))}function dm(n,s){Me(n.providerData,function(a){return a.providerId==s})}function Dn(n,s,a){(s!="uid"||a)&&n.hasOwnProperty(s)&&q(n,s,a)}function Du(n,s){n!=s&&(ee(n,{uid:s.uid,displayName:s.displayName,photoURL:s.photoURL,email:s.email,emailVerified:s.emailVerified,phoneNumber:s.phoneNumber,isAnonymous:s.isAnonymous,tenantId:s.tenantId,providerData:[]}),s.metadata?q(n,"metadata",Z_(s.metadata)):q(n,"metadata",new ku),gt(s.providerData,function(a){dl(n,a)}),Y_(n.h,s.h),q(n,"refreshToken",n.h.a),Nu(n.S,s.S.b))}e=be.prototype,e.reload=function(){var n=this;return Lt(this,ll(this).then(function(){return pl(n).then(function(){return fr(n)}).then(fm)}))};function pl(n){return n.I().then(function(s){var a=n.isAnonymous;return rS(n,s).then(function(){return a||Dn(n,"isAnonymous",!1),s})})}e.oc=function(n){return this.I(n).then(function(s){return new z_(s)})},e.I=function(n){var s=this;return Lt(this,ll(this).then(function(){return s.h.getToken(n)}).then(function(a){if(!a)throw new T("internal-error");return a.accessToken!=s.Aa&&(hl(s,a.accessToken),s.dispatchEvent(new ui("tokenChanged"))),Dn(s,"refreshToken",a.refreshToken),a.accessToken}))};function Je(n,s){s[qe]&&n.Aa!=s[qe]&&(cm(n.h,s),n.dispatchEvent(new ui("tokenChanged")),hl(n,s[qe]),Dn(n,"refreshToken",n.h.a))}function rS(n,s){return tt(n.a,UT,{idToken:s}).then(C(n.Kc,n))}e.Kc=function(n){if(n=n.users,!n||!n.length)throw new T("internal-error");n=n[0],lm(this,{uid:n.localId,displayName:n.displayName,photoURL:n.photoUrl,email:n.email,emailVerified:!!n.emailVerified,phoneNumber:n.phoneNumber,lastLoginAt:n.lastLoginAt,createdAt:n.createdAt,tenantId:n.tenantId});for(var s=iS(n),a=0;a<s.length;a++)dl(this,s[a]);Dn(this,"isAnonymous",!(this.email&&n.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new ui("userReloaded",{hd:n}))};function iS(n){return(n=n.providerUserInfo)&&n.length?Os(n,function(s){return new tS(s.rawId,s.providerId,s.email,s.displayName,s.photoUrl,s.phoneNumber)}):[]}e.Lc=function(n){return Fc("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(n)},e.ub=function(n){var s=this,a=null;return Lt(this,n.c(this.a,this.uid).then(function(h){return Je(s,h),a=Oo(s,h,"reauthenticate"),s.i=null,s.reload()}).then(function(){return a}),!0)};function Cu(n,s){return pl(n).then(function(){if(an(fl(n),s))return fr(n).then(function(){throw new T("provider-already-linked")})})}e.Cc=function(n){return Fc("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(n)},e.rb=function(n){var s=this,a=null;return Lt(this,Cu(this,n.providerId).then(function(){return s.I()}).then(function(h){return n.b(s.a,h)}).then(function(h){return a=Oo(s,h,"link"),pm(s,h)}).then(function(){return a}))},e.Dc=function(n,s){var a=this;return Lt(this,Cu(this,"phone").then(function(){return Xh(al(a),n,s,C(a.rb,a))}))},e.Mc=function(n,s){var a=this;return Lt(this,G().then(function(){return Xh(al(a),n,s,C(a.ub,a))}),!0)};function Oo(n,s,a){var h=nh(s);return s=Cv(s),Xe({user:n,credential:h,additionalUserInfo:s,operationType:a})}function pm(n,s){return Je(n,s),n.reload().then(function(){return n})}e.Cb=function(n){var s=this;return Lt(this,this.I().then(function(a){return s.a.Cb(a,n)}).then(function(a){return Je(s,a),s.reload()}))},e.ed=function(n){var s=this;return Lt(this,this.I().then(function(a){return n.b(s.a,a)}).then(function(a){return Je(s,a),s.reload()}))},e.Db=function(n){var s=this;return Lt(this,this.I().then(function(a){return s.a.Db(a,n)}).then(function(a){return Je(s,a),s.reload()}))},e.Eb=function(n){if(n.displayName===void 0&&n.photoURL===void 0)return ll(this);var s=this;return Lt(this,this.I().then(function(a){return s.a.Eb(a,{displayName:n.displayName,photoUrl:n.photoURL})}).then(function(a){return Je(s,a),Dn(s,"displayName",a.displayName||null),Dn(s,"photoURL",a.photoUrl||null),gt(s.providerData,function(h){h.providerId==="password"&&(q(h,"displayName",s.displayName),q(h,"photoURL",s.photoURL))}),fr(s)}).then(fm))},e.cd=function(n){var s=this;return Lt(this,pl(this).then(function(a){return an(fl(s),n)?NT(s.a,a,[n]).then(function(h){var d={};return gt(h.providerUserInfo||[],function(v){d[v.providerId]=!0}),gt(fl(s),function(v){d[v]||dm(s,v)}),d[ln.PROVIDER_ID]||q(s,"phoneNumber",null),fr(s)}):fr(s).then(function(){throw new T("no-such-provider")})}))},e.delete=function(){var n=this;return Lt(this,this.I().then(function(s){return tt(n.a,OT,{idToken:s})}).then(function(){n.dispatchEvent(new ui("userDeleted"))})).then(function(){for(var s=0;s<n.N.length;s++)n.N[s].cancel("app-deleted");ol(n,null),sl(n,null),ul(n,null),n.N=[],n.J=!0,cl(n),q(n,"refreshToken",null),n.b&&Hh(n.b,n)})},e.Gb=function(n,s){return!!(n=="linkViaPopup"&&(this.g||null)==s&&this.f||n=="reauthViaPopup"&&(this.g||null)==s&&this.f||n=="linkViaRedirect"&&(this.ga||null)==s||n=="reauthViaRedirect"&&(this.ga||null)==s)},e.na=function(n,s,a,h){n!="linkViaPopup"&&n!="reauthViaPopup"||h!=(this.g||null)||(a&&this.C?this.C(a):s&&!a&&this.f&&this.f(s),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(n,s){return n=="linkViaPopup"&&s==(this.g||null)?C(this.Lb,this):n=="reauthViaPopup"&&s==(this.g||null)?C(this.Mb,this):n=="linkViaRedirect"&&(this.ga||null)==s?C(this.Lb,this):n=="reauthViaRedirect"&&(this.ga||null)==s?C(this.Mb,this):null},e.Ec=function(n){var s=this;return vm(this,"linkViaPopup",n,function(){return Cu(s,n.providerId).then(function(){return fr(s)})},!1)},e.Nc=function(n){return vm(this,"reauthViaPopup",n,function(){return G()},!0)};function vm(n,s,a,h,d){if(!er())return dt(new T("operation-not-supported-in-this-environment"));if(n.i&&!d)return dt(n.i);var v=Xc(a.providerId),m=nr(n.uid+":::"),b=null;(!uo()||xc())&&n.s&&a.isOAuthProvider&&(b=So(n.s,n.l,n.m,s,a,null,m,H.SDK_VERSION||null,null,null,n.tenantId,n.u));var N=iv(b,v&&v.va,v&&v.ua);return h=h().then(function(){if(mm(n),!d)return n.I().then(function(){})}).then(function(){return Qg(n.b,N,s,a,m,!!b,n.tenantId)}).then(function(){return new Z(function(R,Q){n.na(s,null,new T("cancelled-popup-request"),n.g||null),n.f=R,n.C=Q,n.g=m,n.c=Yg(n.b,n,s,N,m)})}).then(function(R){return N&&tr(N),R?Xe(R):null}).o(function(R){throw N&&tr(N),R}),Lt(n,h,d)}e.Fc=function(n){var s=this;return gm(this,"linkViaRedirect",n,function(){return Cu(s,n.providerId)},!1)},e.Oc=function(n){return gm(this,"reauthViaRedirect",n,function(){return G()},!0)};function gm(n,s,a,h,d){if(!er())return dt(new T("operation-not-supported-in-this-environment"));if(n.i&&!d)return dt(n.i);var v=null,m=nr(n.uid+":::");return h=h().then(function(){if(mm(n),!d)return n.I().then(function(){})}).then(function(){return n.ga=m,fr(n)}).then(function(b){return n.ha&&(b=n.ha,b=b.b.set(vl,n.w(),b.a)),b}).then(function(){return Xg(n.b,s,a,m,n.tenantId)}).o(function(b){if(v=b,n.ha)return wm(n.ha);throw v}).then(function(){if(v)throw v}),Lt(n,h,d)}function mm(n){if(!n.b||!n.P)throw n.b&&!n.P?new T("internal-error"):new T("auth-domain-config-required")}e.Lb=function(n,s,a,h){var d=this;this.c&&(this.c.cancel(),this.c=null);var v=null;return a=this.I().then(function(m){return Th(d.a,{requestUri:n,postBody:h,sessionId:s,idToken:m})}).then(function(m){return v=Oo(d,m,"link"),pm(d,m)}).then(function(){return v}),Lt(this,a)},e.Mb=function(n,s,a,h){var d=this;this.c&&(this.c.cancel(),this.c=null);var v=null,m=G().then(function(){return ei(_h(d.a,{requestUri:n,sessionId:s,postBody:h,tenantId:a}),d.uid)}).then(function(b){return v=Oo(d,b,"reauthenticate"),Je(d,b),d.i=null,d.reload()}).then(function(){return v});return Lt(this,m,!0)},e.vb=function(n){var s=this,a=null;return Lt(this,this.I().then(function(h){return a=h,typeof n>"u"||Wn(n)?{}:Ys(new Xs(n))}).then(function(h){return s.a.vb(a,h)}).then(function(h){if(s.email!=h)return s.reload()}).then(function(){}))},e.Fb=function(n,s){var a=this,h=null;return Lt(this,this.I().then(function(d){return h=d,typeof s>"u"||Wn(s)?{}:Ys(new Xs(s))}).then(function(d){return a.a.Fb(h,n,d)}).then(function(d){if(a.email!=d)return a.reload()}).then(function(){}))};function Lt(n,s,a){var h=oS(n,s,a);return n.N.push(h),h.oa(function(){xs(n.N,h)}),h.o(function(d){var v=null;throw d&&d.code==="auth/multi-factor-auth-required"&&(v=om(d.w(),al(n),C(n.jc,n))),v||d})}e.jc=function(n){var s=null,a=this;return n=ei(G(n),a.uid).then(function(h){return s=Oo(a,h,"reauthenticate"),Je(a,h),a.i=null,a.reload()}).then(function(){return s}),Lt(this,n,!0)};function oS(n,s,a){return n.i&&!a?(s.cancel(),dt(n.i)):s.o(function(h){throw!h||h.code!="auth/user-disabled"&&h.code!="auth/user-token-expired"||(n.i||n.dispatchEvent(new ui("userInvalidated")),n.i=h),h})}e.toJSON=function(){return this.w()},e.w=function(){var n={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&ae(n,this.metadata.w()),gt(this.providerData,function(s){n.providerData.push(CE(s))}),ae(n,this.S.w()),n};function ym(n){if(!n.apiKey)return null;var s={apiKey:n.apiKey,authDomain:n.authDomain,appName:n.appName,emulatorConfig:n.emulatorConfig},a={};if(n.stsTokenManager&&n.stsTokenManager.accessToken){a[qe]=n.stsTokenManager.accessToken,a.refreshToken=n.stsTokenManager.refreshToken||null;var h=n.stsTokenManager.expirationTime;h&&(a.expiresIn=(h-Date.now())/1e3)}else return null;var d=new be(s,a,n);return n.providerData&&gt(n.providerData,function(v){v&&dl(d,Xe(v))}),n.redirectEventId&&(d.ga=n.redirectEventId),d}function sS(n,s,a,h){var d=new be(n,s);return a&&(d.ha=a),h&&Co(d,h),d.reload().then(function(){return d})}function uS(n,s,a,h){var d=n.h,v={};return v[qe]=d.b&&d.b.toString(),v.refreshToken=d.a,s=new be(s||{apiKey:n.l,authDomain:n.s,appName:n.m},v),a&&(s.ha=a),h&&Co(s,h),Du(s,n),s}function aS(n){this.a=n,this.b=Do()}var vl={name:"redirectUser",F:"session"};function wm(n){return si(n.b,vl,n.a)}function cS(n,s){return n.b.get(vl,n.a).then(function(a){return a&&s&&(a.authDomain=s),ym(a||{})})}function gl(n){this.a=n,this.b=Do(),this.c=null,this.f=hS(this),this.b.addListener(Ze("local"),this.a,C(this.g,this))}gl.prototype.g=function(){var n=this,s=Ze("local");ai(this,function(){return G().then(function(){return n.c&&n.c.F!="local"?n.b.get(s,n.a):null}).then(function(a){if(a)return ml(n,"local").then(function(){n.c=s})})})};function ml(n,s){var a=[],h;for(h in ii)ii[h]!==s&&a.push(si(n.b,Ze(ii[h]),n.a));return a.push(si(n.b,yl,n.a)),ZI(a)}function hS(n){var s=Ze("local"),a=Ze("session"),h=Ze("none");return S_(n.b,s,n.a).then(function(){return n.b.get(a,n.a)}).then(function(d){return d?a:n.b.get(h,n.a).then(function(v){return v?h:n.b.get(s,n.a).then(function(m){return m?s:n.b.get(yl,n.a).then(function(b){return b?Ze(b):s})})})}).then(function(d){return n.c=d,ml(n,d.F)}).o(function(){n.c||(n.c=s)})}var yl={name:"persistence",F:"session"};function Ze(n){return{name:"authUser",F:n}}gl.prototype.yb=function(n){var s=null,a=this;return __(n),ai(this,function(){return n!=a.c.F?a.b.get(a.c,a.a).then(function(h){return s=h,ml(a,n)}).then(function(){if(a.c=Ze(n),s)return a.b.set(a.c,s,a.a)}):G()})};function lS(n){return ai(n,function(){return n.b.set(yl,n.c.F,n.a)})}function bm(n,s){return ai(n,function(){return n.b.set(n.c,s.w(),n.a)})}function Im(n){return ai(n,function(){return si(n.b,n.c,n.a)})}function Em(n,s,a){return ai(n,function(){return n.b.get(n.c,n.a).then(function(h){return h&&s&&(h.authDomain=s),h&&a&&(h.emulatorConfig=a),ym(h||{})})})}function ai(n,s){return n.f=n.f.then(s,s),n.f}function Be(n){if(this.l=!1,q(this,"settings",new nm),q(this,"app",n),ht(this).options&&ht(this).options.apiKey)n=H.SDK_VERSION?Yr(H.SDK_VERSION):null,this.a=new je(ht(this).options&&ht(this).options.apiKey,Xi(Yi),n);else throw new T("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=H.INTERNAL.createSubscribe(C(this.zc,this)),this.W=void 0,this.ib=H.INTERNAL.createSubscribe(C(this.Ac,this)),ci(this,null),this.i=new gl(ht(this).options.apiKey+":"+ht(this).name),this.D=new aS(ht(this).options.apiKey+":"+ht(this).name),this.$=wt(this,mS(this)),this.h=wt(this,yS(this)),this.ba=!1,this.ja=C(this.Zc,this),this.Ba=C(this.da,this),this.qa=C(this.mc,this),this.za=C(this.wc,this),this.Aa=C(this.xc,this),this.b=null,pS(this),this.INTERNAL={},this.INTERNAL.delete=C(this.delete,this),this.INTERNAL.logFramework=C(this.Gc,this),this.u=0,te.call(this),dS(this),this.J=[],this.R=null}F(Be,te);function Tm(n){he.call(this,"languageCodeChanged"),this.h=n}F(Tm,he);function _m(n){he.call(this,"emulatorConfigChanged"),this.c=n}F(_m,he);function Sm(n){he.call(this,"frameworkChanged"),this.f=n}F(Sm,he),e=Be.prototype,e.yb=function(n){return n=this.i.yb(n),wt(this,n)},e.xa=function(n){this.aa===n||this.l||(this.aa=n,og(this.a,this.aa),this.dispatchEvent(new Tm(this.la())))},e.la=function(){return this.aa},e.fd=function(){var n=f.navigator;this.xa(n&&(n.languages&&n.languages[0]||n.language||n.userLanguage)||null)},e.gd=function(n,s){if(!this.R){if(!/^https?:\/\//.test(n))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");s=s?!!s.disableWarnings:!1,fS(s),this.R={url:n,ec:s},this.settings.jb=!0,gu(this.a,this.R),this.dispatchEvent(new _m(this.R))}};function fS(n){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),f.document&&!n&&$s().then(function(){var s=f.document.createElement("div");s.innerText="Running in emulator mode. Do not use with production credentials.",s.style.position="fixed",s.style.width="100%",s.style.backgroundColor="#ffffff",s.style.border=".1em solid #000000",s.style.color="#b50000",s.style.bottom="0px",s.style.left="0px",s.style.margin="0px",s.style.zIndex=1e4,s.style.textAlign="center",s.classList.add("firebase-emulator-warning"),f.document.body.appendChild(s)})}e.Gc=function(n){this.J.push(n),sg(this.a,H.SDK_VERSION?Yr(H.SDK_VERSION,this.J):null),this.dispatchEvent(new Sm(this.J))},e.Ga=function(){return $n(this.J)},e.zb=function(n){this.S===n||this.l||(this.S=n,this.a.b=this.S)},e.T=function(){return this.S};function dS(n){Object.defineProperty(n,"lc",{get:function(){return this.la()},set:function(s){this.xa(s)},enumerable:!1}),n.aa=null,Object.defineProperty(n,"ti",{get:function(){return this.T()},set:function(s){this.zb(s)},enumerable:!1}),n.S=null,Object.defineProperty(n,"emulatorConfig",{get:function(){if(this.R){var s=le(this.R.url);s=Xe({protocol:s.c,host:s.a,port:s.g,options:Xe({disableWarnings:this.R.ec})})}else s=null;return s},enumerable:!1})}e.toJSON=function(){return{apiKey:ht(this).options.apiKey,authDomain:ht(this).options.authDomain,appName:ht(this).name,currentUser:Y(this)&&Y(this).w()}};function wl(n){return n.Oa||dt(new T("auth-domain-config-required"))}function pS(n){var s=ht(n).options.authDomain,a=ht(n).options.apiKey;s&&er()&&(n.Oa=n.$.then(function(){if(!n.l){if(n.b=Wh(s,a,ht(n).name,n.R),_u(n.b,n),Y(n)&&Ro(Y(n)),n.m){Ro(n.m);var h=n.m;h.xa(n.la()),ol(h,n),h=n.m,Co(h,n.J),ul(h,n),h=n.m,il(h,n.R),sl(h,n),n.m=null}return n.b}}))}e.Gb=function(n,s){switch(n){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==s&&!!this.f;default:return!1}},e.na=function(n,s,a,h){n=="signInViaPopup"&&this.g==h&&(a&&this.C?this.C(a):s&&!a&&this.f&&this.f(s),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(n,s){return n=="signInViaRedirect"||n=="signInViaPopup"&&this.g==s&&this.f?C(this.ic,this):null},e.ic=function(n,s,a,h){var d=this,v={requestUri:n,postBody:h,sessionId:s,tenantId:a};return this.c&&(this.c.cancel(),this.c=null),d.$.then(function(){return dr(d,Eh(d.a,v))})},e.Xc=function(n){if(!er())return dt(new T("operation-not-supported-in-this-environment"));var s=this,a=Xc(n.providerId),h=nr(),d=null;(!uo()||xc())&&ht(this).options.authDomain&&n.isOAuthProvider&&(d=So(ht(this).options.authDomain,ht(this).options.apiKey,ht(this).name,"signInViaPopup",n,null,h,H.SDK_VERSION||null,null,null,this.T(),this.R));var v=iv(d,a&&a.va,a&&a.ua);return a=wl(this).then(function(m){return Qg(m,v,"signInViaPopup",n,h,!!d,s.T())}).then(function(){return new Z(function(m,b){s.na("signInViaPopup",null,new T("cancelled-popup-request"),s.g),s.f=m,s.C=b,s.g=h,s.c=Yg(s.b,s,"signInViaPopup",v,h)})}).then(function(m){return v&&tr(v),m?Xe(m):null}).o(function(m){throw v&&tr(v),m}),wt(this,a)},e.Yc=function(n){if(!er())return dt(new T("operation-not-supported-in-this-environment"));var s=this,a=wl(this).then(function(){return lS(s.i)}).then(function(){return Xg(s.b,"signInViaRedirect",n,void 0,s.T())});return wt(this,a)};function Am(n){if(!er())return dt(new T("operation-not-supported-in-this-environment"));var s=wl(n).then(function(){return n.b.ra()}).then(function(a){return a?Xe(a):null});return wt(n,s)}e.ra=function(){var n=this;return Am(this).then(function(s){return n.b&&Au(n.b.b),s}).o(function(s){throw n.b&&Au(n.b.b),s})},e.dd=function(n){if(!n)return dt(new T("null-user"));if(this.S!=n.tenantId)return dt(new T("tenant-id-mismatch"));var s=this,a={};a.apiKey=ht(this).options.apiKey,a.authDomain=ht(this).options.authDomain,a.appName=ht(this).name;var h=uS(n,a,s.D,s.Ga());return wt(this,this.h.then(function(){if(ht(s).options.apiKey!=n.l)return h.reload()}).then(function(){return Y(s)&&n.uid==Y(s).uid?(Du(Y(s),n),s.da(n)):(ci(s,h),Ro(h),s.da(h))}).then(function(){xo(s)}))};function vS(n,s){var a={};return a.apiKey=ht(n).options.apiKey,a.authDomain=ht(n).options.authDomain,a.appName=ht(n).name,n.R&&(a.emulatorConfig=n.R),n.$.then(function(){return sS(a,s,n.D,n.Ga())}).then(function(h){return Y(n)&&h.uid==Y(n).uid?(Du(Y(n),h),n.da(h)):(ci(n,h),Ro(h),n.da(h))}).then(function(){xo(n)})}function ci(n,s){Y(n)&&(nS(Y(n),n.Ba),ye(Y(n),"tokenChanged",n.qa),ye(Y(n),"userDeleted",n.za),ye(Y(n),"userInvalidated",n.Aa),cl(Y(n))),s&&(s.W.push(n.Ba),Ne(s,"tokenChanged",n.qa),Ne(s,"userDeleted",n.za),Ne(s,"userInvalidated",n.Aa),0<n.u&&hm(s)),q(n,"currentUser",s),s&&(s.xa(n.la()),ol(s,n),Co(s,n.J),ul(s,n),il(s,n.R),sl(s,n))}e.Bb=function(){var n=this,s=this.h.then(function(){return n.b&&Au(n.b.b),Y(n)?(ci(n,null),Im(n.i).then(function(){xo(n)})):G()});return wt(this,s)};function gS(n){var s=cS(n.D,ht(n).options.authDomain).then(function(a){return(n.m=a)&&(a.ha=n.D),wm(n.D)});return wt(n,s)}function mS(n){var s=ht(n).options.authDomain,a=gS(n).then(function(){return Em(n.i,s,n.R)}).then(function(h){return h?(h.ha=n.D,n.m&&(n.m.ga||null)==(h.ga||null)?h:h.reload().then(function(){return bm(n.i,h).then(function(){return h})}).o(function(d){return d.code=="auth/network-request-failed"?h:Im(n.i)})):null}).then(function(h){ci(n,h||null)});return wt(n,a)}function yS(n){return n.$.then(function(){return Am(n)}).o(function(){}).then(function(){if(!n.l)return n.ja()}).o(function(){}).then(function(){if(!n.l){n.ba=!0;var s=n.i;s.b.addListener(Ze("local"),s.a,n.ja)}})}e.Zc=function(){var n=this;return Em(this.i,ht(this).options.authDomain).then(function(s){if(!n.l){var a;if(a=Y(n)&&s){a=Y(n).uid;var h=s.uid;a=a==null||a===""||h===void 0||h===null||h===""?!1:a==h}if(a)return Du(Y(n),s),Y(n).I();(Y(n)||s)&&(ci(n,s),s&&(Ro(s),s.ha=n.D),n.b&&_u(n.b,n),xo(n))}})},e.da=function(n){return bm(this.i,n)},e.mc=function(){xo(this),this.da(Y(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()};function dr(n,s){var a=null,h=null;return wt(n,s.then(function(d){return a=nh(d),h=Cv(d),vS(n,d)},function(d){var v=null;throw d&&d.code==="auth/multi-factor-auth-required"&&(v=om(d.w(),n,C(n.kc,n))),v||d}).then(function(){return Xe({user:Y(n),credential:a,additionalUserInfo:h,operationType:"signIn"})}))}e.kc=function(n){var s=this;return this.h.then(function(){return dr(s,G(n))})},e.zc=function(n){var s=this;this.addAuthTokenListener(function(){n.next(Y(s))})},e.Ac=function(n){var s=this;wS(this,function(){n.next(Y(s))})},e.Ic=function(n,s,a){var h=this;return this.ba&&Promise.resolve().then(function(){typeof n=="function"?n(Y(h)):typeof n.next=="function"&&n.next(Y(h))}),this.Pa(n,s,a)},e.Hc=function(n,s,a){var h=this;return this.ba&&Promise.resolve().then(function(){h.W=h.getUid(),typeof n=="function"?n(Y(h)):typeof n.next=="function"&&n.next(Y(h))}),this.ib(n,s,a)},e.nc=function(n){var s=this,a=this.h.then(function(){return Y(s)?Y(s).I(n).then(function(h){return{accessToken:h}}):null});return wt(this,a)},e.Tc=function(n){var s=this;return this.h.then(function(){return dr(s,tt(s.a,ZT,{token:n}))}).then(function(a){var h=a.user;return Dn(h,"isAnonymous",!1),s.da(h),a})},e.Uc=function(n,s){var a=this;return this.h.then(function(){return dr(a,tt(a.a,vg,{email:n,password:s}))})},e.dc=function(n,s){var a=this;return this.h.then(function(){return dr(a,tt(a.a,CT,{email:n,password:s}))})},e.ab=function(n){var s=this;return this.h.then(function(){return dr(s,n.ka(s.a))})},e.Sc=function(n){return Fc("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(n)},e.Ab=function(){var n=this;return this.h.then(function(){var s=Y(n);if(s&&s.isAnonymous){var a=Xe({providerId:null,isNewUser:!1});return Xe({user:s,credential:null,additionalUserInfo:a,operationType:"signIn"})}return dr(n,n.a.Ab()).then(function(h){var d=h.user;return Dn(d,"isAnonymous",!0),n.da(d),h})})};function ht(n){return n.app}function Y(n){return n.currentUser}e.getUid=function(){return Y(this)&&Y(this).uid||null};function Ru(n){return Y(n)&&Y(n)._lat||null}function xo(n){if(n.ba){for(var s=0;s<n.s.length;s++)n.s[s]&&n.s[s](Ru(n));if(n.W!==n.getUid()&&n.N.length)for(n.W=n.getUid(),s=0;s<n.N.length;s++)n.N[s]&&n.N[s](Ru(n))}}e.cc=function(n){this.addAuthTokenListener(n),this.u++,0<this.u&&Y(this)&&hm(Y(this))},e.Pc=function(n){var s=this;gt(this.s,function(a){a==n&&s.u--}),0>this.u&&(this.u=0),this.u==0&&Y(this)&&cl(Y(this)),this.removeAuthTokenListener(n)},e.addAuthTokenListener=function(n){var s=this;this.s.push(n),wt(this,this.h.then(function(){s.l||an(s.s,n)&&n(Ru(s))}))},e.removeAuthTokenListener=function(n){Me(this.s,function(s){return s==n})};function wS(n,s){n.N.push(s),wt(n,n.h.then(function(){!n.l&&an(n.N,s)&&n.W!==n.getUid()&&(n.W=n.getUid(),s(Ru(n)))}))}e.delete=function(){this.l=!0;for(var n=0;n<this.P.length;n++)this.P[n].cancel("app-deleted");return this.P=[],this.i&&(n=this.i,n.b.removeListener(Ze("local"),n.a,this.ja)),this.b&&(Hh(this.b,this),Au(this.b.b)),Promise.resolve()};function wt(n,s){return n.P.push(s),s.oa(function(){xs(n.P,s)}),s}e.hc=function(n){return wt(this,IT(this.a,n))},e.Bc=function(n){return!!eh(n)},e.xb=function(n,s){var a=this;return wt(this,G().then(function(){var h=new Xs(s);if(!h.c)throw new T("argument-error",Wc+" must be true when sending sign in link to email");return Ys(h)}).then(function(h){return a.a.xb(n,h)}).then(function(){}))},e.jd=function(n){return this.Sa(n).then(function(s){return s.data.email})},e.ob=function(n,s){return wt(this,this.a.ob(n,s).then(function(){}))},e.Sa=function(n){return wt(this,this.a.Sa(n).then(function(s){return new OE(s)}))},e.kb=function(n){return wt(this,this.a.kb(n).then(function(){}))},e.wb=function(n,s){var a=this;return wt(this,G().then(function(){return typeof s>"u"||Wn(s)?{}:Ys(new Xs(s))}).then(function(h){return a.a.wb(n,h)}).then(function(){}))},e.Wc=function(n,s){return wt(this,Xh(this,n,s,C(this.ab,this)))},e.Vc=function(n,s){var a=this;return wt(this,G().then(function(){var h=s||so(),d=Bv(n,h);if(h=eh(h),!h)throw new T("argument-error","Invalid email link!");if(h.tenantId!==a.T())throw new T("tenant-id-mismatch");return a.ab(d)}))};function Lo(){}Lo.prototype.render=function(){},Lo.prototype.reset=function(){},Lo.prototype.getResponse=function(){},Lo.prototype.execute=function(){};function hi(){this.a={},this.b=1e12}var bl=null;hi.prototype.render=function(n,s){return this.a[this.b.toString()]=new Ou(n,s),this.b++},hi.prototype.reset=function(n){var s=Il(this,n);n=Nm(n),s&&n&&(s.delete(),delete this.a[n])},hi.prototype.getResponse=function(n){return(n=Il(this,n))?n.getResponse():null},hi.prototype.execute=function(n){(n=Il(this,n))&&n.execute()};function Il(n,s){return(s=Nm(s))&&n.a[s]||null}function Nm(n){return(n=typeof n>"u"?1e12:n)?n.toString():null}function Ou(n,s){this.g=!1,this.c=s,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=Zi(n);var a=this;this.i=function(){a.execute()},this.h?this.execute():Ne(this.f,"click",this.i)}Ou.prototype.getResponse=function(){return El(this),this.b},Ou.prototype.execute=function(){El(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=AE();var s=n.c.callback,a=n.c["expired-callback"];if(s)try{s(n.b)}catch{}n.a=setTimeout(function(){if(n.a=null,n.b=null,a)try{a()}catch{}n.h&&n.execute()},6e4)},500))},Ou.prototype.delete=function(){El(this),this.g=!0,clearTimeout(this.a),this.a=null,ye(this.f,"click",this.i)};function El(n){if(n.g)throw Error("reCAPTCHA mock was already deleted!")}function Tl(){}q(Tl,"FACTOR_ID","phone");function _l(){}_l.prototype.g=function(){return bl||(bl=new hi),G(bl)},_l.prototype.c=function(){};var Sl=null;function Al(){this.b=f.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var bS=new $e(Ls,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),IS=new An(3e4,6e4);Al.prototype.g=function(n){var s=this;return new Z(function(a,h){var d=setTimeout(function(){h(new T("network-request-failed"))},IS.get());if(!f.grecaptcha||n!==s.f&&!s.b){f[s.a]=function(){if(f.grecaptcha){s.f=n;var m=f.grecaptcha.render;f.grecaptcha.render=function(b,N){return b=m(b,N),s.b++,b},clearTimeout(d),a(f.grecaptcha)}else clearTimeout(d),h(new T("internal-error"));delete f[s.a]};var v=uc(bS,{onload:s.a,hl:n||""});G(vh(v)).o(function(){clearTimeout(d),h(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(d),a(f.grecaptcha)})},Al.prototype.c=function(){this.b--};var Nl=null;function kl(n,s,a,h,d,v,m){if(q(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=s,this.g=null,m?(Sl||(Sl=new _l),m=Sl):(Nl||(Nl=new Al),m=Nl),this.m=m,this.a=a||{theme:"light",type:"image"},this.h=[],this.a[Cm])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[ES]==="invisible",!f.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Zi(s)||!this.i&&Zi(s).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new je(n,v||null,d||null),this.u=h||function(){return null};var b=this;this.l=[];var N=this.a[km];this.a[km]=function(Q){if(Rm(b,Q),typeof N=="function")N(Q);else if(typeof N=="string"){var at=pt(N,f);typeof at=="function"&&at(Q)}};var R=this.a[Dm];this.a[Dm]=function(){if(Rm(b,null),typeof R=="function")R();else if(typeof R=="string"){var Q=pt(R,f);typeof Q=="function"&&Q()}}}var km="callback",Dm="expired-callback",Cm="sitekey",ES="size";function Rm(n,s){for(var a=0;a<n.l.length;a++)try{n.l[a](s)}catch{}}function TS(n,s){Me(n.l,function(a){return a==s})}function Dl(n,s){return n.h.push(s),s.oa(function(){xs(n.h,s)}),s}e=kl.prototype,e.Ia=function(){var n=this;return this.f?this.f:this.f=Dl(this,G().then(function(){if(Ws()&&!Ue())return $s();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return n.m.g(n.u())}).then(function(s){return n.g=s,tt(n.s,GT,{})}).then(function(s){n.a[Cm]=s.recaptchaSiteKey}).o(function(s){throw n.f=null,s}))},e.render=function(){xu(this);var n=this;return Dl(this,this.Ia().then(function(){if(n.c===null){var s=n.v;if(!n.i){var a=Zi(s);s=QI("DIV"),a.appendChild(s)}n.c=n.g.render(s,n.a)}return n.c}))},e.verify=function(){xu(this);var n=this;return Dl(this,this.render().then(function(s){return new Z(function(a){var h=n.g.getResponse(s);if(h)a(h);else{var d=function(v){v&&(TS(n,d),a(v))};n.l.push(d),n.i&&n.g.execute(n.c)}})}))},e.reset=function(){xu(this),this.c!==null&&this.g.reset(this.c)};function xu(n){if(n.J)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}e.clear=function(){xu(this),this.J=!0,this.m.c();for(var n=0;n<this.h.length;n++)this.h[n].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){n=Zi(this.v);for(var s;s=n.firstChild;)n.removeChild(s)}};function Cl(n,s,a){var h=!1;try{this.b=a||H.app()}catch{throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)a=this.b.options.apiKey;else throw new T("invalid-api-key");var d=this,v=null;try{v=this.b.auth().Ga()}catch{}try{h=this.b.auth().settings.appVerificationDisabledForTesting}catch{}v=H.SDK_VERSION?Yr(H.SDK_VERSION,v):null,kl.call(this,a,n,s,function(){try{var m=d.b.auth().la()}catch{m=null}return m},v,Xi(Yi),h)}F(Cl,kl);function Om(n,s,a,h){t:{a=Array.prototype.slice.call(a);for(var d=0,v=!1,m=0;m<s.length;m++)if(s[m].optional)v=!0;else{if(v)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");d++}if(v=s.length,a.length<d||v<a.length)h="Expected "+(d==v?d==1?"1 argument":d+" arguments":d+"-"+v+" arguments")+" but got "+a.length+".";else{for(d=0;d<a.length;d++)if(v=s[d].optional&&a[d]===void 0,!s[d].M(a[d])&&!v){if(s=s[d],0>d||d>=xm.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");a=xm[d],h=(h?"":a+" argument ")+(s.name?'"'+s.name+'" ':"")+"must be "+s.K+".";break t}h=null}}if(h)throw new T("argument-error",n+" failed: "+h)}var xm="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function j(n,s){return{name:n||"",K:"a valid string",optional:!!s,M:function(a){return typeof a=="string"}}}function Rl(n,s){return{name:n||"",K:"a boolean",optional:!!s,M:function(a){return typeof a=="boolean"}}}function At(n,s){return{name:n||"",K:"a valid object",optional:!!s,M:A}}function li(n,s){return{name:n||"",K:"a function",optional:!!s,M:function(a){return typeof a=="function"}}}function tn(n,s){return{name:n||"",K:"null",optional:!!s,M:function(a){return a===null}}}function _S(){return{name:"",K:"an HTML element",optional:!1,M:function(n){return!!(n&&n instanceof Element)}}}function SS(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(n){return!!(n&&n instanceof Be)}}}function AS(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(n){return!!(n&&n instanceof H.app.App)}}}function Cn(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(s){if(!s)return!1;var a=!n||s.providerId===n;return!(!s.ka||!a)}}}function Lm(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(n){return n?!!n.tb:!1}}}function fi(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}}function Ol(n,s){return A(n)&&typeof n.type=="string"&&n.type===s&&typeof n.Ha=="function"}function Pm(n){return A(n)&&typeof n.uid=="string"}function Lu(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(n){return!(!n||typeof n.type!="string"||typeof n.verify!="function")}}}function Tt(n,s,a,h){return{name:a||"",K:n.K+" or "+s.K,optional:!!h,M:function(d){return n.M(d)||s.M(d)}}}function mt(n,s){for(var a in s){var h=s[a].name;n[h]=Fm(h,n[a],s[a].j)}}function Mm(n,s){for(var a in s){var h=s[a].name;h!==a&&Object.defineProperty(n,h,{get:W(function(d){return this[d]},a),set:W(function(d,v,m,b){Om(d,[m],[b],!0),this[v]=b},h,a,s[a].lb),enumerable:!0})}}function _t(n,s,a,h){n[s]=Fm(s,a,h)}function Fm(n,s,a){function h(){var m=Array.prototype.slice.call(arguments);return Om(d,a,m),s.apply(this,m)}if(!a)return s;var d=NS(n),v;for(v in s)h[v]=s[v];for(v in s.prototype)h.prototype[v]=s.prototype[v];return h}function NS(n){return n=n.split("."),n[n.length-1]}mt(Be.prototype,{kb:{name:"applyActionCode",j:[j("code")]},Sa:{name:"checkActionCode",j:[j("code")]},ob:{name:"confirmPasswordReset",j:[j("code"),j("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[j("email"),j("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[j("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[j("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Tt(At(),li(),"nextOrObserver"),li("opt_error",!0),li("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Tt(At(),li(),"nextOrObserver"),li("opt_error",!0),li("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[j("email"),Tt(At("opt_actionCodeSettings",!0),tn(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[j("email"),At("actionCodeSettings")]},yb:{name:"setPersistence",j:[j("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Cn()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Cn()]},Tc:{name:"signInWithCustomToken",j:[j("token")]},Uc:{name:"signInWithEmailAndPassword",j:[j("email"),j("password")]},Vc:{name:"signInWithEmailLink",j:[j("email"),j("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[j("phoneNumber"),Lu()]},Xc:{name:"signInWithPopup",j:[fi()]},Yc:{name:"signInWithRedirect",j:[fi()]},dd:{name:"updateCurrentUser",j:[Tt(function(n){return{name:"user",K:"an instance of Firebase User",optional:!1,M:function(s){return!!(s&&s instanceof be)}}}(),tn(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[j(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[j("url"),At("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[j("code")]}}),Mm(Be.prototype,{lc:{name:"languageCode",lb:Tt(j(),tn(),"languageCode")},ti:{name:"tenantId",lb:Tt(j(),tn(),"tenantId")}}),Be.Persistence=ii,Be.Persistence.LOCAL="local",Be.Persistence.SESSION="session",Be.Persistence.NONE="none",mt(be.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Rl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Rl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Cn()]},rb:{name:"linkWithCredential",j:[Cn()]},Dc:{name:"linkWithPhoneNumber",j:[j("phoneNumber"),Lu()]},Ec:{name:"linkWithPopup",j:[fi()]},Fc:{name:"linkWithRedirect",j:[fi()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Cn()]},ub:{name:"reauthenticateWithCredential",j:[Cn()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[j("phoneNumber"),Lu()]},Nc:{name:"reauthenticateWithPopup",j:[fi()]},Oc:{name:"reauthenticateWithRedirect",j:[fi()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Tt(At("opt_actionCodeSettings",!0),tn(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[j(null,!0)]},cd:{name:"unlink",j:[j("provider")]},Cb:{name:"updateEmail",j:[j("email")]},Db:{name:"updatePassword",j:[j("password")]},ed:{name:"updatePhoneNumber",j:[Cn("phone")]},Eb:{name:"updateProfile",j:[At("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[j("email"),Tt(At("opt_actionCodeSettings",!0),tn(null,!0),"opt_actionCodeSettings",!0)]}}),mt(hi.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),mt(Lo.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),mt(Z.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Mm(nm.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Rl("appVerificationDisabledForTesting")}}),mt(Qh.prototype,{confirm:{name:"confirm",j:[j("verificationCode")]}}),_t(ti,"fromJSON",function(n){n=typeof n=="string"?JSON.parse(n):n;for(var s,a=[XE,YE,JE,QE],h=0;h<a.length;h++)if(s=a[h](n))return s;return null},[Tt(j(),At(),"json")]),_t(De,"credential",function(n,s){return new Nn(n,s)},[j("email"),j("password")]),mt(Nn.prototype,{w:{name:"toJSON",j:[j(null,!0)]}}),mt(or.prototype,{Ca:{name:"addScope",j:[j("scope")]},Ka:{name:"setCustomParameters",j:[At("customOAuthParameters")]}}),_t(or,"credential",Uv,[Tt(j(),At(),"token")]),_t(De,"credentialWithLink",Bv,[j("email"),j("emailLink")]),mt(sr.prototype,{Ca:{name:"addScope",j:[j("scope")]},Ka:{name:"setCustomParameters",j:[At("customOAuthParameters")]}}),_t(sr,"credential",Vv,[Tt(j(),At(),"token")]),mt(ur.prototype,{Ca:{name:"addScope",j:[j("scope")]},Ka:{name:"setCustomParameters",j:[At("customOAuthParameters")]}}),_t(ur,"credential",jv,[Tt(j(),Tt(At(),tn()),"idToken"),Tt(j(),tn(),"accessToken",!0)]),mt(ni.prototype,{Ka:{name:"setCustomParameters",j:[At("customOAuthParameters")]}}),_t(ni,"credential",qv,[Tt(j(),At(),"token"),j("secret",!0)]),mt(we.prototype,{Ca:{name:"addScope",j:[j("scope")]},credential:{name:"credential",j:[Tt(j(),Tt(At(),tn()),"optionsOrIdToken"),Tt(j(),tn(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[At("customOAuthParameters")]}}),mt(hn.prototype,{w:{name:"toJSON",j:[j(null,!0)]}}),mt(rr.prototype,{w:{name:"toJSON",j:[j(null,!0)]}}),_t(ln,"credential",Kv,[j("verificationId"),j("verificationCode")]),mt(ln.prototype,{gb:{name:"verifyPhoneNumber",j:[Tt(j(),function(n,s){return{name:n||"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(a){return a?a.session&&a.phoneNumber?Ol(a.session,po)&&typeof a.phoneNumber=="string":a.session&&a.multiFactorHint?Ol(a.session,nu)&&Pm(a.multiFactorHint):a.session&&a.multiFactorUid?Ol(a.session,nu)&&typeof a.multiFactorUid=="string":a.phoneNumber?typeof a.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Lu()]}}),mt(kn.prototype,{w:{name:"toJSON",j:[j(null,!0)]}}),mt(T.prototype,{toJSON:{name:"toJSON",j:[j(null,!0)]}}),mt(go.prototype,{toJSON:{name:"toJSON",j:[j(null,!0)]}}),mt(oh.prototype,{toJSON:{name:"toJSON",j:[j(null,!0)]}}),mt(Jh.prototype,{toJSON:{name:"toJSON",j:[j(null,!0)]}}),mt(Yh.prototype,{Rc:{name:"resolveSignIn",j:[Lm()]}}),mt(tl.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Lm(),j("displayName",!0)]},bd:{name:"unenroll",j:[Tt({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Pm},j(),"multiFactorInfoIdentifier")]}}),mt(Cl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),_t($c,"parseLink",bv,[j("link")]),_t(Tl,"assertion",function(n){return new um(n)},[Cn("phone")]),function(){if(typeof H<"u"&&H.INTERNAL&&H.INTERNAL.registerComponent){var n={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Qs,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:zc,VERIFY_AND_CHANGE_EMAIL:lo,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Be,AuthCredential:ti,Error:T};_t(n,"EmailAuthProvider",De,[]),_t(n,"FacebookAuthProvider",or,[]),_t(n,"GithubAuthProvider",sr,[]),_t(n,"GoogleAuthProvider",ur,[]),_t(n,"TwitterAuthProvider",ni,[]),_t(n,"OAuthProvider",we,[j("providerId")]),_t(n,"SAMLAuthProvider",Fv,[j("providerId")]),_t(n,"PhoneAuthProvider",ln,[SS()]),_t(n,"RecaptchaVerifier",Cl,[Tt(j(),_S(),"recaptchaContainer"),At("recaptchaParameters",!0),AS()]),_t(n,"ActionCodeURL",$c,[]),_t(n,"PhoneMultiFactorGenerator",Tl,[]),H.INTERNAL.registerComponent({name:"auth",instanceFactory:function(s){return s=s.getProvider("app").getImmediate(),new Be(s)},multipleInstances:!1,serviceProps:n,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(s){s.getProvider("auth-internal").initialize()}}),H.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(s){return s=s.getProvider("auth").getImmediate(),{getUid:C(s.getUid,s),getToken:C(s.nc,s),addAuthTokenListener:C(s.cc,s),removeAuthTokenListener:C(s.Pc,s)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),H.registerVersion("@firebase/auth","0.16.8"),H.INTERNAL.extendNamespace({User:be})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});var DC={apiKey:"AIzaSyAAzuCX4kH2vA0CXbGWzCjFUyY3wb279pk",authDomain:"bby14-rate-my-landlord.firebaseapp.com",databaseURL:"https://bby14-rate-my-landlord-default-rtdb.firebaseio.com",projectId:"bby14-rate-my-landlord",storageBucket:"bby14-rate-my-landlord.firebasestorage.app",messagingSenderId:"1084147838267",appId:"1:1084147838267:web:f043a7415ee69a5d029b1e"};H.apps.length||H.initializeApp(DC);H.app();const se=H.firestore(),Ns=H.auth();function vI(e){const t=e.firstName,r=e.lastName;return t.concat(" ",r)}function gI(e){const t=e.toDate(),r={month:"long",day:"numeric",year:"numeric"};return t.toLocaleDateString("en-US",r)}function CC({id:e,firstName:t,lastName:r,ratings:i,tags:o}){return Kd("/components/landlord-card.html","w-full not-last:mb-6 p-4 border-2 border-black",u=>{u.querySelector("#name").textContent=t+" "+r,u.querySelector("#rating").textContent=i.overall,Ea(t,u);let c="";for(let l=0;l<o.length;l++)c+='<span class="px-3 py-1 text-sm bg-gray-100 text-gray-800 rounded-full"> ',c+=o[l],c+="  </span>";u.querySelector("#tags").innerHTML=c,u.style.cursor="pointer",u.addEventListener("click",()=>{window.location.href=`/landlord/${e}`})})}function RC(e){e.sort((t,r)=>parseFloat(r.ratings.overall)-parseFloat(t.ratings.overall))}function OC(e){const t=new URLSearchParams(window.location.search),r=t.get("query")?t.get("query").toLowerCase():"";return r&&(e=e.filter(i=>vI(i).toLowerCase().includes(r))),e}async function un(e,t){fetch(e).then(r=>{if(!r.ok)throw new Error("Network response was not ok");return r.text()}).then(r=>{const i=document.querySelector("main");i.innerHTML=r,t&&typeof t=="function"&&t(i)}).catch(r=>{console.error("Error loading content:",r),document.querySelector("main").innerHTML="<p>Error loading content.</p>"})}function mI(e,t,r){fetch(e).then(i=>{if(!i.ok)throw new Error("Network response was not ok");return i.text()}).then(i=>{const o=document.querySelector(t);o?o.insertAdjacentHTML("beforeend",i):console.error("Container not found:",t)}).catch(i=>{console.error("Error loading component:",i)})}async function Kd(e,t,r){const o=await(await fetch(e)).text(),u=document.createElement("div");return u.className=t,u.innerHTML=o,r(u),u}async function xC(){try{const t=(await se.collection("landlords").get()).docs.map(o=>({id:o.id,...o.data()})),r=OC(t);RC(r);const i=document.querySelector("#card-container");i.innerHTML=r.length>0?"":"No landlords found.",Promise.all(r.map(o=>CC(o))).then(o=>{o.forEach(u=>i.appendChild(u))})}catch(e){console.error("Error fetching data from firestore: ",e)}}async function LC(e){try{const t=await se.collection("users").doc(e.uid).get();if(!t.exists)return;const{reviews:r}=t.data(),i=document.querySelector("#card-container");await Promise.all(r.map(async o=>{try{const u=await MC(o);PC(u).then(c=>{i.appendChild(c)})}catch(u){console.error("Error creating review card: ",u)}}))}catch(t){console.error("Error fetching the user document: ",t)}}async function PC({id:e,name:t,rating:r,title:i,content:o,date:u}){return Kd("/components/review-card.html","flex-none w-full sm:max-w-3xl p-4 border-2 border-black",c=>{c.dataset.reviewId=e,c.querySelector("#name").textContent=t,c.querySelector("#rating").textContent=r,c.querySelector("#title").textContent=i,c.querySelector("#content").textContent=o,c.querySelector("#date").textContent=u})}async function MC(e){try{const t=await se.collection("reviews").doc(e).get();if(!t.exists)throw new Error("Review does not exist");const r=t.data(),i=await se.collection("landlords").doc(r.landlordId).get(),o=i.exists?vI(i.data()):"Unknown",u=gI(r.createdAt);return{id:e,name:o,rating:r.ratings.overall,title:r.title,content:r.content,date:u}}catch(t){throw console.error("Failed fetching review data: ",t),t}}function Ea(e,t,r){let i;const o=e.trim().charAt(0).toUpperCase();if(!r)i=t.querySelector("#avatar-placeholder");else{i=document.querySelector("#"+r),i.innerHTML="";const u=document.createElement("div");u.className="w-8 h-8 rounded-full bg-gray-400 flex items-center justify-center text-white text-[1em]",i.replaceWith(u),u.textContent=o}i.textContent=o}async function FC(e){const t=e.closest(".flex-none"),r=t.dataset.reviewId;if(console.log(r),!r){console.error("No review id found for deletion.");return}if(confirm("Are you sure you want to delete this review?")){try{const i=se.collection("reviews").doc(r),o=await i.get();if(!o.exists){console.error("Review document doens't exist.");return}const c=o.data().landlordId;if(!c){console.error("No landlord id found in review document.");return}await se.collection("landlords").doc(c).update({reviews:H.firestore.FieldValue.arrayRemove(r)});const l=H.auth().currentUser.uid;await se.collection("users").doc(l).update({reviews:H.firestore.FieldValue.arrayRemove(r)}),await i.delete(),console.log("Review deleted successfully.")}catch(i){console.error("Error deleting review: ",i),alert("Failed to delete review.")}se.collection("reviews").doc(r).delete().then(()=>{console.log("Review deleted successfully"),t.remove()}).catch(i=>{console.error("Error deleting review: ",i),alert("Failed to delete review.")})}}window.deleteReview=FC;Ns.setPersistence(H.auth.Auth.Persistence.LOCAL);Ns.onAuthStateChanged(e=>{e&&(Ea(e.email,null,"profileIcon1"),Ea(e.email,null,"profileIcon2"))});Ns.currentUser;const UC="modulepreload",VC=function(e){return"/"+e},dw={},Vr=function(t,r,i){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(r.map(f=>{if(f=VC(f),f in dw)return;dw[f]=!0;const p=f.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":UC,p||(y.as="script"),y.crossOrigin="",y.href=f,l&&y.setAttribute("nonce",l),document.head.appendChild(y),p)return new Promise((w,I)=>{y.addEventListener("load",w),y.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${f}`)))})}))}function u(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return o.then(c=>{for(const l of c||[])l.status==="rejected"&&u(l.reason);return t().catch(u)})};var _f=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},ks=II,jC=Gd,qC=HC,BC=yI,KC=bI,GC=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Gd(e){for(var t=[],r=0,i=0,o="",u;(u=GC.exec(e))!=null;){var c=u[0],l=u[1],f=u.index;if(o+=e.slice(i,f),i=f+c.length,l){o+=l[1];continue}o&&(t.push(o),o="");var p=u[2],g=u[3],y=u[4],w=u[5],I=u[6],E=u[7],_=I==="+"||I==="*",A=I==="?"||I==="*",x=p||"/",U=y||w||(E?".*":"[^"+x+"]+?");t.push({name:g||r++,prefix:p||"",delimiter:x,optional:A,repeat:_,pattern:zC(U)})}return i<e.length&&(o+=e.substr(i)),o&&t.push(o),t}function HC(e){return yI(Gd(e))}function yI(e){for(var t=new Array(e.length),r=0;r<e.length;r++)typeof e[r]=="object"&&(t[r]=new RegExp("^"+e[r].pattern+"$"));return function(i){for(var o="",u=i||{},c=0;c<e.length;c++){var l=e[c];if(typeof l=="string"){o+=l;continue}var f=u[l.name],p;if(f==null){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to be defined')}if(_f(f)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received "'+f+'"');if(f.length===0){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var g=0;g<f.length;g++){if(p=encodeURIComponent(f[g]),!t[c].test(p))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received "'+p+'"');o+=(g===0?l.prefix:l.delimiter)+p}continue}if(p=encodeURIComponent(f),!t[c].test(p))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+p+'"');o+=l.prefix+p}return o}}function pw(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function zC(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Hd(e,t){return e.keys=t,e}function wI(e){return e.sensitive?"":"i"}function $C(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var i=0;i<r.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return Hd(e,t)}function WC(e,t,r){for(var i=[],o=0;o<e.length;o++)i.push(II(e[o],t,r).source);var u=new RegExp("(?:"+i.join("|")+")",wI(r));return Hd(u,t)}function QC(e,t,r){for(var i=Gd(e),o=bI(i,r),u=0;u<i.length;u++)typeof i[u]!="string"&&t.push(i[u]);return Hd(o,t)}function bI(e,t){t=t||{};for(var r=t.strict,i=t.end!==!1,o="",u=e[e.length-1],c=typeof u=="string"&&/\/$/.test(u),l=0;l<e.length;l++){var f=e[l];if(typeof f=="string")o+=pw(f);else{var p=pw(f.prefix),g=f.pattern;f.repeat&&(g+="(?:"+p+g+")*"),f.optional?p?g="(?:"+p+"("+g+"))?":g="("+g+")?":g=p+"("+g+")",o+=g}}return r||(o=(c?o.slice(0,-2):o)+"(?:\\/(?=$))?"),i?o+="$":o+=r&&c?"":"(?=\\/|$)",new RegExp("^"+o,wI(t))}function II(e,t,r){return t=t||[],_f(t)?r||(r={}):(r=t,t=[]),e instanceof RegExp?$C(e,t):_f(e)?WC(e,t,r):QC(e,t,r)}ks.parse=jC;ks.compile=qC;ks.tokensToFunction=BC;ks.tokensToRegExp=KC;var ji=typeof document<"u",Re=typeof window<"u",Za=typeof history<"u",XC=typeof process<"u",Sf=ji&&document.ontouchstart?"touchstart":"click",yn=Re&&!!(window.history.location||window.location);function Ot(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}Ot.prototype.configure=function(e){var t=e||{};this._window=t.window||Re&&window,this._decodeURLComponents=t.decodeURLComponents!==!1,this._popstate=t.popstate!==!1&&Re,this._click=t.click!==!1&&ji,this._hashbang=!!t.hashbang;var r=this._window;this._popstate?r.addEventListener("popstate",this._onpopstate,!1):Re&&r.removeEventListener("popstate",this._onpopstate,!1),this._click?r.document.addEventListener(Sf,this.clickHandler,!1):ji&&r.document.removeEventListener(Sf,this.clickHandler,!1),this._hashbang&&Re&&!Za?r.addEventListener("hashchange",this._onpopstate,!1):Re&&r.removeEventListener("hashchange",this._onpopstate,!1)};Ot.prototype.base=function(e){if(arguments.length===0)return this._base;this._base=e};Ot.prototype._getBase=function(){var e=this._base;if(e)return e;var t=Re&&this._window&&this._window.location;return Re&&this._hashbang&&t&&t.protocol==="file:"&&(e=t.pathname),e};Ot.prototype.strict=function(e){if(arguments.length===0)return this._strict;this._strict=e};Ot.prototype.start=function(e){var t=e||{};if(this.configure(t),t.dispatch!==!1){this._running=!0;var r;if(yn){var i=this._window,o=i.location;this._hashbang&&~o.hash.indexOf("#!")?r=o.hash.substr(2)+o.search:this._hashbang?r=o.search+o.hash:r=o.pathname+o.search+o.hash}this.replace(r,null,!0,t.dispatch)}};Ot.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(Sf,this.clickHandler,!1),Re&&e.removeEventListener("popstate",this._onpopstate,!1),Re&&e.removeEventListener("hashchange",this._onpopstate,!1)}};Ot.prototype.show=function(e,t,r,i){var o=new Ds(e,t,this),u=this.prevContext;return this.prevContext=o,this.current=o.path,r!==!1&&this.dispatch(o,u),o.handled!==!1&&i!==!1&&o.pushState(),o};Ot.prototype.back=function(e,t){var r=this;if(this.len>0){var i=this._window;Za&&i.history.back(),this.len--}else setTimeout(e?function(){r.show(e,t)}:function(){r.show(r._getBase(),t)})};Ot.prototype.redirect=function(e,t){var r=this;typeof e=="string"&&typeof t=="string"&&tc.call(this,e,function(i){setTimeout(function(){r.replace(t)},0)}),typeof e=="string"&&typeof t>"u"&&setTimeout(function(){r.replace(e)},0)};Ot.prototype.replace=function(e,t,r,i){var o=new Ds(e,t,this),u=this.prevContext;return this.prevContext=o,this.current=o.path,o.init=r,o.save(),i!==!1&&this.dispatch(o,u),o};Ot.prototype.dispatch=function(e,t){var r=0,i=0,o=this;function u(){var l=o.exits[i++];if(!l)return c();l(t,u)}function c(){var l=o.callbacks[r++];if(e.path!==o.current){e.handled=!1;return}if(!l)return YC.call(o,e);l(e,c)}t?u():c()};Ot.prototype.exit=function(e,t){if(typeof e=="function")return this.exit("*",e);for(var r=new Cs(e,null,this),i=1;i<arguments.length;++i)this.exits.push(r.middleware(arguments[i]))};Ot.prototype.clickHandler=function(e){if(this._which(e)===1&&!(e.metaKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented){var t=e.target,r=e.path||(e.composedPath?e.composedPath():null);if(r){for(var i=0;i<r.length;i++)if(r[i].nodeName&&r[i].nodeName.toUpperCase()==="A"&&r[i].href){t=r[i];break}}for(;t&&t.nodeName.toUpperCase()!=="A";)t=t.parentNode;if(!(!t||t.nodeName.toUpperCase()!=="A")){var o=typeof t.href=="object"&&t.href.constructor.name==="SVGAnimatedString";if(!(t.hasAttribute("download")||t.getAttribute("rel")==="external")){var u=t.getAttribute("href");if(!(!this._hashbang&&this._samePath(t)&&(t.hash||u==="#"))&&!(u&&u.indexOf("mailto:")>-1)&&!(o?t.target.baseVal:t.target)&&!(!o&&!this.sameOrigin(t.href))){var c=o?t.href.baseVal:t.pathname+t.search+(t.hash||"");c=c[0]!=="/"?"/"+c:c,XC&&c.match(/^\/[a-zA-Z]:\//)&&(c=c.replace(/^\/[a-zA-Z]:\//,"/"));var l=c,f=this._getBase();c.indexOf(f)===0&&(c=c.substr(f.length)),this._hashbang&&(c=c.replace("#!","")),!(f&&l===c&&(!yn||this._window.location.protocol!=="file:"))&&(e.preventDefault(),this.show(l))}}}}};Ot.prototype._onpopstate=function(){var e=!1;return Re?(ji&&document.readyState==="complete"?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(r){if(e){var i=this;if(r.state){var o=r.state.path;i.replace(o,r.state)}else if(yn){var u=i._window.location;i.show(u.pathname+u.search+u.hash,void 0,void 0,!1)}}}):function(){}}();Ot.prototype._which=function(e){return e=e||Re&&this._window.event,e.which==null?e.button:e.which};Ot.prototype._toURL=function(e){var t=this._window;if(typeof URL=="function"&&yn)return new URL(e,t.location.toString());if(ji){var r=t.document.createElement("a");return r.href=e,r}};Ot.prototype.sameOrigin=function(e){if(!e||!yn)return!1;var t=this._toURL(e),r=this._window,i=r.location;return i.protocol===t.protocol&&i.hostname===t.hostname&&(i.port===t.port||i.port===""&&(t.port==80||t.port==443))};Ot.prototype._samePath=function(e){if(!yn)return!1;var t=this._window,r=t.location;return e.pathname===r.pathname&&e.search===r.search};Ot.prototype._decodeURLEncodedURIComponent=function(e){return typeof e!="string"?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e};function EI(){var e=new Ot;function t(){return tc.apply(e,arguments)}return t.callbacks=e.callbacks,t.exits=e.exits,t.base=e.base.bind(e),t.strict=e.strict.bind(e),t.start=e.start.bind(e),t.stop=e.stop.bind(e),t.show=e.show.bind(e),t.back=e.back.bind(e),t.redirect=e.redirect.bind(e),t.replace=e.replace.bind(e),t.dispatch=e.dispatch.bind(e),t.exit=e.exit.bind(e),t.configure=e.configure.bind(e),t.sameOrigin=e.sameOrigin.bind(e),t.clickHandler=e.clickHandler.bind(e),t.create=EI,Object.defineProperty(t,"len",{get:function(){return e.len},set:function(r){e.len=r}}),Object.defineProperty(t,"current",{get:function(){return e.current},set:function(r){e.current=r}}),t.Context=Ds,t.Route=Cs,t}function tc(e,t){if(typeof e=="function")return tc.call(this,"*",e);if(typeof t=="function")for(var r=new Cs(e,null,this),i=1;i<arguments.length;++i)this.callbacks.push(r.middleware(arguments[i]));else typeof e=="string"?this[typeof t=="string"?"redirect":"show"](e,t):this.start(e)}function YC(e){if(!e.handled){var t,r=this,i=r._window;r._hashbang?t=yn&&this._getBase()+i.location.hash.replace("#!",""):t=yn&&i.location.pathname+i.location.search,t!==e.canonicalPath&&(r.stop(),e.handled=!1,yn&&(i.location.href=e.canonicalPath))}}function JC(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Ds(e,t,r){var i=this.page=r||tc,o=i._window,u=i._hashbang,c=i._getBase();e[0]==="/"&&e.indexOf(c)!==0&&(e=c+(u?"#!":"")+e);var l=e.indexOf("?");this.canonicalPath=e;var f=new RegExp("^"+JC(c));if(this.path=e.replace(f,"")||"/",u&&(this.path=this.path.replace("#!","")||"/"),this.title=ji&&o.document.title,this.state=t||{},this.state.path=e,this.querystring=~l?i._decodeURLEncodedURIComponent(e.slice(l+1)):"",this.pathname=i._decodeURLEncodedURIComponent(~l?e.slice(0,l):e),this.params={},this.hash="",!u){if(!~this.path.indexOf("#"))return;var p=this.path.split("#");this.path=this.pathname=p[0],this.hash=i._decodeURLEncodedURIComponent(p[1])||"",this.querystring=this.querystring.split("#")[0]}}Ds.prototype.pushState=function(){var e=this.page,t=e._window,r=e._hashbang;e.len++,Za&&t.history.pushState(this.state,this.title,r&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};Ds.prototype.save=function(){var e=this.page;Za&&e._window.history.replaceState(this.state,this.title,e._hashbang&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};function Cs(e,t,r){var i=this.page=r||zd,o=t||{};o.strict=o.strict||i._strict,this.path=e==="*"?"(.*)":e,this.method="GET",this.regexp=ks(this.path,this.keys=[],o)}Cs.prototype.middleware=function(e){var t=this;return function(r,i){if(t.match(r.path,r.params))return r.routePath=t.path,e(r,i);i()}};Cs.prototype.match=function(e,t){var r=this.keys,i=e.indexOf("?"),o=~i?e.slice(0,i):e,u=this.regexp.exec(decodeURIComponent(o));if(!u)return!1;delete t[0];for(var c=1,l=u.length;c<l;++c){var f=r[c-1],p=this.page._decodeURLEncodedURIComponent(u[c]);(p!==void 0||!hasOwnProperty.call(t,f.name))&&(t[f.name]=p)}return!0};var zd=EI(),Le=zd,ZC=zd;Le.default=ZC;new URLSearchParams(window.location.search);se.collection("landlords");const tR=window.location.pathname.split("/"),Af=tR[2];se.collection("dbReview");async function eR(){try{const t=await se.collection("landlords").doc(Af).get();if(t.exists){const r=t.data(),i=new URLSearchParams({firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",facebookLink:r.facebookLink||"",landlordId:Af});window.location.replace("/edit-landlord?"+i.toString())}else console.log("No landlord found")}catch(e){console.error("Error fetching landlord info:",e)}}window.goToEditPage=eR;async function nR(){try{const t=await se.collection("landlords").doc(Af).get();t.exists?window.location.replace("/review?landlord="+t.id):console.log("No landlord found")}catch(e){console.error("Error fetching landlord info:",e)}}window.goToWritePage=nR;async function TI({landlordName:e,landlordId:t,ratings:r,title:i,content:o,createdAt:u}){return Kd("/components/review-card.html","w-[700px] p-4 border-2 border-black mx-auto mb-6",c=>{const l=c.querySelector(".deleteBtn");l&&(l.style.display="none"),c.querySelector("#name").textContent=e,c.querySelector("#rating").textContent=r.overall,c.querySelector("#title").textContent=i,c.querySelector("#content").textContent=o,c.querySelector("#date").textContent=gI(u)})}const rR=Object.freeze(Object.defineProperty({__proto__:null,createReviewCardLandlord:TI},Symbol.toStringTag,{value:"Module"}));Le("/",()=>un("/partials/home.html",()=>{mI("/components/search-bar.html","#searchBar")}));Le("/login",()=>un("/partials/login.html",async()=>{await Vr(()=>import("./authentication-DpVoVDos.js"),[])}));Le("/search",()=>un("/partials/search.html",()=>{mI("/components/search-bar.html","#searchBar"),xC()}));Le("/review*",()=>un("/partials/reviewLandlord.html",async()=>{await Vr(()=>import("./reviewLandlord-BA3BQbVP.js"),__vite__mapDeps([0,1]))}));Le("/add-landlord*",()=>un("/partials/addLandlord.html",async()=>{await Vr(()=>import("./addLandlord-CQNfdm2a.js"),__vite__mapDeps([2,1]))}));Le("/edit-landlord*",()=>un("/partials/editLandlord.html",async()=>{await Vr(()=>import("./editLandlord-OkAmbdcp.js"),__vite__mapDeps([3,1]))}));Le("/verify-landlord*",()=>un("/partials/verifyLandlord.html",async()=>{await Vr(()=>import("./verifyLandlord-DPwJDlFg.js"),[])}));Le("/update-landlord*",async e=>{const t=new URLSearchParams(window.location.search),r=t.get("landlordId");try{await se.collection("landlords").doc(r).update({firstName:t.get("firstName"),lastName:t.get("lastName"),facebookLink:t.get("facebookLink"),email:t.get("email")})}catch(i){console.error("Error editing landlord: ",i),alert("Failed to edit landlord.")}window.location.href=`/landlord/${r}`});Le("/landlord/:id",e=>{un("/partials/landlord.html",async t=>{await Vr(()=>Promise.resolve().then(()=>rR),void 0);const r=e.params.id;try{const i=await se.collection("landlords").doc(r).get();if(i.exists){const o=i.data();if(t.querySelector("#landlordNull").classList.add("hidden"),t.querySelector("#landlordExists").classList.remove("hidden"),o.email){const c=t.querySelector("#email");c.classList.remove("hidden"),c.textContent=o.email}if(o.marketplaceId){const c=t.querySelector("#marketplaceLink");c.classList.remove("hidden"),c.textContent="facebook.com/marketplace/profile/"+o.marketplaceId}t.querySelector("#reviewButton").href="/review?landlord="+i.id,t.querySelector("#firstName").textContent=o.firstName||"N/A",t.querySelector("#lastName").textContent=o.lastName||"N/A",t.querySelector("#ratingOverall").textContent=o.ratings.overall||"0.0",t.querySelector("#ratingBehavior").textContent=o.ratings.behavior||"0.0",t.querySelector("#ratingRules").textContent=o.ratings.rules||"0.0",t.querySelector("#ratingQuality").textContent=o.ratings.quality||"0.0",t.querySelector("#ratingRent").textContent=o.ratings.rent||"0.0";const u=await se.collection("reviews").where("landlordId","==",r).get();if(!u.empty){const c=document.getElementById("reviews");u.forEach(l=>{const f=l.data();f.landlordName=(o.firstName||"N/A")+" "+(o.lastName||"N/A"),TI(f).then(g=>{t.appendChild(g)});const p=document.createElement("div");p.className="review-card",p.innerHTML=`
                            <h4>${f.title||"No title"}</h4>
                            <p>${f.content||"No content"}</p>
                            <p><strong>Behavior:</strong> ${f.ratings.behavior??"N/A"}</p>
                            <p><strong>Listing Quality:</strong> ${f.ratings.listingQuality??"N/A"}</p>
                            <p><strong>Listing Rent:</strong> ${f.ratings.listingRent??"N/A"}</p>
                            <p><strong>Rules:</strong> ${f.ratings.rules??"N/A"}</p>
                            <p><strong>Overall:</strong> ${f.ratings.overall??"N/A"}</p>
                        `})}}else t.querySelector("#landlordNull").classList.remove("hidden"),t.querySelector("#landlordExists").classList.add("hidden")}catch(i){console.error("Error fetching landlord data:",i)}})});Le("/profile",()=>un("/partials/profile.html",async e=>{Ns.onAuthStateChanged(t=>{if(t){const r=t.email;e.querySelector("#profile-name").textContent=r,LC(t),Ea(r,e)}else un("/partials/login.html",async()=>{await Vr(()=>import("./authentication-DpVoVDos.js"),[])})})}));Le();window.logout=function(){Ns.signOut().then(()=>{window.location.href="/"})};export{hR as $,mw as A,ww as B,bR as C,LS as D,VS as E,Ta as F,ot as G,ER as H,PS as I,RS as J,iA as K,Iw as L,OS as M,_R as N,hI as O,eA as P,SR as Q,Nf as R,mR as S,HS as T,sR as U,oR as V,US as W,uR as X,TR as Y,aR as Z,Ll as _,Ns as a,z as b,kS as c,se as d,qm as e,H as f,dR as g,fR as h,MS as i,lR as j,D as k,k as l,Pu as m,pR as n,DS as o,Go as p,vR as q,gR as r,cR as s,jm as t,Ct as u,yR as v,wR as w,iR as x,It as y,IR as z};
